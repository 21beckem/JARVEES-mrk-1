/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/@google/genai@1.31.0/dist/web/index.mjs
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
let _defaultBaseGeminiUrl,_defaultBaseVertexUrl;function setDefaultBaseUrls(e){_defaultBaseGeminiUrl=e.geminiUrl,_defaultBaseVertexUrl=e.vertexUrl}function getDefaultBaseUrls(){return{geminiUrl:_defaultBaseGeminiUrl,vertexUrl:_defaultBaseVertexUrl}}function getBaseUrl(e,t,n,a){var o,l;if(!(null==e?void 0:e.baseUrl)){const e=getDefaultBaseUrls();return t?null!==(o=e.vertexUrl)&&void 0!==o?o:n:null!==(l=e.geminiUrl)&&void 0!==l?l:a}return e.baseUrl}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BaseModule{}function formatMap(e,t){return e.replace(/\{([^}]+)\}/g,((e,n)=>{if(Object.prototype.hasOwnProperty.call(t,n)){const e=t[n];return null!=e?String(e):""}throw new Error(`Key '${n}' not found in valueMap.`)}))}function setValueByPath(e,t,n){for(let a=0;a<t.length-1;a++){const o=t[a];if(o.endsWith("[]")){const l=o.slice(0,-2);if(!(l in e)){if(!Array.isArray(n))throw new Error(`Value must be a list given an array path ${o}`);e[l]=Array.from({length:n.length},(()=>({})))}if(Array.isArray(e[l])){const o=e[l];if(Array.isArray(n))for(let e=0;e<o.length;e++){setValueByPath(o[e],t.slice(a+1),n[e])}else for(const e of o)setValueByPath(e,t.slice(a+1),n)}return}if(o.endsWith("[0]")){const l=o.slice(0,-3);l in e||(e[l]=[{}]);return void setValueByPath(e[l][0],t.slice(a+1),n)}e[o]&&"object"==typeof e[o]||(e[o]={}),e=e[o]}const a=t[t.length-1],o=e[a];if(void 0!==o){if(!n||"object"==typeof n&&0===Object.keys(n).length)return;if(n===o)return;if("object"!=typeof o||"object"!=typeof n||null===o||null===n)throw new Error(`Cannot set value for an existing key. Key: ${a}`);Object.assign(o,n)}else if("_self"!==a||"object"!=typeof n||null===n||Array.isArray(n))e[a]=n;else{const t=n;Object.assign(e,t)}}function getValueByPath(e,t,n=void 0){try{if(1===t.length&&"_self"===t[0])return e;for(let a=0;a<t.length;a++){if("object"!=typeof e||null===e)return n;const o=t[a];if(o.endsWith("[]")){const l=o.slice(0,-2);if(l in e){const o=e[l];return Array.isArray(o)?o.map((e=>getValueByPath(e,t.slice(a+1),n))):n}return n}e=e[o]}return e}catch(e){if(e instanceof TypeError)return n;throw e}}function moveValueByPath(e,t){for(const[n,a]of Object.entries(t)){const t=n.split("."),o=a.split("."),l=new Set;let s=-1;for(let e=0;e<t.length;e++)if("*"===t[e]){s=e;break}if(-1!==s&&o.length>s)for(let e=s;e<o.length;e++){const t=o[e];"*"===t||t.endsWith("[]")||t.endsWith("[0]")||l.add(t)}_moveValueRecursive(e,t,o,0,l)}}function _moveValueRecursive(e,t,n,a,o){if(a>=t.length)return;if("object"!=typeof e||null===e)return;const l=t[a];if(l.endsWith("[]")){const s=l.slice(0,-2),i=e;if(s in i&&Array.isArray(i[s]))for(const e of i[s])_moveValueRecursive(e,t,n,a+1,o)}else if("*"===l){if("object"==typeof e&&null!==e&&!Array.isArray(e)){const t=e,l=Object.keys(t).filter((e=>!e.startsWith("_")&&!o.has(e))),s={};for(const e of l)s[e]=t[e];for(const[e,o]of Object.entries(s)){const l=[];for(const t of n.slice(a))"*"===t?l.push(e):l.push(t);setValueByPath(t,l,o)}for(const e of l)delete t[e]}}else{l in e&&_moveValueRecursive(e[l],t,n,a+1,o)}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tBytes$1(e){if("string"!=typeof e)throw new Error("fromImageBytes must be a string");return e}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fetchPredictOperationParametersToVertex(e){const t={},n=getValueByPath(e,["operationName"]);null!=n&&setValueByPath(t,["operationName"],n);const a=getValueByPath(e,["resourceName"]);return null!=a&&setValueByPath(t,["_url","resourceName"],a),t}function generateVideosOperationFromMldev$1(e){const t={},n=getValueByPath(e,["name"]);null!=n&&setValueByPath(t,["name"],n);const a=getValueByPath(e,["metadata"]);null!=a&&setValueByPath(t,["metadata"],a);const o=getValueByPath(e,["done"]);null!=o&&setValueByPath(t,["done"],o);const l=getValueByPath(e,["error"]);null!=l&&setValueByPath(t,["error"],l);const s=getValueByPath(e,["response","generateVideoResponse"]);return null!=s&&setValueByPath(t,["response"],generateVideosResponseFromMldev$1(s)),t}function generateVideosOperationFromVertex$1(e){const t={},n=getValueByPath(e,["name"]);null!=n&&setValueByPath(t,["name"],n);const a=getValueByPath(e,["metadata"]);null!=a&&setValueByPath(t,["metadata"],a);const o=getValueByPath(e,["done"]);null!=o&&setValueByPath(t,["done"],o);const l=getValueByPath(e,["error"]);null!=l&&setValueByPath(t,["error"],l);const s=getValueByPath(e,["response"]);return null!=s&&setValueByPath(t,["response"],generateVideosResponseFromVertex$1(s)),t}function generateVideosResponseFromMldev$1(e){const t={},n=getValueByPath(e,["generatedSamples"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>generatedVideoFromMldev$1(e)))),setValueByPath(t,["generatedVideos"],e)}const a=getValueByPath(e,["raiMediaFilteredCount"]);null!=a&&setValueByPath(t,["raiMediaFilteredCount"],a);const o=getValueByPath(e,["raiMediaFilteredReasons"]);return null!=o&&setValueByPath(t,["raiMediaFilteredReasons"],o),t}function generateVideosResponseFromVertex$1(e){const t={},n=getValueByPath(e,["videos"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>generatedVideoFromVertex$1(e)))),setValueByPath(t,["generatedVideos"],e)}const a=getValueByPath(e,["raiMediaFilteredCount"]);null!=a&&setValueByPath(t,["raiMediaFilteredCount"],a);const o=getValueByPath(e,["raiMediaFilteredReasons"]);return null!=o&&setValueByPath(t,["raiMediaFilteredReasons"],o),t}function generatedVideoFromMldev$1(e){const t={},n=getValueByPath(e,["video"]);return null!=n&&setValueByPath(t,["video"],videoFromMldev$1(n)),t}function generatedVideoFromVertex$1(e){const t={},n=getValueByPath(e,["_self"]);return null!=n&&setValueByPath(t,["video"],videoFromVertex$1(n)),t}function getOperationParametersToMldev(e){const t={},n=getValueByPath(e,["operationName"]);return null!=n&&setValueByPath(t,["_url","operationName"],n),t}function getOperationParametersToVertex(e){const t={},n=getValueByPath(e,["operationName"]);return null!=n&&setValueByPath(t,["_url","operationName"],n),t}function importFileOperationFromMldev$1(e){const t={},n=getValueByPath(e,["name"]);null!=n&&setValueByPath(t,["name"],n);const a=getValueByPath(e,["metadata"]);null!=a&&setValueByPath(t,["metadata"],a);const o=getValueByPath(e,["done"]);null!=o&&setValueByPath(t,["done"],o);const l=getValueByPath(e,["error"]);null!=l&&setValueByPath(t,["error"],l);const s=getValueByPath(e,["response"]);return null!=s&&setValueByPath(t,["response"],importFileResponseFromMldev$1(s)),t}function importFileResponseFromMldev$1(e){const t={},n=getValueByPath(e,["sdkHttpResponse"]);null!=n&&setValueByPath(t,["sdkHttpResponse"],n);const a=getValueByPath(e,["parent"]);null!=a&&setValueByPath(t,["parent"],a);const o=getValueByPath(e,["documentName"]);return null!=o&&setValueByPath(t,["documentName"],o),t}function uploadToFileSearchStoreOperationFromMldev(e){const t={},n=getValueByPath(e,["name"]);null!=n&&setValueByPath(t,["name"],n);const a=getValueByPath(e,["metadata"]);null!=a&&setValueByPath(t,["metadata"],a);const o=getValueByPath(e,["done"]);null!=o&&setValueByPath(t,["done"],o);const l=getValueByPath(e,["error"]);null!=l&&setValueByPath(t,["error"],l);const s=getValueByPath(e,["response"]);return null!=s&&setValueByPath(t,["response"],uploadToFileSearchStoreResponseFromMldev(s)),t}function uploadToFileSearchStoreResponseFromMldev(e){const t={},n=getValueByPath(e,["sdkHttpResponse"]);null!=n&&setValueByPath(t,["sdkHttpResponse"],n);const a=getValueByPath(e,["parent"]);null!=a&&setValueByPath(t,["parent"],a);const o=getValueByPath(e,["documentName"]);return null!=o&&setValueByPath(t,["documentName"],o),t}function videoFromMldev$1(e){const t={},n=getValueByPath(e,["uri"]);null!=n&&setValueByPath(t,["uri"],n);const a=getValueByPath(e,["encodedVideo"]);null!=a&&setValueByPath(t,["videoBytes"],tBytes$1(a));const o=getValueByPath(e,["encoding"]);return null!=o&&setValueByPath(t,["mimeType"],o),t}function videoFromVertex$1(e){const t={},n=getValueByPath(e,["gcsUri"]);null!=n&&setValueByPath(t,["uri"],n);const a=getValueByPath(e,["bytesBase64Encoded"]);null!=a&&setValueByPath(t,["videoBytes"],tBytes$1(a));const o=getValueByPath(e,["mimeType"]);return null!=o&&setValueByPath(t,["mimeType"],o),t}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Outcome,Language,FunctionResponseScheduling,Type,Mode,ApiSpec,AuthType,HttpElementLocation,PhishBlockThreshold,ThinkingLevel,HarmCategory,HarmBlockMethod,HarmBlockThreshold,FinishReason,HarmProbability,HarmSeverity,UrlRetrievalStatus,BlockedReason,TrafficType,Modality,MediaResolution,TuningMode,AdapterSize,JobState,TuningTask,PartMediaResolutionLevel,FeatureSelectionPreference,Behavior,DynamicRetrievalConfigMode,Environment,FunctionCallingConfigMode,SafetyFilterLevel,PersonGeneration,ImagePromptLanguage,MaskReferenceMode,ControlReferenceType,SubjectReferenceType,EditMode,SegmentMode,VideoGenerationReferenceType,VideoGenerationMaskMode,VideoCompressionQuality,TuningMethod,DocumentState,FileState,FileSource,TurnCompleteReason,MediaModality,StartSensitivity,EndSensitivity,ActivityHandling,TurnCoverage,Scale,MusicGenerationMode,LiveMusicPlaybackControl,PagedItem;!function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"}(Outcome||(Outcome={})),function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"}(Language||(Language={})),function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"}(FunctionResponseScheduling||(FunctionResponseScheduling={})),function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"}(Type||(Type={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"}(Mode||(Mode={})),function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"}(ApiSpec||(ApiSpec={})),function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"}(AuthType||(AuthType={})),function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"}(HttpElementLocation||(HttpElementLocation={})),function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"}(PhishBlockThreshold||(PhishBlockThreshold={})),function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.HIGH="HIGH"}(ThinkingLevel||(ThinkingLevel={})),function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"}(HarmCategory||(HarmCategory={})),function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"}(HarmBlockMethod||(HarmBlockMethod={})),function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"}(HarmBlockThreshold||(HarmBlockThreshold={})),function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE"}(FinishReason||(FinishReason={})),function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"}(HarmProbability||(HarmProbability={})),function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"}(HarmSeverity||(HarmSeverity={})),function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"}(UrlRetrievalStatus||(UrlRetrievalStatus={})),function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"}(BlockedReason||(BlockedReason={})),function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"}(TrafficType||(TrafficType={})),function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"}(Modality||(Modality={})),function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"}(MediaResolution||(MediaResolution={})),function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"}(TuningMode||(TuningMode={})),function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"}(AdapterSize||(AdapterSize={})),function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"}(JobState||(JobState={})),function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"}(TuningTask||(TuningTask={})),function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"}(PartMediaResolutionLevel||(PartMediaResolutionLevel={})),function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"}(FeatureSelectionPreference||(FeatureSelectionPreference={})),function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"}(Behavior||(Behavior={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"}(DynamicRetrievalConfigMode||(DynamicRetrievalConfigMode={})),function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"}(Environment||(Environment={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"}(FunctionCallingConfigMode||(FunctionCallingConfigMode={})),function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"}(SafetyFilterLevel||(SafetyFilterLevel={})),function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"}(PersonGeneration||(PersonGeneration={})),function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"}(ImagePromptLanguage||(ImagePromptLanguage={})),function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"}(MaskReferenceMode||(MaskReferenceMode={})),function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"}(ControlReferenceType||(ControlReferenceType={})),function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"}(SubjectReferenceType||(SubjectReferenceType={})),function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"}(EditMode||(EditMode={})),function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"}(SegmentMode||(SegmentMode={})),function(e){e.ASSET="ASSET",e.STYLE="STYLE"}(VideoGenerationReferenceType||(VideoGenerationReferenceType={})),function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"}(VideoGenerationMaskMode||(VideoGenerationMaskMode={})),function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"}(VideoCompressionQuality||(VideoCompressionQuality={})),function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING"}(TuningMethod||(TuningMethod={})),function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"}(DocumentState||(DocumentState={})),function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"}(FileState||(FileState={})),function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"}(FileSource||(FileSource={})),function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"}(TurnCompleteReason||(TurnCompleteReason={})),function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"}(MediaModality||(MediaModality={})),function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"}(StartSensitivity||(StartSensitivity={})),function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"}(EndSensitivity||(EndSensitivity={})),function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"}(ActivityHandling||(ActivityHandling={})),function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"}(TurnCoverage||(TurnCoverage={})),function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"}(Scale||(Scale={})),function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"}(MusicGenerationMode||(MusicGenerationMode={})),function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"}(LiveMusicPlaybackControl||(LiveMusicPlaybackControl={}));class FunctionResponseBlob{}class FunctionResponseFileData{}class FunctionResponsePart{}function createFunctionResponsePartFromBase64(e,t){return{inlineData:{data:e,mimeType:t}}}function createFunctionResponsePartFromUri(e,t){return{fileData:{fileUri:e,mimeType:t}}}class FunctionResponse{}function createPartFromUri(e,t,n){return Object.assign({fileData:{fileUri:e,mimeType:t}},n&&{mediaResolution:{level:n}})}function createPartFromText(e){return{text:e}}function createPartFromFunctionCall(e,t){return{functionCall:{name:e,args:t}}}function createPartFromFunctionResponse(e,t,n,a=[]){return{functionResponse:Object.assign({id:e,name:t,response:n},a.length>0&&{parts:a})}}function createPartFromBase64(e,t,n){return Object.assign({inlineData:{data:e,mimeType:t}},n&&{mediaResolution:{level:n}})}function createPartFromCodeExecutionResult(e,t){return{codeExecutionResult:{outcome:e,output:t}}}function createPartFromExecutableCode(e,t){return{executableCode:{code:e,language:t}}}function _isPart(e){return"object"==typeof e&&null!==e&&("fileData"in e||"text"in e||"functionCall"in e||"functionResponse"in e||"inlineData"in e||"videoMetadata"in e||"codeExecutionResult"in e||"executableCode"in e)}function _toParts(e){const t=[];if("string"==typeof e)t.push(createPartFromText(e));else if(_isPart(e))t.push(e);else{if(!Array.isArray(e))throw new Error("partOrString must be a Part object, string, or array");if(0===e.length)throw new Error("partOrString cannot be an empty array");for(const n of e)if("string"==typeof n)t.push(createPartFromText(n));else{if(!_isPart(n))throw new Error("element in PartUnion must be a Part object or string");t.push(n)}}return t}function createUserContent(e){return{role:"user",parts:_toParts(e)}}function createModelContent(e){return{role:"model",parts:_toParts(e)}}class HttpResponse{constructor(e){const t={};for(const n of e.headers.entries())t[n[0]]=n[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class GenerateContentResponsePromptFeedback{}class GenerateContentResponseUsageMetadata{}class GenerateContentResponse{get text(){var e,t,n,a,o,l,s,i;if(0===(null===(a=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===a?void 0:a.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let r="",u=!1;const c=[];for(const e of null!==(i=null===(s=null===(l=null===(o=this.candidates)||void 0===o?void 0:o[0])||void 0===l?void 0:l.content)||void 0===s?void 0:s.parts)&&void 0!==i?i:[]){for(const[t,n]of Object.entries(e))"text"===t||"thought"===t||"thoughtSignature"===t||null===n&&void 0===n||c.push(t);if("string"==typeof e.text){if("boolean"==typeof e.thought&&e.thought)continue;u=!0,r+=e.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?r:void 0}get data(){var e,t,n,a,o,l,s,i;if(0===(null===(a=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===a?void 0:a.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let r="";const u=[];for(const e of null!==(i=null===(s=null===(l=null===(o=this.candidates)||void 0===o?void 0:o[0])||void 0===l?void 0:l.content)||void 0===s?void 0:s.parts)&&void 0!==i?i:[]){for(const[t,n]of Object.entries(e))"inlineData"===t||null===n&&void 0===n||u.push(t);e.inlineData&&"string"==typeof e.inlineData.data&&(r+=atob(e.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}get functionCalls(){var e,t,n,a,o,l,s,i;if(0===(null===(a=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===a?void 0:a.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const r=null===(i=null===(s=null===(l=null===(o=this.candidates)||void 0===o?void 0:o[0])||void 0===l?void 0:l.content)||void 0===s?void 0:s.parts)||void 0===i?void 0:i.filter((e=>e.functionCall)).map((e=>e.functionCall)).filter((e=>void 0!==e));return 0!==(null==r?void 0:r.length)?r:void 0}get executableCode(){var e,t,n,a,o,l,s,i,r;if(0===(null===(a=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===a?void 0:a.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const u=null===(i=null===(s=null===(l=null===(o=this.candidates)||void 0===o?void 0:o[0])||void 0===l?void 0:l.content)||void 0===s?void 0:s.parts)||void 0===i?void 0:i.filter((e=>e.executableCode)).map((e=>e.executableCode)).filter((e=>void 0!==e));return 0!==(null==u?void 0:u.length)?null===(r=null==u?void 0:u[0])||void 0===r?void 0:r.code:void 0}get codeExecutionResult(){var e,t,n,a,o,l,s,i,r;if(0===(null===(a=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===a?void 0:a.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const u=null===(i=null===(s=null===(l=null===(o=this.candidates)||void 0===o?void 0:o[0])||void 0===l?void 0:l.content)||void 0===s?void 0:s.parts)||void 0===i?void 0:i.filter((e=>e.codeExecutionResult)).map((e=>e.codeExecutionResult)).filter((e=>void 0!==e));return 0!==(null==u?void 0:u.length)?null===(r=null==u?void 0:u[0])||void 0===r?void 0:r.output:void 0}}class EmbedContentResponse{}class GenerateImagesResponse{}class EditImageResponse{}class UpscaleImageResponse{}class RecontextImageResponse{}class SegmentImageResponse{}class ListModelsResponse{}class DeleteModelResponse{}class CountTokensResponse{}class ComputeTokensResponse{}class GenerateVideosResponse{}class GenerateVideosOperation{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const n=new GenerateVideosOperation;let a;const o=e;return a=t?generateVideosOperationFromVertex$1(o):generateVideosOperationFromMldev$1(o),Object.assign(n,a),n}}class ListTuningJobsResponse{}class CancelTuningJobResponse{}class DeleteCachedContentResponse{}class ListCachedContentsResponse{}class ListDocumentsResponse{}class ListFileSearchStoresResponse{}class UploadToFileSearchStoreResumableResponse{}class ImportFileResponse{}class ImportFileOperation{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const n=new ImportFileOperation,a=importFileOperationFromMldev$1(e);return Object.assign(n,a),n}}class ListFilesResponse{}class CreateFileResponse{}class DeleteFileResponse{}class InlinedResponse{}class SingleEmbedContentResponse{}class InlinedEmbedContentResponse{}class ListBatchJobsResponse{}class ReplayResponse{}class RawReferenceImage{toReferenceImageAPI(){return{referenceType:"REFERENCE_TYPE_RAW",referenceImage:this.referenceImage,referenceId:this.referenceId}}}class MaskReferenceImage{toReferenceImageAPI(){return{referenceType:"REFERENCE_TYPE_MASK",referenceImage:this.referenceImage,referenceId:this.referenceId,maskImageConfig:this.config}}}class ControlReferenceImage{toReferenceImageAPI(){return{referenceType:"REFERENCE_TYPE_CONTROL",referenceImage:this.referenceImage,referenceId:this.referenceId,controlImageConfig:this.config}}}class StyleReferenceImage{toReferenceImageAPI(){return{referenceType:"REFERENCE_TYPE_STYLE",referenceImage:this.referenceImage,referenceId:this.referenceId,styleImageConfig:this.config}}}class SubjectReferenceImage{toReferenceImageAPI(){return{referenceType:"REFERENCE_TYPE_SUBJECT",referenceImage:this.referenceImage,referenceId:this.referenceId,subjectImageConfig:this.config}}}class ContentReferenceImage{toReferenceImageAPI(){return{referenceType:"REFERENCE_TYPE_CONTENT",referenceImage:this.referenceImage,referenceId:this.referenceId}}}class LiveServerMessage{get text(){var e,t,n;let a="",o=!1;const l=[];for(const s of null!==(n=null===(t=null===(e=this.serverContent)||void 0===e?void 0:e.modelTurn)||void 0===t?void 0:t.parts)&&void 0!==n?n:[]){for(const[e,t]of Object.entries(s))"text"!==e&&"thought"!==e&&null!==t&&l.push(e);if("string"==typeof s.text){if("boolean"==typeof s.thought&&s.thought)continue;o=!0,a+=s.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?a:void 0}get data(){var e,t,n;let a="";const o=[];for(const l of null!==(n=null===(t=null===(e=this.serverContent)||void 0===e?void 0:e.modelTurn)||void 0===t?void 0:t.parts)&&void 0!==n?n:[]){for(const[e,t]of Object.entries(l))"inlineData"!==e&&null!==t&&o.push(e);l.inlineData&&"string"==typeof l.inlineData.data&&(a+=atob(l.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class LiveClientToolResponse{}class LiveSendToolResponseParameters{constructor(){this.functionResponses=[]}}class LiveMusicServerMessage{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class UploadToFileSearchStoreResponse{}class UploadToFileSearchStoreOperation{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const n=new UploadToFileSearchStoreOperation,a=uploadToFileSearchStoreOperationFromMldev(e);return Object.assign(n,a),n}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tModel(e,t){if(!t||"string"!=typeof t)throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const e=t.split("/",2);return`publishers/${e[0]}/models/${e[1]}`}return`publishers/google/models/${t}`}return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function tCachesModel(e,t){const n=tModel(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function tBlobs(e){return Array.isArray(e)?e.map((e=>tBlob(e))):[tBlob(e)]}function tBlob(e){if("object"==typeof e&&null!==e)return e;throw new Error("Could not parse input as Blob. Unsupported blob type: "+typeof e)}function tImageBlob(e){const t=tBlob(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function tAudioBlob(e){const t=tBlob(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function tPart(e){if(null==e)throw new Error("PartUnion is required");if("object"==typeof e)return e;if("string"==typeof e)return{text:e};throw new Error("Unsupported part type: "+typeof e)}function tParts(e){if(null==e||Array.isArray(e)&&0===e.length)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map((e=>tPart(e))):[tPart(e)]}function _isContent(e){return null!=e&&"object"==typeof e&&"parts"in e&&Array.isArray(e.parts)}function _isFunctionCallPart(e){return null!=e&&"object"==typeof e&&"functionCall"in e}function _isFunctionResponsePart(e){return null!=e&&"object"==typeof e&&"functionResponse"in e}function tContent(e){if(null==e)throw new Error("ContentUnion is required");return _isContent(e)?e:{role:"user",parts:tParts(e)}}function tContentsForEmbed(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap((e=>{const t=tContent(e);return t.parts&&t.parts.length>0&&void 0!==t.parts[0].text?[t.parts[0].text]:[]}));if(e.isVertexAI()){const e=tContent(t);return e.parts&&e.parts.length>0&&void 0!==e.parts[0].text?[e.parts[0].text]:[]}return Array.isArray(t)?t.map((e=>tContent(e))):[tContent(t)]}function tContents(e){if(null==e||Array.isArray(e)&&0===e.length)throw new Error("contents are required");if(!Array.isArray(e)){if(_isFunctionCallPart(e)||_isFunctionResponsePart(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[tContent(e)]}const t=[],n=[],a=_isContent(e[0]);for(const o of e){const e=_isContent(o);if(e!=a)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(e)t.push(o);else{if(_isFunctionCallPart(o)||_isFunctionResponsePart(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return a||t.push({role:"user",parts:tParts(n)}),t}function flattenTypeArrayToAnyOf(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter((e=>"null"!==e));if(1===n.length)t.type=Object.values(Type).includes(n[0].toUpperCase())?n[0].toUpperCase():Type.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const e of n)t.anyOf.push({type:Object.values(Type).includes(e.toUpperCase())?e.toUpperCase():Type.TYPE_UNSPECIFIED})}}function processJsonSchema(e){const t={},n=["items"],a=["anyOf"],o=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=e.anyOf;null!=l&&2==l.length&&("null"===l[0].type?(t.nullable=!0,e=l[1]):"null"===l[1].type&&(t.nullable=!0,e=l[0])),e.type instanceof Array&&flattenTypeArrayToAnyOf(e.type,t);for(const[l,s]of Object.entries(e))if(null!=s)if("type"==l){if("null"===s)throw new Error("type: null can not be the only possible type for the field.");if(s instanceof Array)continue;t.type=Object.values(Type).includes(s.toUpperCase())?s.toUpperCase():Type.TYPE_UNSPECIFIED}else if(n.includes(l))t[l]=processJsonSchema(s);else if(a.includes(l)){const e=[];for(const n of s)"null"!=n.type?e.push(processJsonSchema(n)):t.nullable=!0;t[l]=e}else if(o.includes(l)){const e={};for(const[t,n]of Object.entries(s))e[t]=processJsonSchema(n);t[l]=e}else{if("additionalProperties"===l)continue;t[l]=s}return t}function tSchema(e){return processJsonSchema(e)}function tSpeechConfig(e){if("object"==typeof e)return e;if("string"==typeof e)return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error("Unsupported speechConfig type: "+typeof e)}function tLiveSpeechConfig(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function tTool(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=processJsonSchema(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=processJsonSchema(t.response));return e}function tTools(e){if(null==e)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function resourceName(e,t,n,a=1){const o=!t.startsWith(`${n}/`)&&t.split("/").length===a;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:o?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:o?`${n}/${t}`:t}function tCachedContentName(e,t){if("string"!=typeof t)throw new Error("name must be a string");return resourceName(e,t,"cachedContents")}function tTuningJobStatus(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function tBytes(e){return tBytes$1(e)}function _isFile(e){return null!=e&&"object"==typeof e&&"name"in e}function isGeneratedVideo(e){return null!=e&&"object"==typeof e&&"video"in e}function isVideo(e){return null!=e&&"object"==typeof e&&"uri"in e}function tFileName(e){var t;let n;if(_isFile(e)&&(n=e.name),!(isVideo(e)&&(n=e.uri,void 0===n)||isGeneratedVideo(e)&&(n=null===(t=e.video)||void 0===t?void 0:t.uri,void 0===n))){if("string"==typeof e&&(n=e),void 0===n)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const e=n.split("files/")[1].match(/[a-z0-9]+/);if(null===e)throw new Error(`Could not extract file name from URI ${n}`);n=e[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function tModelsUrl(e,t){let n;return n=e.isVertexAI()?t?"publishers/google/models":"models":t?"models":"tunedModels",n}function tExtractModels(e){for(const t of["models","tunedModels","publisherModels"])if(hasField(e,t))return e[t];return[]}function hasField(e,t){return null!==e&&"object"==typeof e&&t in e}function mcpToGeminiTool(e,t={}){const n=e,a={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};n.outputSchema&&(a.responseJsonSchema=n.outputSchema),t.behavior&&(a.behavior=t.behavior);return{functionDeclarations:[a]}}function mcpToolsToGeminiTool(e,t={}){const n=[],a=new Set;for(const o of e){const e=o.name;if(a.has(e))throw new Error(`Duplicate function name ${e} found in MCP tools. Please ensure function names are unique.`);a.add(e);const l=mcpToGeminiTool(o,t);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function tBatchJobSource(e,t){let n;if("string"==typeof t)if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else{if(!t.startsWith("bq://"))throw new Error(`Unsupported string source for Vertex AI: ${t}`);n={format:"bigquery",bigqueryUri:t}}else{if(!t.startsWith("files/"))throw new Error(`Unsupported string source for Gemini API: ${t}`);n={fileName:t}}else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const a=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(o>0||1!==a)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(a>0||1!==o)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function tBatchJobDestination(e){if("string"!=typeof e)return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function tRecvBatchJobDestination(e){if("object"!=typeof e||null===e)return{};const t=e,n=t.inlinedResponses;if("object"!=typeof n||null===n)return e;const a=n.inlinedResponses;if(!Array.isArray(a)||0===a.length)return e;let o=!1;for(const e of a){if("object"!=typeof e||null===e)continue;const t=e.response;if("object"!=typeof t||null===t)continue;if(void 0!==t.embedding){o=!0;break}}return o&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function tBatchJobName(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function tJobState(e){return"BATCH_STATE_UNSPECIFIED"===e?"JOB_STATE_UNSPECIFIED":"BATCH_STATE_PENDING"===e?"JOB_STATE_PENDING":"BATCH_STATE_RUNNING"===e?"JOB_STATE_RUNNING":"BATCH_STATE_SUCCEEDED"===e?"JOB_STATE_SUCCEEDED":"BATCH_STATE_FAILED"===e?"JOB_STATE_FAILED":"BATCH_STATE_CANCELLED"===e?"JOB_STATE_CANCELLED":"BATCH_STATE_EXPIRED"===e?"JOB_STATE_EXPIRED":e}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function batchJobDestinationFromMldev(e){const t={},n=getValueByPath(e,["responsesFile"]);null!=n&&setValueByPath(t,["fileName"],n);const a=getValueByPath(e,["inlinedResponses","inlinedResponses"]);if(null!=a){let e=a;Array.isArray(e)&&(e=e.map((e=>inlinedResponseFromMldev(e)))),setValueByPath(t,["inlinedResponses"],e)}const o=getValueByPath(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>e))),setValueByPath(t,["inlinedEmbedContentResponses"],e)}return t}function batchJobDestinationFromVertex(e){const t={},n=getValueByPath(e,["predictionsFormat"]);null!=n&&setValueByPath(t,["format"],n);const a=getValueByPath(e,["gcsDestination","outputUriPrefix"]);null!=a&&setValueByPath(t,["gcsUri"],a);const o=getValueByPath(e,["bigqueryDestination","outputUri"]);return null!=o&&setValueByPath(t,["bigqueryUri"],o),t}function batchJobDestinationToVertex(e){const t={},n=getValueByPath(e,["format"]);null!=n&&setValueByPath(t,["predictionsFormat"],n);const a=getValueByPath(e,["gcsUri"]);null!=a&&setValueByPath(t,["gcsDestination","outputUriPrefix"],a);const o=getValueByPath(e,["bigqueryUri"]);if(null!=o&&setValueByPath(t,["bigqueryDestination","outputUri"],o),void 0!==getValueByPath(e,["fileName"]))throw new Error("fileName parameter is not supported in Vertex AI.");if(void 0!==getValueByPath(e,["inlinedResponses"]))throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(void 0!==getValueByPath(e,["inlinedEmbedContentResponses"]))throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function batchJobFromMldev(e){const t={},n=getValueByPath(e,["name"]);null!=n&&setValueByPath(t,["name"],n);const a=getValueByPath(e,["metadata","displayName"]);null!=a&&setValueByPath(t,["displayName"],a);const o=getValueByPath(e,["metadata","state"]);null!=o&&setValueByPath(t,["state"],tJobState(o));const l=getValueByPath(e,["metadata","createTime"]);null!=l&&setValueByPath(t,["createTime"],l);const s=getValueByPath(e,["metadata","endTime"]);null!=s&&setValueByPath(t,["endTime"],s);const i=getValueByPath(e,["metadata","updateTime"]);null!=i&&setValueByPath(t,["updateTime"],i);const r=getValueByPath(e,["metadata","model"]);null!=r&&setValueByPath(t,["model"],r);const u=getValueByPath(e,["metadata","output"]);return null!=u&&setValueByPath(t,["dest"],batchJobDestinationFromMldev(tRecvBatchJobDestination(u))),t}function batchJobFromVertex(e){const t={},n=getValueByPath(e,["name"]);null!=n&&setValueByPath(t,["name"],n);const a=getValueByPath(e,["displayName"]);null!=a&&setValueByPath(t,["displayName"],a);const o=getValueByPath(e,["state"]);null!=o&&setValueByPath(t,["state"],tJobState(o));const l=getValueByPath(e,["error"]);null!=l&&setValueByPath(t,["error"],l);const s=getValueByPath(e,["createTime"]);null!=s&&setValueByPath(t,["createTime"],s);const i=getValueByPath(e,["startTime"]);null!=i&&setValueByPath(t,["startTime"],i);const r=getValueByPath(e,["endTime"]);null!=r&&setValueByPath(t,["endTime"],r);const u=getValueByPath(e,["updateTime"]);null!=u&&setValueByPath(t,["updateTime"],u);const c=getValueByPath(e,["model"]);null!=c&&setValueByPath(t,["model"],c);const h=getValueByPath(e,["inputConfig"]);null!=h&&setValueByPath(t,["src"],batchJobSourceFromVertex(h));const d=getValueByPath(e,["outputConfig"]);null!=d&&setValueByPath(t,["dest"],batchJobDestinationFromVertex(tRecvBatchJobDestination(d)));const p=getValueByPath(e,["completionStats"]);return null!=p&&setValueByPath(t,["completionStats"],p),t}function batchJobSourceFromVertex(e){const t={},n=getValueByPath(e,["instancesFormat"]);null!=n&&setValueByPath(t,["format"],n);const a=getValueByPath(e,["gcsSource","uris"]);null!=a&&setValueByPath(t,["gcsUri"],a);const o=getValueByPath(e,["bigquerySource","inputUri"]);return null!=o&&setValueByPath(t,["bigqueryUri"],o),t}function batchJobSourceToMldev(e,t){const n={};if(void 0!==getValueByPath(t,["format"]))throw new Error("format parameter is not supported in Gemini API.");if(void 0!==getValueByPath(t,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==getValueByPath(t,["bigqueryUri"]))throw new Error("bigqueryUri parameter is not supported in Gemini API.");const a=getValueByPath(t,["fileName"]);null!=a&&setValueByPath(n,["fileName"],a);const o=getValueByPath(t,["inlinedRequests"]);if(null!=o){let t=o;Array.isArray(t)&&(t=t.map((t=>inlinedRequestToMldev(e,t)))),setValueByPath(n,["requests","requests"],t)}return n}function batchJobSourceToVertex(e){const t={},n=getValueByPath(e,["format"]);null!=n&&setValueByPath(t,["instancesFormat"],n);const a=getValueByPath(e,["gcsUri"]);null!=a&&setValueByPath(t,["gcsSource","uris"],a);const o=getValueByPath(e,["bigqueryUri"]);if(null!=o&&setValueByPath(t,["bigquerySource","inputUri"],o),void 0!==getValueByPath(e,["fileName"]))throw new Error("fileName parameter is not supported in Vertex AI.");if(void 0!==getValueByPath(e,["inlinedRequests"]))throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function blobToMldev$4(e){const t={},n=getValueByPath(e,["data"]);if(null!=n&&setValueByPath(t,["data"],n),void 0!==getValueByPath(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const a=getValueByPath(e,["mimeType"]);return null!=a&&setValueByPath(t,["mimeType"],a),t}function cancelBatchJobParametersToMldev(e,t){const n={},a=getValueByPath(t,["name"]);return null!=a&&setValueByPath(n,["_url","name"],tBatchJobName(e,a)),n}function cancelBatchJobParametersToVertex(e,t){const n={},a=getValueByPath(t,["name"]);return null!=a&&setValueByPath(n,["_url","name"],tBatchJobName(e,a)),n}function candidateFromMldev$1(e){const t={},n=getValueByPath(e,["content"]);null!=n&&setValueByPath(t,["content"],n);const a=getValueByPath(e,["citationMetadata"]);null!=a&&setValueByPath(t,["citationMetadata"],citationMetadataFromMldev$1(a));const o=getValueByPath(e,["tokenCount"]);null!=o&&setValueByPath(t,["tokenCount"],o);const l=getValueByPath(e,["finishReason"]);null!=l&&setValueByPath(t,["finishReason"],l);const s=getValueByPath(e,["avgLogprobs"]);null!=s&&setValueByPath(t,["avgLogprobs"],s);const i=getValueByPath(e,["groundingMetadata"]);null!=i&&setValueByPath(t,["groundingMetadata"],i);const r=getValueByPath(e,["index"]);null!=r&&setValueByPath(t,["index"],r);const u=getValueByPath(e,["logprobsResult"]);null!=u&&setValueByPath(t,["logprobsResult"],u);const c=getValueByPath(e,["safetyRatings"]);if(null!=c){let e=c;Array.isArray(e)&&(e=e.map((e=>e))),setValueByPath(t,["safetyRatings"],e)}const h=getValueByPath(e,["urlContextMetadata"]);return null!=h&&setValueByPath(t,["urlContextMetadata"],h),t}function citationMetadataFromMldev$1(e){const t={},n=getValueByPath(e,["citationSources"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>e))),setValueByPath(t,["citations"],e)}return t}function contentToMldev$4(e){const t={},n=getValueByPath(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>partToMldev$4(e)))),setValueByPath(t,["parts"],e)}const a=getValueByPath(e,["role"]);return null!=a&&setValueByPath(t,["role"],a),t}function createBatchJobConfigToMldev(e,t){const n=getValueByPath(e,["displayName"]);if(void 0!==t&&null!=n&&setValueByPath(t,["batch","displayName"],n),void 0!==getValueByPath(e,["dest"]))throw new Error("dest parameter is not supported in Gemini API.");return{}}function createBatchJobConfigToVertex(e,t){const n=getValueByPath(e,["displayName"]);void 0!==t&&null!=n&&setValueByPath(t,["displayName"],n);const a=getValueByPath(e,["dest"]);return void 0!==t&&null!=a&&setValueByPath(t,["outputConfig"],batchJobDestinationToVertex(tBatchJobDestination(a))),{}}function createBatchJobParametersToMldev(e,t){const n={},a=getValueByPath(t,["model"]);null!=a&&setValueByPath(n,["_url","model"],tModel(e,a));const o=getValueByPath(t,["src"]);null!=o&&setValueByPath(n,["batch","inputConfig"],batchJobSourceToMldev(e,tBatchJobSource(e,o)));const l=getValueByPath(t,["config"]);return null!=l&&createBatchJobConfigToMldev(l,n),n}function createBatchJobParametersToVertex(e,t){const n={},a=getValueByPath(t,["model"]);null!=a&&setValueByPath(n,["model"],tModel(e,a));const o=getValueByPath(t,["src"]);null!=o&&setValueByPath(n,["inputConfig"],batchJobSourceToVertex(tBatchJobSource(e,o)));const l=getValueByPath(t,["config"]);return null!=l&&createBatchJobConfigToVertex(l,n),n}function createEmbeddingsBatchJobConfigToMldev(e,t){const n=getValueByPath(e,["displayName"]);return void 0!==t&&null!=n&&setValueByPath(t,["batch","displayName"],n),{}}function createEmbeddingsBatchJobParametersToMldev(e,t){const n={},a=getValueByPath(t,["model"]);null!=a&&setValueByPath(n,["_url","model"],tModel(e,a));const o=getValueByPath(t,["src"]);null!=o&&setValueByPath(n,["batch","inputConfig"],embeddingsBatchJobSourceToMldev(e,o));const l=getValueByPath(t,["config"]);return null!=l&&createEmbeddingsBatchJobConfigToMldev(l,n),n}function deleteBatchJobParametersToMldev(e,t){const n={},a=getValueByPath(t,["name"]);return null!=a&&setValueByPath(n,["_url","name"],tBatchJobName(e,a)),n}function deleteBatchJobParametersToVertex(e,t){const n={},a=getValueByPath(t,["name"]);return null!=a&&setValueByPath(n,["_url","name"],tBatchJobName(e,a)),n}function deleteResourceJobFromMldev(e){const t={},n=getValueByPath(e,["sdkHttpResponse"]);null!=n&&setValueByPath(t,["sdkHttpResponse"],n);const a=getValueByPath(e,["name"]);null!=a&&setValueByPath(t,["name"],a);const o=getValueByPath(e,["done"]);null!=o&&setValueByPath(t,["done"],o);const l=getValueByPath(e,["error"]);return null!=l&&setValueByPath(t,["error"],l),t}function deleteResourceJobFromVertex(e){const t={},n=getValueByPath(e,["sdkHttpResponse"]);null!=n&&setValueByPath(t,["sdkHttpResponse"],n);const a=getValueByPath(e,["name"]);null!=a&&setValueByPath(t,["name"],a);const o=getValueByPath(e,["done"]);null!=o&&setValueByPath(t,["done"],o);const l=getValueByPath(e,["error"]);return null!=l&&setValueByPath(t,["error"],l),t}function embedContentBatchToMldev(e,t){const n={},a=getValueByPath(t,["contents"]);if(null!=a){let t=tContentsForEmbed(e,a);Array.isArray(t)&&(t=t.map((e=>e))),setValueByPath(n,["requests[]","request","content"],t)}const o=getValueByPath(t,["config"]);return null!=o&&(setValueByPath(n,["_self"],embedContentConfigToMldev$1(o,n)),moveValueByPath(n,{"requests[].*":"requests[].request.*"})),n}function embedContentConfigToMldev$1(e,t){const n=getValueByPath(e,["taskType"]);void 0!==t&&null!=n&&setValueByPath(t,["requests[]","taskType"],n);const a=getValueByPath(e,["title"]);void 0!==t&&null!=a&&setValueByPath(t,["requests[]","title"],a);const o=getValueByPath(e,["outputDimensionality"]);if(void 0!==t&&null!=o&&setValueByPath(t,["requests[]","outputDimensionality"],o),void 0!==getValueByPath(e,["mimeType"]))throw new Error("mimeType parameter is not supported in Gemini API.");if(void 0!==getValueByPath(e,["autoTruncate"]))throw new Error("autoTruncate parameter is not supported in Gemini API.");return{}}function embeddingsBatchJobSourceToMldev(e,t){const n={},a=getValueByPath(t,["fileName"]);null!=a&&setValueByPath(n,["file_name"],a);const o=getValueByPath(t,["inlinedRequests"]);return null!=o&&setValueByPath(n,["requests"],embedContentBatchToMldev(e,o)),n}function fileDataToMldev$4(e){const t={};if(void 0!==getValueByPath(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=getValueByPath(e,["fileUri"]);null!=n&&setValueByPath(t,["fileUri"],n);const a=getValueByPath(e,["mimeType"]);return null!=a&&setValueByPath(t,["mimeType"],a),t}function functionCallToMldev$4(e){const t={},n=getValueByPath(e,["id"]);null!=n&&setValueByPath(t,["id"],n);const a=getValueByPath(e,["args"]);null!=a&&setValueByPath(t,["args"],a);const o=getValueByPath(e,["name"]);if(null!=o&&setValueByPath(t,["name"],o),void 0!==getValueByPath(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==getValueByPath(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return t}function functionCallingConfigToMldev$2(e){const t={},n=getValueByPath(e,["mode"]);null!=n&&setValueByPath(t,["mode"],n);const a=getValueByPath(e,["allowedFunctionNames"]);if(null!=a&&setValueByPath(t,["allowedFunctionNames"],a),void 0!==getValueByPath(e,["streamFunctionCallArguments"]))throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function generateContentConfigToMldev$1(e,t,n){const a={},o=getValueByPath(t,["systemInstruction"]);void 0!==n&&null!=o&&setValueByPath(n,["systemInstruction"],contentToMldev$4(tContent(o)));const l=getValueByPath(t,["temperature"]);null!=l&&setValueByPath(a,["temperature"],l);const s=getValueByPath(t,["topP"]);null!=s&&setValueByPath(a,["topP"],s);const i=getValueByPath(t,["topK"]);null!=i&&setValueByPath(a,["topK"],i);const r=getValueByPath(t,["candidateCount"]);null!=r&&setValueByPath(a,["candidateCount"],r);const u=getValueByPath(t,["maxOutputTokens"]);null!=u&&setValueByPath(a,["maxOutputTokens"],u);const c=getValueByPath(t,["stopSequences"]);null!=c&&setValueByPath(a,["stopSequences"],c);const h=getValueByPath(t,["responseLogprobs"]);null!=h&&setValueByPath(a,["responseLogprobs"],h);const d=getValueByPath(t,["logprobs"]);null!=d&&setValueByPath(a,["logprobs"],d);const p=getValueByPath(t,["presencePenalty"]);null!=p&&setValueByPath(a,["presencePenalty"],p);const y=getValueByPath(t,["frequencyPenalty"]);null!=y&&setValueByPath(a,["frequencyPenalty"],y);const g=getValueByPath(t,["seed"]);null!=g&&setValueByPath(a,["seed"],g);const P=getValueByPath(t,["responseMimeType"]);null!=P&&setValueByPath(a,["responseMimeType"],P);const V=getValueByPath(t,["responseSchema"]);null!=V&&setValueByPath(a,["responseSchema"],tSchema(V));const m=getValueByPath(t,["responseJsonSchema"]);if(null!=m&&setValueByPath(a,["responseJsonSchema"],m),void 0!==getValueByPath(t,["routingConfig"]))throw new Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==getValueByPath(t,["modelSelectionConfig"]))throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const B=getValueByPath(t,["safetySettings"]);if(void 0!==n&&null!=B){let e=B;Array.isArray(e)&&(e=e.map((e=>safetySettingToMldev$1(e)))),setValueByPath(n,["safetySettings"],e)}const f=getValueByPath(t,["tools"]);if(void 0!==n&&null!=f){let e=tTools(f);Array.isArray(e)&&(e=e.map((e=>toolToMldev$4(tTool(e))))),setValueByPath(n,["tools"],e)}const v=getValueByPath(t,["toolConfig"]);if(void 0!==n&&null!=v&&setValueByPath(n,["toolConfig"],toolConfigToMldev$2(v)),void 0!==getValueByPath(t,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const T=getValueByPath(t,["cachedContent"]);void 0!==n&&null!=T&&setValueByPath(n,["cachedContent"],tCachedContentName(e,T));const C=getValueByPath(t,["responseModalities"]);null!=C&&setValueByPath(a,["responseModalities"],C);const E=getValueByPath(t,["mediaResolution"]);null!=E&&setValueByPath(a,["mediaResolution"],E);const _=getValueByPath(t,["speechConfig"]);if(null!=_&&setValueByPath(a,["speechConfig"],tSpeechConfig(_)),void 0!==getValueByPath(t,["audioTimestamp"]))throw new Error("audioTimestamp parameter is not supported in Gemini API.");const I=getValueByPath(t,["thinkingConfig"]);null!=I&&setValueByPath(a,["thinkingConfig"],I);const S=getValueByPath(t,["imageConfig"]);return null!=S&&setValueByPath(a,["imageConfig"],imageConfigToMldev$1(S)),a}function generateContentResponseFromMldev$1(e){const t={},n=getValueByPath(e,["sdkHttpResponse"]);null!=n&&setValueByPath(t,["sdkHttpResponse"],n);const a=getValueByPath(e,["candidates"]);if(null!=a){let e=a;Array.isArray(e)&&(e=e.map((e=>candidateFromMldev$1(e)))),setValueByPath(t,["candidates"],e)}const o=getValueByPath(e,["modelVersion"]);null!=o&&setValueByPath(t,["modelVersion"],o);const l=getValueByPath(e,["promptFeedback"]);null!=l&&setValueByPath(t,["promptFeedback"],l);const s=getValueByPath(e,["responseId"]);null!=s&&setValueByPath(t,["responseId"],s);const i=getValueByPath(e,["usageMetadata"]);return null!=i&&setValueByPath(t,["usageMetadata"],i),t}function getBatchJobParametersToMldev(e,t){const n={},a=getValueByPath(t,["name"]);return null!=a&&setValueByPath(n,["_url","name"],tBatchJobName(e,a)),n}function getBatchJobParametersToVertex(e,t){const n={},a=getValueByPath(t,["name"]);return null!=a&&setValueByPath(n,["_url","name"],tBatchJobName(e,a)),n}function googleMapsToMldev$4(e){const t={};if(void 0!==getValueByPath(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=getValueByPath(e,["enableWidget"]);return null!=n&&setValueByPath(t,["enableWidget"],n),t}function googleSearchToMldev$4(e){const t={};if(void 0!==getValueByPath(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==getValueByPath(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=getValueByPath(e,["timeRangeFilter"]);return null!=n&&setValueByPath(t,["timeRangeFilter"],n),t}function imageConfigToMldev$1(e){const t={},n=getValueByPath(e,["aspectRatio"]);null!=n&&setValueByPath(t,["aspectRatio"],n);const a=getValueByPath(e,["imageSize"]);if(null!=a&&setValueByPath(t,["imageSize"],a),void 0!==getValueByPath(e,["outputMimeType"]))throw new Error("outputMimeType parameter is not supported in Gemini API.");if(void 0!==getValueByPath(e,["outputCompressionQuality"]))throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function inlinedRequestToMldev(e,t){const n={},a=getValueByPath(t,["model"]);null!=a&&setValueByPath(n,["request","model"],tModel(e,a));const o=getValueByPath(t,["contents"]);if(null!=o){let e=tContents(o);Array.isArray(e)&&(e=e.map((e=>contentToMldev$4(e)))),setValueByPath(n,["request","contents"],e)}const l=getValueByPath(t,["metadata"]);null!=l&&setValueByPath(n,["metadata"],l);const s=getValueByPath(t,["config"]);return null!=s&&setValueByPath(n,["request","generationConfig"],generateContentConfigToMldev$1(e,s,getValueByPath(n,["request"],{}))),n}function inlinedResponseFromMldev(e){const t={},n=getValueByPath(e,["response"]);null!=n&&setValueByPath(t,["response"],generateContentResponseFromMldev$1(n));const a=getValueByPath(e,["error"]);return null!=a&&setValueByPath(t,["error"],a),t}function listBatchJobsConfigToMldev(e,t){const n=getValueByPath(e,["pageSize"]);void 0!==t&&null!=n&&setValueByPath(t,["_query","pageSize"],n);const a=getValueByPath(e,["pageToken"]);if(void 0!==t&&null!=a&&setValueByPath(t,["_query","pageToken"],a),void 0!==getValueByPath(e,["filter"]))throw new Error("filter parameter is not supported in Gemini API.");return{}}function listBatchJobsConfigToVertex(e,t){const n=getValueByPath(e,["pageSize"]);void 0!==t&&null!=n&&setValueByPath(t,["_query","pageSize"],n);const a=getValueByPath(e,["pageToken"]);void 0!==t&&null!=a&&setValueByPath(t,["_query","pageToken"],a);const o=getValueByPath(e,["filter"]);return void 0!==t&&null!=o&&setValueByPath(t,["_query","filter"],o),{}}function listBatchJobsParametersToMldev(e){const t={},n=getValueByPath(e,["config"]);return null!=n&&listBatchJobsConfigToMldev(n,t),t}function listBatchJobsParametersToVertex(e){const t={},n=getValueByPath(e,["config"]);return null!=n&&listBatchJobsConfigToVertex(n,t),t}function listBatchJobsResponseFromMldev(e){const t={},n=getValueByPath(e,["sdkHttpResponse"]);null!=n&&setValueByPath(t,["sdkHttpResponse"],n);const a=getValueByPath(e,["nextPageToken"]);null!=a&&setValueByPath(t,["nextPageToken"],a);const o=getValueByPath(e,["operations"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>batchJobFromMldev(e)))),setValueByPath(t,["batchJobs"],e)}return t}function listBatchJobsResponseFromVertex(e){const t={},n=getValueByPath(e,["sdkHttpResponse"]);null!=n&&setValueByPath(t,["sdkHttpResponse"],n);const a=getValueByPath(e,["nextPageToken"]);null!=a&&setValueByPath(t,["nextPageToken"],a);const o=getValueByPath(e,["batchPredictionJobs"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>batchJobFromVertex(e)))),setValueByPath(t,["batchJobs"],e)}return t}function partToMldev$4(e){const t={},n=getValueByPath(e,["mediaResolution"]);null!=n&&setValueByPath(t,["mediaResolution"],n);const a=getValueByPath(e,["codeExecutionResult"]);null!=a&&setValueByPath(t,["codeExecutionResult"],a);const o=getValueByPath(e,["executableCode"]);null!=o&&setValueByPath(t,["executableCode"],o);const l=getValueByPath(e,["fileData"]);null!=l&&setValueByPath(t,["fileData"],fileDataToMldev$4(l));const s=getValueByPath(e,["functionCall"]);null!=s&&setValueByPath(t,["functionCall"],functionCallToMldev$4(s));const i=getValueByPath(e,["functionResponse"]);null!=i&&setValueByPath(t,["functionResponse"],i);const r=getValueByPath(e,["inlineData"]);null!=r&&setValueByPath(t,["inlineData"],blobToMldev$4(r));const u=getValueByPath(e,["text"]);null!=u&&setValueByPath(t,["text"],u);const c=getValueByPath(e,["thought"]);null!=c&&setValueByPath(t,["thought"],c);const h=getValueByPath(e,["thoughtSignature"]);null!=h&&setValueByPath(t,["thoughtSignature"],h);const d=getValueByPath(e,["videoMetadata"]);return null!=d&&setValueByPath(t,["videoMetadata"],d),t}function safetySettingToMldev$1(e){const t={},n=getValueByPath(e,["category"]);if(null!=n&&setValueByPath(t,["category"],n),void 0!==getValueByPath(e,["method"]))throw new Error("method parameter is not supported in Gemini API.");const a=getValueByPath(e,["threshold"]);return null!=a&&setValueByPath(t,["threshold"],a),t}function toolConfigToMldev$2(e){const t={},n=getValueByPath(e,["functionCallingConfig"]);null!=n&&setValueByPath(t,["functionCallingConfig"],functionCallingConfigToMldev$2(n));const a=getValueByPath(e,["retrievalConfig"]);return null!=a&&setValueByPath(t,["retrievalConfig"],a),t}function toolToMldev$4(e){const t={},n=getValueByPath(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>e))),setValueByPath(t,["functionDeclarations"],e)}if(void 0!==getValueByPath(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const a=getValueByPath(e,["googleSearchRetrieval"]);null!=a&&setValueByPath(t,["googleSearchRetrieval"],a);const o=getValueByPath(e,["computerUse"]);null!=o&&setValueByPath(t,["computerUse"],o);const l=getValueByPath(e,["fileSearch"]);null!=l&&setValueByPath(t,["fileSearch"],l);const s=getValueByPath(e,["codeExecution"]);if(null!=s&&setValueByPath(t,["codeExecution"],s),void 0!==getValueByPath(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=getValueByPath(e,["googleMaps"]);null!=i&&setValueByPath(t,["googleMaps"],googleMapsToMldev$4(i));const r=getValueByPath(e,["googleSearch"]);null!=r&&setValueByPath(t,["googleSearch"],googleSearchToMldev$4(r));const u=getValueByPath(e,["urlContext"]);return null!=u&&setValueByPath(t,["urlContext"],u),t}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */!function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"}(PagedItem||(PagedItem={}));class Pager{constructor(e,t,n,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,n,a)}init(e,t,n){var a,o;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=null==t?void 0:t.sdkHttpResponse,this.idxInternal=0;let l={config:{}};l=n&&0!==Object.keys(n).length?"object"==typeof n?Object.assign({},n):n:{config:{}},l.config&&(l.config.pageToken=t.nextPageToken),this.paramsInternal=l,this.pageInternalSize=null!==(o=null===(a=l.config)||void 0===a?void 0:a.pageSize)&&void 0!==o?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength){if(!this.hasNextPage())return{value:void 0,done:!0};await this.nextPage()}const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return void 0!==(null===(e=this.params.config)||void 0===e?void 0:e.pageToken)}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Batches extends BaseModule{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new Pager(PagedItem.PAGED_ITEM_BATCH_JOBS,(e=>this.listInternal(e)),await this.listInternal(e),e),this.create=async e=>(this.apiClient.isVertexAI()&&(e.config=this.formatDestination(e.src,e.config)),this.createInternal(e)),this.createEmbeddings=async e=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(e)}}createInlinedGenerateContentRequest(e){const t=createBatchJobParametersToMldev(this.apiClient,e),n=formatMap("{model}:batchGenerateContent",t._url),a=t.batch.inputConfig.requests,o=a.requests,l=[];for(const e of o){const t=Object.assign({},e);if(t.systemInstruction){const e=t.systemInstruction;delete t.systemInstruction;const n=t.request;n.systemInstruction=e,t.request=n}l.push(t)}return a.requests=l,delete t.config,delete t._url,delete t._query,{path:n,body:t}}getGcsUri(e){return"string"==typeof e?e.startsWith("gs://")?e:void 0:!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0?e.gcsUri[0]:void 0}getBigqueryUri(e){return"string"==typeof e?e.startsWith("bq://")?e:void 0:Array.isArray(e)?void 0:e.bigqueryUri}formatDestination(e,t){const n=t?Object.assign({},t):{},a=Date.now().toString();if(n.displayName||(n.displayName=`genaiBatchJob_${a}`),void 0===n.dest){const t=this.getGcsUri(e),o=this.getBigqueryUri(e);if(t)t.endsWith(".jsonl")?n.dest=`${t.slice(0,-6)}/dest`:n.dest=`${t}_dest_${a}`;else{if(!o)throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.");n.dest=`${o}_dest_${a}`}}return n}async createInternal(e){var t,n,a,o;let l,s="",i={};if(this.apiClient.isVertexAI()){const a=createBatchJobParametersToVertex(this.apiClient,e);return s=formatMap("batchPredictionJobs",a._url),i=a._query,delete a._url,delete a._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),l.then((e=>batchJobFromVertex(e)))}{const t=createBatchJobParametersToMldev(this.apiClient,e);return s=formatMap("{model}:batchGenerateContent",t._url),i=t._query,delete t._url,delete t._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(a=e.config)||void 0===a?void 0:a.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then((e=>e.json())),l.then((e=>batchJobFromMldev(e)))}}async createEmbeddingsInternal(e){var t,n;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=createEmbeddingsBatchJobParametersToMldev(this.apiClient,e);return o=formatMap("{model}:asyncBatchEmbedContent",s._url),l=s._query,delete s._url,delete s._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),a.then((e=>batchJobFromMldev(e)))}}async get(e){var t,n,a,o;let l,s="",i={};if(this.apiClient.isVertexAI()){const a=getBatchJobParametersToVertex(this.apiClient,e);return s=formatMap("batchPredictionJobs/{name}",a._url),i=a._query,delete a._url,delete a._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),l.then((e=>batchJobFromVertex(e)))}{const t=getBatchJobParametersToMldev(this.apiClient,e);return s=formatMap("batches/{name}",t._url),i=t._query,delete t._url,delete t._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(a=e.config)||void 0===a?void 0:a.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then((e=>e.json())),l.then((e=>batchJobFromMldev(e)))}}async cancel(e){var t,n,a,o;let l="",s={};if(this.apiClient.isVertexAI()){const a=cancelBatchJobParametersToVertex(this.apiClient,e);l=formatMap("batchPredictionJobs/{name}:cancel",a._url),s=a._query,delete a._url,delete a._query,await this.apiClient.request({path:l,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal})}else{const t=cancelBatchJobParametersToMldev(this.apiClient,e);l=formatMap("batches/{name}:cancel",t._url),s=t._query,delete t._url,delete t._query,await this.apiClient.request({path:l,queryParams:s,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(a=e.config)||void 0===a?void 0:a.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal})}}async listInternal(e){var t,n,a,o;let l,s="",i={};if(this.apiClient.isVertexAI()){const a=listBatchJobsParametersToVertex(e);return s=formatMap("batchPredictionJobs",a._url),i=a._query,delete a._url,delete a._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),l.then((e=>{const t=listBatchJobsResponseFromVertex(e),n=new ListBatchJobsResponse;return Object.assign(n,t),n}))}{const t=listBatchJobsParametersToMldev(e);return s=formatMap("batches",t._url),i=t._query,delete t._url,delete t._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(a=e.config)||void 0===a?void 0:a.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),l.then((e=>{const t=listBatchJobsResponseFromMldev(e),n=new ListBatchJobsResponse;return Object.assign(n,t),n}))}}async delete(e){var t,n,a,o;let l,s="",i={};if(this.apiClient.isVertexAI()){const a=deleteBatchJobParametersToVertex(this.apiClient,e);return s=formatMap("batchPredictionJobs/{name}",a._url),i=a._query,delete a._url,delete a._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),l.then((e=>deleteResourceJobFromVertex(e)))}{const t=deleteBatchJobParametersToMldev(this.apiClient,e);return s=formatMap("batches/{name}",t._url),i=t._query,delete t._url,delete t._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:null===(a=e.config)||void 0===a?void 0:a.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),l.then((e=>deleteResourceJobFromMldev(e)))}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function blobToMldev$3(e){const t={},n=getValueByPath(e,["data"]);if(null!=n&&setValueByPath(t,["data"],n),void 0!==getValueByPath(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const a=getValueByPath(e,["mimeType"]);return null!=a&&setValueByPath(t,["mimeType"],a),t}function contentToMldev$3(e){const t={},n=getValueByPath(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>partToMldev$3(e)))),setValueByPath(t,["parts"],e)}const a=getValueByPath(e,["role"]);return null!=a&&setValueByPath(t,["role"],a),t}function createCachedContentConfigToMldev(e,t){const n=getValueByPath(e,["ttl"]);void 0!==t&&null!=n&&setValueByPath(t,["ttl"],n);const a=getValueByPath(e,["expireTime"]);void 0!==t&&null!=a&&setValueByPath(t,["expireTime"],a);const o=getValueByPath(e,["displayName"]);void 0!==t&&null!=o&&setValueByPath(t,["displayName"],o);const l=getValueByPath(e,["contents"]);if(void 0!==t&&null!=l){let e=tContents(l);Array.isArray(e)&&(e=e.map((e=>contentToMldev$3(e)))),setValueByPath(t,["contents"],e)}const s=getValueByPath(e,["systemInstruction"]);void 0!==t&&null!=s&&setValueByPath(t,["systemInstruction"],contentToMldev$3(tContent(s)));const i=getValueByPath(e,["tools"]);if(void 0!==t&&null!=i){let e=i;Array.isArray(e)&&(e=e.map((e=>toolToMldev$3(e)))),setValueByPath(t,["tools"],e)}const r=getValueByPath(e,["toolConfig"]);if(void 0!==t&&null!=r&&setValueByPath(t,["toolConfig"],toolConfigToMldev$1(r)),void 0!==getValueByPath(e,["kmsKeyName"]))throw new Error("kmsKeyName parameter is not supported in Gemini API.");return{}}function createCachedContentConfigToVertex(e,t){const n=getValueByPath(e,["ttl"]);void 0!==t&&null!=n&&setValueByPath(t,["ttl"],n);const a=getValueByPath(e,["expireTime"]);void 0!==t&&null!=a&&setValueByPath(t,["expireTime"],a);const o=getValueByPath(e,["displayName"]);void 0!==t&&null!=o&&setValueByPath(t,["displayName"],o);const l=getValueByPath(e,["contents"]);if(void 0!==t&&null!=l){let e=tContents(l);Array.isArray(e)&&(e=e.map((e=>e))),setValueByPath(t,["contents"],e)}const s=getValueByPath(e,["systemInstruction"]);void 0!==t&&null!=s&&setValueByPath(t,["systemInstruction"],tContent(s));const i=getValueByPath(e,["tools"]);if(void 0!==t&&null!=i){let e=i;Array.isArray(e)&&(e=e.map((e=>toolToVertex$2(e)))),setValueByPath(t,["tools"],e)}const r=getValueByPath(e,["toolConfig"]);void 0!==t&&null!=r&&setValueByPath(t,["toolConfig"],r);const u=getValueByPath(e,["kmsKeyName"]);return void 0!==t&&null!=u&&setValueByPath(t,["encryption_spec","kmsKeyName"],u),{}}function createCachedContentParametersToMldev(e,t){const n={},a=getValueByPath(t,["model"]);null!=a&&setValueByPath(n,["model"],tCachesModel(e,a));const o=getValueByPath(t,["config"]);return null!=o&&createCachedContentConfigToMldev(o,n),n}function createCachedContentParametersToVertex(e,t){const n={},a=getValueByPath(t,["model"]);null!=a&&setValueByPath(n,["model"],tCachesModel(e,a));const o=getValueByPath(t,["config"]);return null!=o&&createCachedContentConfigToVertex(o,n),n}function deleteCachedContentParametersToMldev(e,t){const n={},a=getValueByPath(t,["name"]);return null!=a&&setValueByPath(n,["_url","name"],tCachedContentName(e,a)),n}function deleteCachedContentParametersToVertex(e,t){const n={},a=getValueByPath(t,["name"]);return null!=a&&setValueByPath(n,["_url","name"],tCachedContentName(e,a)),n}function deleteCachedContentResponseFromMldev(e){const t={},n=getValueByPath(e,["sdkHttpResponse"]);return null!=n&&setValueByPath(t,["sdkHttpResponse"],n),t}function deleteCachedContentResponseFromVertex(e){const t={},n=getValueByPath(e,["sdkHttpResponse"]);return null!=n&&setValueByPath(t,["sdkHttpResponse"],n),t}function fileDataToMldev$3(e){const t={};if(void 0!==getValueByPath(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=getValueByPath(e,["fileUri"]);null!=n&&setValueByPath(t,["fileUri"],n);const a=getValueByPath(e,["mimeType"]);return null!=a&&setValueByPath(t,["mimeType"],a),t}function functionCallToMldev$3(e){const t={},n=getValueByPath(e,["id"]);null!=n&&setValueByPath(t,["id"],n);const a=getValueByPath(e,["args"]);null!=a&&setValueByPath(t,["args"],a);const o=getValueByPath(e,["name"]);if(null!=o&&setValueByPath(t,["name"],o),void 0!==getValueByPath(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==getValueByPath(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return t}function functionCallingConfigToMldev$1(e){const t={},n=getValueByPath(e,["mode"]);null!=n&&setValueByPath(t,["mode"],n);const a=getValueByPath(e,["allowedFunctionNames"]);if(null!=a&&setValueByPath(t,["allowedFunctionNames"],a),void 0!==getValueByPath(e,["streamFunctionCallArguments"]))throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function functionDeclarationToVertex$2(e){const t={};if(void 0!==getValueByPath(e,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");const n=getValueByPath(e,["description"]);null!=n&&setValueByPath(t,["description"],n);const a=getValueByPath(e,["name"]);null!=a&&setValueByPath(t,["name"],a);const o=getValueByPath(e,["parameters"]);null!=o&&setValueByPath(t,["parameters"],o);const l=getValueByPath(e,["parametersJsonSchema"]);null!=l&&setValueByPath(t,["parametersJsonSchema"],l);const s=getValueByPath(e,["response"]);null!=s&&setValueByPath(t,["response"],s);const i=getValueByPath(e,["responseJsonSchema"]);return null!=i&&setValueByPath(t,["responseJsonSchema"],i),t}function getCachedContentParametersToMldev(e,t){const n={},a=getValueByPath(t,["name"]);return null!=a&&setValueByPath(n,["_url","name"],tCachedContentName(e,a)),n}function getCachedContentParametersToVertex(e,t){const n={},a=getValueByPath(t,["name"]);return null!=a&&setValueByPath(n,["_url","name"],tCachedContentName(e,a)),n}function googleMapsToMldev$3(e){const t={};if(void 0!==getValueByPath(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=getValueByPath(e,["enableWidget"]);return null!=n&&setValueByPath(t,["enableWidget"],n),t}function googleSearchToMldev$3(e){const t={};if(void 0!==getValueByPath(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==getValueByPath(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=getValueByPath(e,["timeRangeFilter"]);return null!=n&&setValueByPath(t,["timeRangeFilter"],n),t}function listCachedContentsConfigToMldev(e,t){const n=getValueByPath(e,["pageSize"]);void 0!==t&&null!=n&&setValueByPath(t,["_query","pageSize"],n);const a=getValueByPath(e,["pageToken"]);return void 0!==t&&null!=a&&setValueByPath(t,["_query","pageToken"],a),{}}function listCachedContentsConfigToVertex(e,t){const n=getValueByPath(e,["pageSize"]);void 0!==t&&null!=n&&setValueByPath(t,["_query","pageSize"],n);const a=getValueByPath(e,["pageToken"]);return void 0!==t&&null!=a&&setValueByPath(t,["_query","pageToken"],a),{}}function listCachedContentsParametersToMldev(e){const t={},n=getValueByPath(e,["config"]);return null!=n&&listCachedContentsConfigToMldev(n,t),t}function listCachedContentsParametersToVertex(e){const t={},n=getValueByPath(e,["config"]);return null!=n&&listCachedContentsConfigToVertex(n,t),t}function listCachedContentsResponseFromMldev(e){const t={},n=getValueByPath(e,["sdkHttpResponse"]);null!=n&&setValueByPath(t,["sdkHttpResponse"],n);const a=getValueByPath(e,["nextPageToken"]);null!=a&&setValueByPath(t,["nextPageToken"],a);const o=getValueByPath(e,["cachedContents"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>e))),setValueByPath(t,["cachedContents"],e)}return t}function listCachedContentsResponseFromVertex(e){const t={},n=getValueByPath(e,["sdkHttpResponse"]);null!=n&&setValueByPath(t,["sdkHttpResponse"],n);const a=getValueByPath(e,["nextPageToken"]);null!=a&&setValueByPath(t,["nextPageToken"],a);const o=getValueByPath(e,["cachedContents"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>e))),setValueByPath(t,["cachedContents"],e)}return t}function partToMldev$3(e){const t={},n=getValueByPath(e,["mediaResolution"]);null!=n&&setValueByPath(t,["mediaResolution"],n);const a=getValueByPath(e,["codeExecutionResult"]);null!=a&&setValueByPath(t,["codeExecutionResult"],a);const o=getValueByPath(e,["executableCode"]);null!=o&&setValueByPath(t,["executableCode"],o);const l=getValueByPath(e,["fileData"]);null!=l&&setValueByPath(t,["fileData"],fileDataToMldev$3(l));const s=getValueByPath(e,["functionCall"]);null!=s&&setValueByPath(t,["functionCall"],functionCallToMldev$3(s));const i=getValueByPath(e,["functionResponse"]);null!=i&&setValueByPath(t,["functionResponse"],i);const r=getValueByPath(e,["inlineData"]);null!=r&&setValueByPath(t,["inlineData"],blobToMldev$3(r));const u=getValueByPath(e,["text"]);null!=u&&setValueByPath(t,["text"],u);const c=getValueByPath(e,["thought"]);null!=c&&setValueByPath(t,["thought"],c);const h=getValueByPath(e,["thoughtSignature"]);null!=h&&setValueByPath(t,["thoughtSignature"],h);const d=getValueByPath(e,["videoMetadata"]);return null!=d&&setValueByPath(t,["videoMetadata"],d),t}function toolConfigToMldev$1(e){const t={},n=getValueByPath(e,["functionCallingConfig"]);null!=n&&setValueByPath(t,["functionCallingConfig"],functionCallingConfigToMldev$1(n));const a=getValueByPath(e,["retrievalConfig"]);return null!=a&&setValueByPath(t,["retrievalConfig"],a),t}function toolToMldev$3(e){const t={},n=getValueByPath(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>e))),setValueByPath(t,["functionDeclarations"],e)}if(void 0!==getValueByPath(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const a=getValueByPath(e,["googleSearchRetrieval"]);null!=a&&setValueByPath(t,["googleSearchRetrieval"],a);const o=getValueByPath(e,["computerUse"]);null!=o&&setValueByPath(t,["computerUse"],o);const l=getValueByPath(e,["fileSearch"]);null!=l&&setValueByPath(t,["fileSearch"],l);const s=getValueByPath(e,["codeExecution"]);if(null!=s&&setValueByPath(t,["codeExecution"],s),void 0!==getValueByPath(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=getValueByPath(e,["googleMaps"]);null!=i&&setValueByPath(t,["googleMaps"],googleMapsToMldev$3(i));const r=getValueByPath(e,["googleSearch"]);null!=r&&setValueByPath(t,["googleSearch"],googleSearchToMldev$3(r));const u=getValueByPath(e,["urlContext"]);return null!=u&&setValueByPath(t,["urlContext"],u),t}function toolToVertex$2(e){const t={},n=getValueByPath(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>functionDeclarationToVertex$2(e)))),setValueByPath(t,["functionDeclarations"],e)}const a=getValueByPath(e,["retrieval"]);null!=a&&setValueByPath(t,["retrieval"],a);const o=getValueByPath(e,["googleSearchRetrieval"]);null!=o&&setValueByPath(t,["googleSearchRetrieval"],o);const l=getValueByPath(e,["computerUse"]);if(null!=l&&setValueByPath(t,["computerUse"],l),void 0!==getValueByPath(e,["fileSearch"]))throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=getValueByPath(e,["codeExecution"]);null!=s&&setValueByPath(t,["codeExecution"],s);const i=getValueByPath(e,["enterpriseWebSearch"]);null!=i&&setValueByPath(t,["enterpriseWebSearch"],i);const r=getValueByPath(e,["googleMaps"]);null!=r&&setValueByPath(t,["googleMaps"],r);const u=getValueByPath(e,["googleSearch"]);null!=u&&setValueByPath(t,["googleSearch"],u);const c=getValueByPath(e,["urlContext"]);return null!=c&&setValueByPath(t,["urlContext"],c),t}function updateCachedContentConfigToMldev(e,t){const n=getValueByPath(e,["ttl"]);void 0!==t&&null!=n&&setValueByPath(t,["ttl"],n);const a=getValueByPath(e,["expireTime"]);return void 0!==t&&null!=a&&setValueByPath(t,["expireTime"],a),{}}function updateCachedContentConfigToVertex(e,t){const n=getValueByPath(e,["ttl"]);void 0!==t&&null!=n&&setValueByPath(t,["ttl"],n);const a=getValueByPath(e,["expireTime"]);return void 0!==t&&null!=a&&setValueByPath(t,["expireTime"],a),{}}function updateCachedContentParametersToMldev(e,t){const n={},a=getValueByPath(t,["name"]);null!=a&&setValueByPath(n,["_url","name"],tCachedContentName(e,a));const o=getValueByPath(t,["config"]);return null!=o&&updateCachedContentConfigToMldev(o,n),n}function updateCachedContentParametersToVertex(e,t){const n={},a=getValueByPath(t,["name"]);null!=a&&setValueByPath(n,["_url","name"],tCachedContentName(e,a));const o=getValueByPath(t,["config"]);return null!=o&&updateCachedContentConfigToVertex(o,n),n}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Caches extends BaseModule{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new Pager(PagedItem.PAGED_ITEM_CACHED_CONTENTS,(e=>this.listInternal(e)),await this.listInternal(e),e)}async create(e){var t,n,a,o;let l,s="",i={};if(this.apiClient.isVertexAI()){const a=createCachedContentParametersToVertex(this.apiClient,e);return s=formatMap("cachedContents",a._url),i=a._query,delete a._url,delete a._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),l.then((e=>e))}{const t=createCachedContentParametersToMldev(this.apiClient,e);return s=formatMap("cachedContents",t._url),i=t._query,delete t._url,delete t._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(a=e.config)||void 0===a?void 0:a.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then((e=>e.json())),l.then((e=>e))}}async get(e){var t,n,a,o;let l,s="",i={};if(this.apiClient.isVertexAI()){const a=getCachedContentParametersToVertex(this.apiClient,e);return s=formatMap("{name}",a._url),i=a._query,delete a._url,delete a._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),l.then((e=>e))}{const t=getCachedContentParametersToMldev(this.apiClient,e);return s=formatMap("{name}",t._url),i=t._query,delete t._url,delete t._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(a=e.config)||void 0===a?void 0:a.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then((e=>e.json())),l.then((e=>e))}}async delete(e){var t,n,a,o;let l,s="",i={};if(this.apiClient.isVertexAI()){const a=deleteCachedContentParametersToVertex(this.apiClient,e);return s=formatMap("{name}",a._url),i=a._query,delete a._url,delete a._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),l.then((e=>{const t=deleteCachedContentResponseFromVertex(e),n=new DeleteCachedContentResponse;return Object.assign(n,t),n}))}{const t=deleteCachedContentParametersToMldev(this.apiClient,e);return s=formatMap("{name}",t._url),i=t._query,delete t._url,delete t._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:null===(a=e.config)||void 0===a?void 0:a.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),l.then((e=>{const t=deleteCachedContentResponseFromMldev(e),n=new DeleteCachedContentResponse;return Object.assign(n,t),n}))}}async update(e){var t,n,a,o;let l,s="",i={};if(this.apiClient.isVertexAI()){const a=updateCachedContentParametersToVertex(this.apiClient,e);return s=formatMap("{name}",a._url),i=a._query,delete a._url,delete a._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"PATCH",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),l.then((e=>e))}{const t=updateCachedContentParametersToMldev(this.apiClient,e);return s=formatMap("{name}",t._url),i=t._query,delete t._url,delete t._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(t),httpMethod:"PATCH",httpOptions:null===(a=e.config)||void 0===a?void 0:a.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then((e=>e.json())),l.then((e=>e))}}async listInternal(e){var t,n,a,o;let l,s="",i={};if(this.apiClient.isVertexAI()){const a=listCachedContentsParametersToVertex(e);return s=formatMap("cachedContents",a._url),i=a._query,delete a._url,delete a._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),l.then((e=>{const t=listCachedContentsResponseFromVertex(e),n=new ListCachedContentsResponse;return Object.assign(n,t),n}))}{const t=listCachedContentsParametersToMldev(e);return s=formatMap("cachedContents",t._url),i=t._query,delete t._url,delete t._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(a=e.config)||void 0===a?void 0:a.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),l.then((e=>{const t=listCachedContentsResponseFromMldev(e),n=new ListCachedContentsResponse;return Object.assign(n,t),n}))}}}function __values(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],a=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}function __asyncGenerator(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a,o=n.apply(e,t||[]),l=[];return a=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",(function(e){return function(t){return Promise.resolve(t).then(e,u)}})),a[Symbol.asyncIterator]=function(){return this},a;function s(e,t){o[e]&&(a[e]=function(t){return new Promise((function(n,a){l.push([e,t,n,a])>1||i(e,t)}))},t&&(a[e]=t(a[e])))}function i(e,t){try{(n=o[e](t)).value instanceof __await?Promise.resolve(n.value.v).then(r,u):c(l[0][2],n)}catch(e){c(l[0][3],e)}var n}function r(e){i("next",e)}function u(e){i("throw",e)}function c(e,t){e(t),l.shift(),l.length&&i(l[0][0],l[0][1])}}function __asyncValues(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},a("next"),a("throw"),a("return"),t[Symbol.asyncIterator]=function(){return this},t);function a(n){t[n]=e[n]&&function(t){return new Promise((function(a,o){(function(e,t,n,a){Promise.resolve(a).then((function(t){e({value:t,done:n})}),t)})(a,o,(t=e[n](t)).done,t.value)}))}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
function isValidResponse(e){var t;if(null==e.candidates||0===e.candidates.length)return!1;const n=null===(t=e.candidates[0])||void 0===t?void 0:t.content;return void 0!==n&&isValidContent(n)}function isValidContent(e){if(void 0===e.parts||0===e.parts.length)return!1;for(const t of e.parts)if(void 0===t||0===Object.keys(t).length)return!1;return!0}function validateHistory(e){if(0!==e.length)for(const t of e)if("user"!==t.role&&"model"!==t.role)throw new Error(`Role must be user or model, but got ${t.role}.`)}function extractCuratedHistory(e){if(void 0===e||0===e.length)return[];const t=[],n=e.length;let a=0;for(;a<n;)if("user"===e[a].role)t.push(e[a]),a++;else{const o=[];let l=!0;for(;a<n&&"model"===e[a].role;)o.push(e[a]),l&&!isValidContent(e[a])&&(l=!1),a++;l?t.push(...o):t.pop()}return t}"function"==typeof SuppressedError&&SuppressedError;class Chats{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new Chat(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Chat{constructor(e,t,n,a={},o=[]){this.apiClient=e,this.modelsModule=t,this.model=n,this.config=a,this.history=o,this.sendPromise=Promise.resolve(),validateHistory(o)}async sendMessage(e){var t;await this.sendPromise;const n=tContent(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:null!==(t=e.config)&&void 0!==t?t:this.config});return this.sendPromise=(async()=>{var e,t,o;const l=await a,s=null===(t=null===(e=l.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content,i=l.automaticFunctionCallingHistory,r=this.getHistory(!0).length;let u=[];null!=i&&(u=null!==(o=i.slice(r))&&void 0!==o?o:[]);const c=s?[s]:[];this.recordHistory(n,c,u)})(),await this.sendPromise.catch((()=>{this.sendPromise=Promise.resolve()})),a}async sendMessageStream(e){var t;await this.sendPromise;const n=tContent(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:null!==(t=e.config)&&void 0!==t?t:this.config});this.sendPromise=a.then((()=>{})).catch((()=>{}));const o=await a;return this.processStreamResponse(o,n)}getHistory(e=!1){const t=e?extractCuratedHistory(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var n,a;return __asyncGenerator(this,arguments,(function*(){var o,l,s,i;const r=[];try{for(var u,c=!0,h=__asyncValues(e);!(o=(u=yield __await(h.next())).done);c=!0){i=u.value,c=!1;const e=i;if(isValidResponse(e)){const t=null===(a=null===(n=e.candidates)||void 0===n?void 0:n[0])||void 0===a?void 0:a.content;void 0!==t&&r.push(t)}yield yield __await(e)}}catch(e){l={error:e}}finally{try{c||o||!(s=h.return)||(yield __await(s.call(h)))}finally{if(l)throw l.error}}this.recordHistory(t,r)}))}recordHistory(e,t,n){let a=[];t.length>0&&t.every((e=>void 0!==e.role))?a=t:a.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...extractCuratedHistory(n)):this.history.push(e),this.history.push(...a)}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ApiError extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ApiError.prototype)}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function createFileParametersToMldev(e){const t={},n=getValueByPath(e,["file"]);return null!=n&&setValueByPath(t,["file"],n),t}function createFileResponseFromMldev(e){const t={},n=getValueByPath(e,["sdkHttpResponse"]);return null!=n&&setValueByPath(t,["sdkHttpResponse"],n),t}function deleteFileParametersToMldev(e){const t={},n=getValueByPath(e,["name"]);return null!=n&&setValueByPath(t,["_url","file"],tFileName(n)),t}function deleteFileResponseFromMldev(e){const t={},n=getValueByPath(e,["sdkHttpResponse"]);return null!=n&&setValueByPath(t,["sdkHttpResponse"],n),t}function getFileParametersToMldev(e){const t={},n=getValueByPath(e,["name"]);return null!=n&&setValueByPath(t,["_url","file"],tFileName(n)),t}function listFilesConfigToMldev(e,t){const n=getValueByPath(e,["pageSize"]);void 0!==t&&null!=n&&setValueByPath(t,["_query","pageSize"],n);const a=getValueByPath(e,["pageToken"]);return void 0!==t&&null!=a&&setValueByPath(t,["_query","pageToken"],a),{}}function listFilesParametersToMldev(e){const t={},n=getValueByPath(e,["config"]);return null!=n&&listFilesConfigToMldev(n,t),t}function listFilesResponseFromMldev(e){const t={},n=getValueByPath(e,["sdkHttpResponse"]);null!=n&&setValueByPath(t,["sdkHttpResponse"],n);const a=getValueByPath(e,["nextPageToken"]);null!=a&&setValueByPath(t,["nextPageToken"],a);const o=getValueByPath(e,["files"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>e))),setValueByPath(t,["files"],e)}return t}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Files extends BaseModule{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new Pager(PagedItem.PAGED_ITEM_FILES,(e=>this.listInternal(e)),await this.listInternal(e),e)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then((e=>e))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,n;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=listFilesParametersToMldev(e);return o=formatMap("files",s._url),l=s._query,delete s._url,delete s._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),a.then((e=>{const t=listFilesResponseFromMldev(e),n=new ListFilesResponse;return Object.assign(n,t),n}))}}async createInternal(e){var t,n;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=createFileParametersToMldev(e);return o=formatMap("upload/v1beta/files",s._url),l=s._query,delete s._url,delete s._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),a.then((e=>{const t=createFileResponseFromMldev(e),n=new CreateFileResponse;return Object.assign(n,t),n}))}}async get(e){var t,n;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=getFileParametersToMldev(e);return o=formatMap("files/{file}",s._url),l=s._query,delete s._url,delete s._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),a.then((e=>e))}}async delete(e){var t,n;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=deleteFileParametersToMldev(e);return o=formatMap("files/{file}",s._url),l=s._query,delete s._url,delete s._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),a.then((e=>{const t=deleteFileResponseFromMldev(e),n=new DeleteFileResponse;return Object.assign(n,t),n}))}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function blobToMldev$2(e){const t={},n=getValueByPath(e,["data"]);if(null!=n&&setValueByPath(t,["data"],n),void 0!==getValueByPath(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const a=getValueByPath(e,["mimeType"]);return null!=a&&setValueByPath(t,["mimeType"],a),t}function contentToMldev$2(e){const t={},n=getValueByPath(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>partToMldev$2(e)))),setValueByPath(t,["parts"],e)}const a=getValueByPath(e,["role"]);return null!=a&&setValueByPath(t,["role"],a),t}function fileDataToMldev$2(e){const t={};if(void 0!==getValueByPath(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=getValueByPath(e,["fileUri"]);null!=n&&setValueByPath(t,["fileUri"],n);const a=getValueByPath(e,["mimeType"]);return null!=a&&setValueByPath(t,["mimeType"],a),t}function functionCallToMldev$2(e){const t={},n=getValueByPath(e,["id"]);null!=n&&setValueByPath(t,["id"],n);const a=getValueByPath(e,["args"]);null!=a&&setValueByPath(t,["args"],a);const o=getValueByPath(e,["name"]);if(null!=o&&setValueByPath(t,["name"],o),void 0!==getValueByPath(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==getValueByPath(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return t}function functionDeclarationToVertex$1(e){const t={};if(void 0!==getValueByPath(e,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");const n=getValueByPath(e,["description"]);null!=n&&setValueByPath(t,["description"],n);const a=getValueByPath(e,["name"]);null!=a&&setValueByPath(t,["name"],a);const o=getValueByPath(e,["parameters"]);null!=o&&setValueByPath(t,["parameters"],o);const l=getValueByPath(e,["parametersJsonSchema"]);null!=l&&setValueByPath(t,["parametersJsonSchema"],l);const s=getValueByPath(e,["response"]);null!=s&&setValueByPath(t,["response"],s);const i=getValueByPath(e,["responseJsonSchema"]);return null!=i&&setValueByPath(t,["responseJsonSchema"],i),t}function generationConfigToVertex$1(e){const t={},n=getValueByPath(e,["modelSelectionConfig"]);null!=n&&setValueByPath(t,["modelConfig"],n);const a=getValueByPath(e,["responseJsonSchema"]);null!=a&&setValueByPath(t,["responseJsonSchema"],a);const o=getValueByPath(e,["audioTimestamp"]);null!=o&&setValueByPath(t,["audioTimestamp"],o);const l=getValueByPath(e,["candidateCount"]);null!=l&&setValueByPath(t,["candidateCount"],l);const s=getValueByPath(e,["enableAffectiveDialog"]);null!=s&&setValueByPath(t,["enableAffectiveDialog"],s);const i=getValueByPath(e,["frequencyPenalty"]);null!=i&&setValueByPath(t,["frequencyPenalty"],i);const r=getValueByPath(e,["logprobs"]);null!=r&&setValueByPath(t,["logprobs"],r);const u=getValueByPath(e,["maxOutputTokens"]);null!=u&&setValueByPath(t,["maxOutputTokens"],u);const c=getValueByPath(e,["mediaResolution"]);null!=c&&setValueByPath(t,["mediaResolution"],c);const h=getValueByPath(e,["presencePenalty"]);null!=h&&setValueByPath(t,["presencePenalty"],h);const d=getValueByPath(e,["responseLogprobs"]);null!=d&&setValueByPath(t,["responseLogprobs"],d);const p=getValueByPath(e,["responseMimeType"]);null!=p&&setValueByPath(t,["responseMimeType"],p);const y=getValueByPath(e,["responseModalities"]);null!=y&&setValueByPath(t,["responseModalities"],y);const g=getValueByPath(e,["responseSchema"]);null!=g&&setValueByPath(t,["responseSchema"],g);const P=getValueByPath(e,["routingConfig"]);null!=P&&setValueByPath(t,["routingConfig"],P);const V=getValueByPath(e,["seed"]);null!=V&&setValueByPath(t,["seed"],V);const m=getValueByPath(e,["speechConfig"]);null!=m&&setValueByPath(t,["speechConfig"],speechConfigToVertex$1(m));const B=getValueByPath(e,["stopSequences"]);null!=B&&setValueByPath(t,["stopSequences"],B);const f=getValueByPath(e,["temperature"]);null!=f&&setValueByPath(t,["temperature"],f);const v=getValueByPath(e,["thinkingConfig"]);null!=v&&setValueByPath(t,["thinkingConfig"],v);const T=getValueByPath(e,["topK"]);null!=T&&setValueByPath(t,["topK"],T);const C=getValueByPath(e,["topP"]);if(null!=C&&setValueByPath(t,["topP"],C),void 0!==getValueByPath(e,["enableEnhancedCivicAnswers"]))throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function googleMapsToMldev$2(e){const t={};if(void 0!==getValueByPath(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=getValueByPath(e,["enableWidget"]);return null!=n&&setValueByPath(t,["enableWidget"],n),t}function googleSearchToMldev$2(e){const t={};if(void 0!==getValueByPath(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==getValueByPath(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=getValueByPath(e,["timeRangeFilter"]);return null!=n&&setValueByPath(t,["timeRangeFilter"],n),t}function liveConnectConfigToMldev$1(e,t){const n=getValueByPath(e,["generationConfig"]);void 0!==t&&null!=n&&setValueByPath(t,["setup","generationConfig"],n);const a=getValueByPath(e,["responseModalities"]);void 0!==t&&null!=a&&setValueByPath(t,["setup","generationConfig","responseModalities"],a);const o=getValueByPath(e,["temperature"]);void 0!==t&&null!=o&&setValueByPath(t,["setup","generationConfig","temperature"],o);const l=getValueByPath(e,["topP"]);void 0!==t&&null!=l&&setValueByPath(t,["setup","generationConfig","topP"],l);const s=getValueByPath(e,["topK"]);void 0!==t&&null!=s&&setValueByPath(t,["setup","generationConfig","topK"],s);const i=getValueByPath(e,["maxOutputTokens"]);void 0!==t&&null!=i&&setValueByPath(t,["setup","generationConfig","maxOutputTokens"],i);const r=getValueByPath(e,["mediaResolution"]);void 0!==t&&null!=r&&setValueByPath(t,["setup","generationConfig","mediaResolution"],r);const u=getValueByPath(e,["seed"]);void 0!==t&&null!=u&&setValueByPath(t,["setup","generationConfig","seed"],u);const c=getValueByPath(e,["speechConfig"]);void 0!==t&&null!=c&&setValueByPath(t,["setup","generationConfig","speechConfig"],tLiveSpeechConfig(c));const h=getValueByPath(e,["thinkingConfig"]);void 0!==t&&null!=h&&setValueByPath(t,["setup","generationConfig","thinkingConfig"],h);const d=getValueByPath(e,["enableAffectiveDialog"]);void 0!==t&&null!=d&&setValueByPath(t,["setup","generationConfig","enableAffectiveDialog"],d);const p=getValueByPath(e,["systemInstruction"]);void 0!==t&&null!=p&&setValueByPath(t,["setup","systemInstruction"],contentToMldev$2(tContent(p)));const y=getValueByPath(e,["tools"]);if(void 0!==t&&null!=y){let e=tTools(y);Array.isArray(e)&&(e=e.map((e=>toolToMldev$2(tTool(e))))),setValueByPath(t,["setup","tools"],e)}const g=getValueByPath(e,["sessionResumption"]);void 0!==t&&null!=g&&setValueByPath(t,["setup","sessionResumption"],sessionResumptionConfigToMldev$1(g));const P=getValueByPath(e,["inputAudioTranscription"]);void 0!==t&&null!=P&&setValueByPath(t,["setup","inputAudioTranscription"],P);const V=getValueByPath(e,["outputAudioTranscription"]);void 0!==t&&null!=V&&setValueByPath(t,["setup","outputAudioTranscription"],V);const m=getValueByPath(e,["realtimeInputConfig"]);void 0!==t&&null!=m&&setValueByPath(t,["setup","realtimeInputConfig"],m);const B=getValueByPath(e,["contextWindowCompression"]);void 0!==t&&null!=B&&setValueByPath(t,["setup","contextWindowCompression"],B);const f=getValueByPath(e,["proactivity"]);return void 0!==t&&null!=f&&setValueByPath(t,["setup","proactivity"],f),{}}function liveConnectConfigToVertex(e,t){const n=getValueByPath(e,["generationConfig"]);void 0!==t&&null!=n&&setValueByPath(t,["setup","generationConfig"],generationConfigToVertex$1(n));const a=getValueByPath(e,["responseModalities"]);void 0!==t&&null!=a&&setValueByPath(t,["setup","generationConfig","responseModalities"],a);const o=getValueByPath(e,["temperature"]);void 0!==t&&null!=o&&setValueByPath(t,["setup","generationConfig","temperature"],o);const l=getValueByPath(e,["topP"]);void 0!==t&&null!=l&&setValueByPath(t,["setup","generationConfig","topP"],l);const s=getValueByPath(e,["topK"]);void 0!==t&&null!=s&&setValueByPath(t,["setup","generationConfig","topK"],s);const i=getValueByPath(e,["maxOutputTokens"]);void 0!==t&&null!=i&&setValueByPath(t,["setup","generationConfig","maxOutputTokens"],i);const r=getValueByPath(e,["mediaResolution"]);void 0!==t&&null!=r&&setValueByPath(t,["setup","generationConfig","mediaResolution"],r);const u=getValueByPath(e,["seed"]);void 0!==t&&null!=u&&setValueByPath(t,["setup","generationConfig","seed"],u);const c=getValueByPath(e,["speechConfig"]);void 0!==t&&null!=c&&setValueByPath(t,["setup","generationConfig","speechConfig"],speechConfigToVertex$1(tLiveSpeechConfig(c)));const h=getValueByPath(e,["thinkingConfig"]);void 0!==t&&null!=h&&setValueByPath(t,["setup","generationConfig","thinkingConfig"],h);const d=getValueByPath(e,["enableAffectiveDialog"]);void 0!==t&&null!=d&&setValueByPath(t,["setup","generationConfig","enableAffectiveDialog"],d);const p=getValueByPath(e,["systemInstruction"]);void 0!==t&&null!=p&&setValueByPath(t,["setup","systemInstruction"],tContent(p));const y=getValueByPath(e,["tools"]);if(void 0!==t&&null!=y){let e=tTools(y);Array.isArray(e)&&(e=e.map((e=>toolToVertex$1(tTool(e))))),setValueByPath(t,["setup","tools"],e)}const g=getValueByPath(e,["sessionResumption"]);void 0!==t&&null!=g&&setValueByPath(t,["setup","sessionResumption"],g);const P=getValueByPath(e,["inputAudioTranscription"]);void 0!==t&&null!=P&&setValueByPath(t,["setup","inputAudioTranscription"],P);const V=getValueByPath(e,["outputAudioTranscription"]);void 0!==t&&null!=V&&setValueByPath(t,["setup","outputAudioTranscription"],V);const m=getValueByPath(e,["realtimeInputConfig"]);void 0!==t&&null!=m&&setValueByPath(t,["setup","realtimeInputConfig"],m);const B=getValueByPath(e,["contextWindowCompression"]);void 0!==t&&null!=B&&setValueByPath(t,["setup","contextWindowCompression"],B);const f=getValueByPath(e,["proactivity"]);return void 0!==t&&null!=f&&setValueByPath(t,["setup","proactivity"],f),{}}function liveConnectParametersToMldev(e,t){const n={},a=getValueByPath(t,["model"]);null!=a&&setValueByPath(n,["setup","model"],tModel(e,a));const o=getValueByPath(t,["config"]);return null!=o&&setValueByPath(n,["config"],liveConnectConfigToMldev$1(o,n)),n}function liveConnectParametersToVertex(e,t){const n={},a=getValueByPath(t,["model"]);null!=a&&setValueByPath(n,["setup","model"],tModel(e,a));const o=getValueByPath(t,["config"]);return null!=o&&setValueByPath(n,["config"],liveConnectConfigToVertex(o,n)),n}function liveMusicSetConfigParametersToMldev(e){const t={},n=getValueByPath(e,["musicGenerationConfig"]);return null!=n&&setValueByPath(t,["musicGenerationConfig"],n),t}function liveMusicSetWeightedPromptsParametersToMldev(e){const t={},n=getValueByPath(e,["weightedPrompts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>e))),setValueByPath(t,["weightedPrompts"],e)}return t}function liveSendRealtimeInputParametersToMldev(e){const t={},n=getValueByPath(e,["media"]);if(null!=n){let e=tBlobs(n);Array.isArray(e)&&(e=e.map((e=>blobToMldev$2(e)))),setValueByPath(t,["mediaChunks"],e)}const a=getValueByPath(e,["audio"]);null!=a&&setValueByPath(t,["audio"],blobToMldev$2(tAudioBlob(a)));const o=getValueByPath(e,["audioStreamEnd"]);null!=o&&setValueByPath(t,["audioStreamEnd"],o);const l=getValueByPath(e,["video"]);null!=l&&setValueByPath(t,["video"],blobToMldev$2(tImageBlob(l)));const s=getValueByPath(e,["text"]);null!=s&&setValueByPath(t,["text"],s);const i=getValueByPath(e,["activityStart"]);null!=i&&setValueByPath(t,["activityStart"],i);const r=getValueByPath(e,["activityEnd"]);return null!=r&&setValueByPath(t,["activityEnd"],r),t}function liveSendRealtimeInputParametersToVertex(e){const t={},n=getValueByPath(e,["media"]);if(null!=n){let e=tBlobs(n);Array.isArray(e)&&(e=e.map((e=>e))),setValueByPath(t,["mediaChunks"],e)}const a=getValueByPath(e,["audio"]);null!=a&&setValueByPath(t,["audio"],tAudioBlob(a));const o=getValueByPath(e,["audioStreamEnd"]);null!=o&&setValueByPath(t,["audioStreamEnd"],o);const l=getValueByPath(e,["video"]);null!=l&&setValueByPath(t,["video"],tImageBlob(l));const s=getValueByPath(e,["text"]);null!=s&&setValueByPath(t,["text"],s);const i=getValueByPath(e,["activityStart"]);null!=i&&setValueByPath(t,["activityStart"],i);const r=getValueByPath(e,["activityEnd"]);return null!=r&&setValueByPath(t,["activityEnd"],r),t}function liveServerMessageFromVertex(e){const t={},n=getValueByPath(e,["setupComplete"]);null!=n&&setValueByPath(t,["setupComplete"],n);const a=getValueByPath(e,["serverContent"]);null!=a&&setValueByPath(t,["serverContent"],a);const o=getValueByPath(e,["toolCall"]);null!=o&&setValueByPath(t,["toolCall"],o);const l=getValueByPath(e,["toolCallCancellation"]);null!=l&&setValueByPath(t,["toolCallCancellation"],l);const s=getValueByPath(e,["usageMetadata"]);null!=s&&setValueByPath(t,["usageMetadata"],usageMetadataFromVertex(s));const i=getValueByPath(e,["goAway"]);null!=i&&setValueByPath(t,["goAway"],i);const r=getValueByPath(e,["sessionResumptionUpdate"]);return null!=r&&setValueByPath(t,["sessionResumptionUpdate"],r),t}function partToMldev$2(e){const t={},n=getValueByPath(e,["mediaResolution"]);null!=n&&setValueByPath(t,["mediaResolution"],n);const a=getValueByPath(e,["codeExecutionResult"]);null!=a&&setValueByPath(t,["codeExecutionResult"],a);const o=getValueByPath(e,["executableCode"]);null!=o&&setValueByPath(t,["executableCode"],o);const l=getValueByPath(e,["fileData"]);null!=l&&setValueByPath(t,["fileData"],fileDataToMldev$2(l));const s=getValueByPath(e,["functionCall"]);null!=s&&setValueByPath(t,["functionCall"],functionCallToMldev$2(s));const i=getValueByPath(e,["functionResponse"]);null!=i&&setValueByPath(t,["functionResponse"],i);const r=getValueByPath(e,["inlineData"]);null!=r&&setValueByPath(t,["inlineData"],blobToMldev$2(r));const u=getValueByPath(e,["text"]);null!=u&&setValueByPath(t,["text"],u);const c=getValueByPath(e,["thought"]);null!=c&&setValueByPath(t,["thought"],c);const h=getValueByPath(e,["thoughtSignature"]);null!=h&&setValueByPath(t,["thoughtSignature"],h);const d=getValueByPath(e,["videoMetadata"]);return null!=d&&setValueByPath(t,["videoMetadata"],d),t}function sessionResumptionConfigToMldev$1(e){const t={},n=getValueByPath(e,["handle"]);if(null!=n&&setValueByPath(t,["handle"],n),void 0!==getValueByPath(e,["transparent"]))throw new Error("transparent parameter is not supported in Gemini API.");return t}function speechConfigToVertex$1(e){const t={},n=getValueByPath(e,["languageCode"]);null!=n&&setValueByPath(t,["languageCode"],n);const a=getValueByPath(e,["voiceConfig"]);if(null!=a&&setValueByPath(t,["voiceConfig"],a),void 0!==getValueByPath(e,["multiSpeakerVoiceConfig"]))throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function toolToMldev$2(e){const t={},n=getValueByPath(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>e))),setValueByPath(t,["functionDeclarations"],e)}if(void 0!==getValueByPath(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const a=getValueByPath(e,["googleSearchRetrieval"]);null!=a&&setValueByPath(t,["googleSearchRetrieval"],a);const o=getValueByPath(e,["computerUse"]);null!=o&&setValueByPath(t,["computerUse"],o);const l=getValueByPath(e,["fileSearch"]);null!=l&&setValueByPath(t,["fileSearch"],l);const s=getValueByPath(e,["codeExecution"]);if(null!=s&&setValueByPath(t,["codeExecution"],s),void 0!==getValueByPath(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=getValueByPath(e,["googleMaps"]);null!=i&&setValueByPath(t,["googleMaps"],googleMapsToMldev$2(i));const r=getValueByPath(e,["googleSearch"]);null!=r&&setValueByPath(t,["googleSearch"],googleSearchToMldev$2(r));const u=getValueByPath(e,["urlContext"]);return null!=u&&setValueByPath(t,["urlContext"],u),t}function toolToVertex$1(e){const t={},n=getValueByPath(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>functionDeclarationToVertex$1(e)))),setValueByPath(t,["functionDeclarations"],e)}const a=getValueByPath(e,["retrieval"]);null!=a&&setValueByPath(t,["retrieval"],a);const o=getValueByPath(e,["googleSearchRetrieval"]);null!=o&&setValueByPath(t,["googleSearchRetrieval"],o);const l=getValueByPath(e,["computerUse"]);if(null!=l&&setValueByPath(t,["computerUse"],l),void 0!==getValueByPath(e,["fileSearch"]))throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=getValueByPath(e,["codeExecution"]);null!=s&&setValueByPath(t,["codeExecution"],s);const i=getValueByPath(e,["enterpriseWebSearch"]);null!=i&&setValueByPath(t,["enterpriseWebSearch"],i);const r=getValueByPath(e,["googleMaps"]);null!=r&&setValueByPath(t,["googleMaps"],r);const u=getValueByPath(e,["googleSearch"]);null!=u&&setValueByPath(t,["googleSearch"],u);const c=getValueByPath(e,["urlContext"]);return null!=c&&setValueByPath(t,["urlContext"],c),t}function usageMetadataFromVertex(e){const t={},n=getValueByPath(e,["promptTokenCount"]);null!=n&&setValueByPath(t,["promptTokenCount"],n);const a=getValueByPath(e,["cachedContentTokenCount"]);null!=a&&setValueByPath(t,["cachedContentTokenCount"],a);const o=getValueByPath(e,["candidatesTokenCount"]);null!=o&&setValueByPath(t,["responseTokenCount"],o);const l=getValueByPath(e,["toolUsePromptTokenCount"]);null!=l&&setValueByPath(t,["toolUsePromptTokenCount"],l);const s=getValueByPath(e,["thoughtsTokenCount"]);null!=s&&setValueByPath(t,["thoughtsTokenCount"],s);const i=getValueByPath(e,["totalTokenCount"]);null!=i&&setValueByPath(t,["totalTokenCount"],i);const r=getValueByPath(e,["promptTokensDetails"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map((e=>e))),setValueByPath(t,["promptTokensDetails"],e)}const u=getValueByPath(e,["cacheTokensDetails"]);if(null!=u){let e=u;Array.isArray(e)&&(e=e.map((e=>e))),setValueByPath(t,["cacheTokensDetails"],e)}const c=getValueByPath(e,["candidatesTokensDetails"]);if(null!=c){let e=c;Array.isArray(e)&&(e=e.map((e=>e))),setValueByPath(t,["responseTokensDetails"],e)}const h=getValueByPath(e,["toolUsePromptTokensDetails"]);if(null!=h){let e=h;Array.isArray(e)&&(e=e.map((e=>e))),setValueByPath(t,["toolUsePromptTokensDetails"],e)}const d=getValueByPath(e,["trafficType"]);return null!=d&&setValueByPath(t,["trafficType"],d),t}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function blobToMldev$1(e){const t={},n=getValueByPath(e,["data"]);if(null!=n&&setValueByPath(t,["data"],n),void 0!==getValueByPath(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const a=getValueByPath(e,["mimeType"]);return null!=a&&setValueByPath(t,["mimeType"],a),t}function candidateFromMldev(e){const t={},n=getValueByPath(e,["content"]);null!=n&&setValueByPath(t,["content"],n);const a=getValueByPath(e,["citationMetadata"]);null!=a&&setValueByPath(t,["citationMetadata"],citationMetadataFromMldev(a));const o=getValueByPath(e,["tokenCount"]);null!=o&&setValueByPath(t,["tokenCount"],o);const l=getValueByPath(e,["finishReason"]);null!=l&&setValueByPath(t,["finishReason"],l);const s=getValueByPath(e,["avgLogprobs"]);null!=s&&setValueByPath(t,["avgLogprobs"],s);const i=getValueByPath(e,["groundingMetadata"]);null!=i&&setValueByPath(t,["groundingMetadata"],i);const r=getValueByPath(e,["index"]);null!=r&&setValueByPath(t,["index"],r);const u=getValueByPath(e,["logprobsResult"]);null!=u&&setValueByPath(t,["logprobsResult"],u);const c=getValueByPath(e,["safetyRatings"]);if(null!=c){let e=c;Array.isArray(e)&&(e=e.map((e=>e))),setValueByPath(t,["safetyRatings"],e)}const h=getValueByPath(e,["urlContextMetadata"]);return null!=h&&setValueByPath(t,["urlContextMetadata"],h),t}function citationMetadataFromMldev(e){const t={},n=getValueByPath(e,["citationSources"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>e))),setValueByPath(t,["citations"],e)}return t}function computeTokensParametersToVertex(e,t){const n={},a=getValueByPath(t,["model"]);null!=a&&setValueByPath(n,["_url","model"],tModel(e,a));const o=getValueByPath(t,["contents"]);if(null!=o){let e=tContents(o);Array.isArray(e)&&(e=e.map((e=>e))),setValueByPath(n,["contents"],e)}return n}function computeTokensResponseFromVertex(e){const t={},n=getValueByPath(e,["sdkHttpResponse"]);null!=n&&setValueByPath(t,["sdkHttpResponse"],n);const a=getValueByPath(e,["tokensInfo"]);if(null!=a){let e=a;Array.isArray(e)&&(e=e.map((e=>e))),setValueByPath(t,["tokensInfo"],e)}return t}function contentEmbeddingFromVertex(e){const t={},n=getValueByPath(e,["values"]);null!=n&&setValueByPath(t,["values"],n);const a=getValueByPath(e,["statistics"]);return null!=a&&setValueByPath(t,["statistics"],contentEmbeddingStatisticsFromVertex(a)),t}function contentEmbeddingStatisticsFromVertex(e){const t={},n=getValueByPath(e,["truncated"]);null!=n&&setValueByPath(t,["truncated"],n);const a=getValueByPath(e,["token_count"]);return null!=a&&setValueByPath(t,["tokenCount"],a),t}function contentToMldev$1(e){const t={},n=getValueByPath(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>partToMldev$1(e)))),setValueByPath(t,["parts"],e)}const a=getValueByPath(e,["role"]);return null!=a&&setValueByPath(t,["role"],a),t}function controlReferenceConfigToVertex(e){const t={},n=getValueByPath(e,["controlType"]);null!=n&&setValueByPath(t,["controlType"],n);const a=getValueByPath(e,["enableControlImageComputation"]);return null!=a&&setValueByPath(t,["computeControl"],a),t}function countTokensConfigToMldev(e){if(void 0!==getValueByPath(e,["systemInstruction"]))throw new Error("systemInstruction parameter is not supported in Gemini API.");if(void 0!==getValueByPath(e,["tools"]))throw new Error("tools parameter is not supported in Gemini API.");if(void 0!==getValueByPath(e,["generationConfig"]))throw new Error("generationConfig parameter is not supported in Gemini API.");return{}}function countTokensConfigToVertex(e,t){const n=getValueByPath(e,["systemInstruction"]);void 0!==t&&null!=n&&setValueByPath(t,["systemInstruction"],tContent(n));const a=getValueByPath(e,["tools"]);if(void 0!==t&&null!=a){let e=a;Array.isArray(e)&&(e=e.map((e=>toolToVertex(e)))),setValueByPath(t,["tools"],e)}const o=getValueByPath(e,["generationConfig"]);return void 0!==t&&null!=o&&setValueByPath(t,["generationConfig"],generationConfigToVertex(o)),{}}function countTokensParametersToMldev(e,t){const n={},a=getValueByPath(t,["model"]);null!=a&&setValueByPath(n,["_url","model"],tModel(e,a));const o=getValueByPath(t,["contents"]);if(null!=o){let e=tContents(o);Array.isArray(e)&&(e=e.map((e=>contentToMldev$1(e)))),setValueByPath(n,["contents"],e)}const l=getValueByPath(t,["config"]);return null!=l&&countTokensConfigToMldev(l),n}function countTokensParametersToVertex(e,t){const n={},a=getValueByPath(t,["model"]);null!=a&&setValueByPath(n,["_url","model"],tModel(e,a));const o=getValueByPath(t,["contents"]);if(null!=o){let e=tContents(o);Array.isArray(e)&&(e=e.map((e=>e))),setValueByPath(n,["contents"],e)}const l=getValueByPath(t,["config"]);return null!=l&&countTokensConfigToVertex(l,n),n}function countTokensResponseFromMldev(e){const t={},n=getValueByPath(e,["sdkHttpResponse"]);null!=n&&setValueByPath(t,["sdkHttpResponse"],n);const a=getValueByPath(e,["totalTokens"]);null!=a&&setValueByPath(t,["totalTokens"],a);const o=getValueByPath(e,["cachedContentTokenCount"]);return null!=o&&setValueByPath(t,["cachedContentTokenCount"],o),t}function countTokensResponseFromVertex(e){const t={},n=getValueByPath(e,["sdkHttpResponse"]);null!=n&&setValueByPath(t,["sdkHttpResponse"],n);const a=getValueByPath(e,["totalTokens"]);return null!=a&&setValueByPath(t,["totalTokens"],a),t}function deleteModelParametersToMldev(e,t){const n={},a=getValueByPath(t,["model"]);return null!=a&&setValueByPath(n,["_url","name"],tModel(e,a)),n}function deleteModelParametersToVertex(e,t){const n={},a=getValueByPath(t,["model"]);return null!=a&&setValueByPath(n,["_url","name"],tModel(e,a)),n}function deleteModelResponseFromMldev(e){const t={},n=getValueByPath(e,["sdkHttpResponse"]);return null!=n&&setValueByPath(t,["sdkHttpResponse"],n),t}function deleteModelResponseFromVertex(e){const t={},n=getValueByPath(e,["sdkHttpResponse"]);return null!=n&&setValueByPath(t,["sdkHttpResponse"],n),t}function editImageConfigToVertex(e,t){const n=getValueByPath(e,["outputGcsUri"]);void 0!==t&&null!=n&&setValueByPath(t,["parameters","storageUri"],n);const a=getValueByPath(e,["negativePrompt"]);void 0!==t&&null!=a&&setValueByPath(t,["parameters","negativePrompt"],a);const o=getValueByPath(e,["numberOfImages"]);void 0!==t&&null!=o&&setValueByPath(t,["parameters","sampleCount"],o);const l=getValueByPath(e,["aspectRatio"]);void 0!==t&&null!=l&&setValueByPath(t,["parameters","aspectRatio"],l);const s=getValueByPath(e,["guidanceScale"]);void 0!==t&&null!=s&&setValueByPath(t,["parameters","guidanceScale"],s);const i=getValueByPath(e,["seed"]);void 0!==t&&null!=i&&setValueByPath(t,["parameters","seed"],i);const r=getValueByPath(e,["safetyFilterLevel"]);void 0!==t&&null!=r&&setValueByPath(t,["parameters","safetySetting"],r);const u=getValueByPath(e,["personGeneration"]);void 0!==t&&null!=u&&setValueByPath(t,["parameters","personGeneration"],u);const c=getValueByPath(e,["includeSafetyAttributes"]);void 0!==t&&null!=c&&setValueByPath(t,["parameters","includeSafetyAttributes"],c);const h=getValueByPath(e,["includeRaiReason"]);void 0!==t&&null!=h&&setValueByPath(t,["parameters","includeRaiReason"],h);const d=getValueByPath(e,["language"]);void 0!==t&&null!=d&&setValueByPath(t,["parameters","language"],d);const p=getValueByPath(e,["outputMimeType"]);void 0!==t&&null!=p&&setValueByPath(t,["parameters","outputOptions","mimeType"],p);const y=getValueByPath(e,["outputCompressionQuality"]);void 0!==t&&null!=y&&setValueByPath(t,["parameters","outputOptions","compressionQuality"],y);const g=getValueByPath(e,["addWatermark"]);void 0!==t&&null!=g&&setValueByPath(t,["parameters","addWatermark"],g);const P=getValueByPath(e,["labels"]);void 0!==t&&null!=P&&setValueByPath(t,["labels"],P);const V=getValueByPath(e,["editMode"]);void 0!==t&&null!=V&&setValueByPath(t,["parameters","editMode"],V);const m=getValueByPath(e,["baseSteps"]);return void 0!==t&&null!=m&&setValueByPath(t,["parameters","editConfig","baseSteps"],m),{}}function editImageParametersInternalToVertex(e,t){const n={},a=getValueByPath(t,["model"]);null!=a&&setValueByPath(n,["_url","model"],tModel(e,a));const o=getValueByPath(t,["prompt"]);null!=o&&setValueByPath(n,["instances[0]","prompt"],o);const l=getValueByPath(t,["referenceImages"]);if(null!=l){let e=l;Array.isArray(e)&&(e=e.map((e=>referenceImageAPIInternalToVertex(e)))),setValueByPath(n,["instances[0]","referenceImages"],e)}const s=getValueByPath(t,["config"]);return null!=s&&editImageConfigToVertex(s,n),n}function editImageResponseFromVertex(e){const t={},n=getValueByPath(e,["sdkHttpResponse"]);null!=n&&setValueByPath(t,["sdkHttpResponse"],n);const a=getValueByPath(e,["predictions"]);if(null!=a){let e=a;Array.isArray(e)&&(e=e.map((e=>generatedImageFromVertex(e)))),setValueByPath(t,["generatedImages"],e)}return t}function embedContentConfigToMldev(e,t){const n=getValueByPath(e,["taskType"]);void 0!==t&&null!=n&&setValueByPath(t,["requests[]","taskType"],n);const a=getValueByPath(e,["title"]);void 0!==t&&null!=a&&setValueByPath(t,["requests[]","title"],a);const o=getValueByPath(e,["outputDimensionality"]);if(void 0!==t&&null!=o&&setValueByPath(t,["requests[]","outputDimensionality"],o),void 0!==getValueByPath(e,["mimeType"]))throw new Error("mimeType parameter is not supported in Gemini API.");if(void 0!==getValueByPath(e,["autoTruncate"]))throw new Error("autoTruncate parameter is not supported in Gemini API.");return{}}function embedContentConfigToVertex(e,t){const n=getValueByPath(e,["taskType"]);void 0!==t&&null!=n&&setValueByPath(t,["instances[]","task_type"],n);const a=getValueByPath(e,["title"]);void 0!==t&&null!=a&&setValueByPath(t,["instances[]","title"],a);const o=getValueByPath(e,["outputDimensionality"]);void 0!==t&&null!=o&&setValueByPath(t,["parameters","outputDimensionality"],o);const l=getValueByPath(e,["mimeType"]);void 0!==t&&null!=l&&setValueByPath(t,["instances[]","mimeType"],l);const s=getValueByPath(e,["autoTruncate"]);return void 0!==t&&null!=s&&setValueByPath(t,["parameters","autoTruncate"],s),{}}function embedContentParametersToMldev(e,t){const n={},a=getValueByPath(t,["model"]);null!=a&&setValueByPath(n,["_url","model"],tModel(e,a));const o=getValueByPath(t,["contents"]);if(null!=o){let t=tContentsForEmbed(e,o);Array.isArray(t)&&(t=t.map((e=>e))),setValueByPath(n,["requests[]","content"],t)}const l=getValueByPath(t,["config"]);null!=l&&embedContentConfigToMldev(l,n);const s=getValueByPath(t,["model"]);return void 0!==s&&setValueByPath(n,["requests[]","model"],tModel(e,s)),n}function embedContentParametersToVertex(e,t){const n={},a=getValueByPath(t,["model"]);null!=a&&setValueByPath(n,["_url","model"],tModel(e,a));const o=getValueByPath(t,["contents"]);if(null!=o){let t=tContentsForEmbed(e,o);Array.isArray(t)&&(t=t.map((e=>e))),setValueByPath(n,["instances[]","content"],t)}const l=getValueByPath(t,["config"]);return null!=l&&embedContentConfigToVertex(l,n),n}function embedContentResponseFromMldev(e){const t={},n=getValueByPath(e,["sdkHttpResponse"]);null!=n&&setValueByPath(t,["sdkHttpResponse"],n);const a=getValueByPath(e,["embeddings"]);if(null!=a){let e=a;Array.isArray(e)&&(e=e.map((e=>e))),setValueByPath(t,["embeddings"],e)}const o=getValueByPath(e,["metadata"]);return null!=o&&setValueByPath(t,["metadata"],o),t}function embedContentResponseFromVertex(e){const t={},n=getValueByPath(e,["sdkHttpResponse"]);null!=n&&setValueByPath(t,["sdkHttpResponse"],n);const a=getValueByPath(e,["predictions[]","embeddings"]);if(null!=a){let e=a;Array.isArray(e)&&(e=e.map((e=>contentEmbeddingFromVertex(e)))),setValueByPath(t,["embeddings"],e)}const o=getValueByPath(e,["metadata"]);return null!=o&&setValueByPath(t,["metadata"],o),t}function endpointFromVertex(e){const t={},n=getValueByPath(e,["endpoint"]);null!=n&&setValueByPath(t,["name"],n);const a=getValueByPath(e,["deployedModelId"]);return null!=a&&setValueByPath(t,["deployedModelId"],a),t}function fileDataToMldev$1(e){const t={};if(void 0!==getValueByPath(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=getValueByPath(e,["fileUri"]);null!=n&&setValueByPath(t,["fileUri"],n);const a=getValueByPath(e,["mimeType"]);return null!=a&&setValueByPath(t,["mimeType"],a),t}function functionCallToMldev$1(e){const t={},n=getValueByPath(e,["id"]);null!=n&&setValueByPath(t,["id"],n);const a=getValueByPath(e,["args"]);null!=a&&setValueByPath(t,["args"],a);const o=getValueByPath(e,["name"]);if(null!=o&&setValueByPath(t,["name"],o),void 0!==getValueByPath(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==getValueByPath(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return t}function functionCallingConfigToMldev(e){const t={},n=getValueByPath(e,["mode"]);null!=n&&setValueByPath(t,["mode"],n);const a=getValueByPath(e,["allowedFunctionNames"]);if(null!=a&&setValueByPath(t,["allowedFunctionNames"],a),void 0!==getValueByPath(e,["streamFunctionCallArguments"]))throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function functionDeclarationToVertex(e){const t={};if(void 0!==getValueByPath(e,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");const n=getValueByPath(e,["description"]);null!=n&&setValueByPath(t,["description"],n);const a=getValueByPath(e,["name"]);null!=a&&setValueByPath(t,["name"],a);const o=getValueByPath(e,["parameters"]);null!=o&&setValueByPath(t,["parameters"],o);const l=getValueByPath(e,["parametersJsonSchema"]);null!=l&&setValueByPath(t,["parametersJsonSchema"],l);const s=getValueByPath(e,["response"]);null!=s&&setValueByPath(t,["response"],s);const i=getValueByPath(e,["responseJsonSchema"]);return null!=i&&setValueByPath(t,["responseJsonSchema"],i),t}function generateContentConfigToMldev(e,t,n){const a={},o=getValueByPath(t,["systemInstruction"]);void 0!==n&&null!=o&&setValueByPath(n,["systemInstruction"],contentToMldev$1(tContent(o)));const l=getValueByPath(t,["temperature"]);null!=l&&setValueByPath(a,["temperature"],l);const s=getValueByPath(t,["topP"]);null!=s&&setValueByPath(a,["topP"],s);const i=getValueByPath(t,["topK"]);null!=i&&setValueByPath(a,["topK"],i);const r=getValueByPath(t,["candidateCount"]);null!=r&&setValueByPath(a,["candidateCount"],r);const u=getValueByPath(t,["maxOutputTokens"]);null!=u&&setValueByPath(a,["maxOutputTokens"],u);const c=getValueByPath(t,["stopSequences"]);null!=c&&setValueByPath(a,["stopSequences"],c);const h=getValueByPath(t,["responseLogprobs"]);null!=h&&setValueByPath(a,["responseLogprobs"],h);const d=getValueByPath(t,["logprobs"]);null!=d&&setValueByPath(a,["logprobs"],d);const p=getValueByPath(t,["presencePenalty"]);null!=p&&setValueByPath(a,["presencePenalty"],p);const y=getValueByPath(t,["frequencyPenalty"]);null!=y&&setValueByPath(a,["frequencyPenalty"],y);const g=getValueByPath(t,["seed"]);null!=g&&setValueByPath(a,["seed"],g);const P=getValueByPath(t,["responseMimeType"]);null!=P&&setValueByPath(a,["responseMimeType"],P);const V=getValueByPath(t,["responseSchema"]);null!=V&&setValueByPath(a,["responseSchema"],tSchema(V));const m=getValueByPath(t,["responseJsonSchema"]);if(null!=m&&setValueByPath(a,["responseJsonSchema"],m),void 0!==getValueByPath(t,["routingConfig"]))throw new Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==getValueByPath(t,["modelSelectionConfig"]))throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const B=getValueByPath(t,["safetySettings"]);if(void 0!==n&&null!=B){let e=B;Array.isArray(e)&&(e=e.map((e=>safetySettingToMldev(e)))),setValueByPath(n,["safetySettings"],e)}const f=getValueByPath(t,["tools"]);if(void 0!==n&&null!=f){let e=tTools(f);Array.isArray(e)&&(e=e.map((e=>toolToMldev$1(tTool(e))))),setValueByPath(n,["tools"],e)}const v=getValueByPath(t,["toolConfig"]);if(void 0!==n&&null!=v&&setValueByPath(n,["toolConfig"],toolConfigToMldev(v)),void 0!==getValueByPath(t,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const T=getValueByPath(t,["cachedContent"]);void 0!==n&&null!=T&&setValueByPath(n,["cachedContent"],tCachedContentName(e,T));const C=getValueByPath(t,["responseModalities"]);null!=C&&setValueByPath(a,["responseModalities"],C);const E=getValueByPath(t,["mediaResolution"]);null!=E&&setValueByPath(a,["mediaResolution"],E);const _=getValueByPath(t,["speechConfig"]);if(null!=_&&setValueByPath(a,["speechConfig"],tSpeechConfig(_)),void 0!==getValueByPath(t,["audioTimestamp"]))throw new Error("audioTimestamp parameter is not supported in Gemini API.");const I=getValueByPath(t,["thinkingConfig"]);null!=I&&setValueByPath(a,["thinkingConfig"],I);const S=getValueByPath(t,["imageConfig"]);return null!=S&&setValueByPath(a,["imageConfig"],imageConfigToMldev(S)),a}function generateContentConfigToVertex(e,t,n){const a={},o=getValueByPath(t,["systemInstruction"]);void 0!==n&&null!=o&&setValueByPath(n,["systemInstruction"],tContent(o));const l=getValueByPath(t,["temperature"]);null!=l&&setValueByPath(a,["temperature"],l);const s=getValueByPath(t,["topP"]);null!=s&&setValueByPath(a,["topP"],s);const i=getValueByPath(t,["topK"]);null!=i&&setValueByPath(a,["topK"],i);const r=getValueByPath(t,["candidateCount"]);null!=r&&setValueByPath(a,["candidateCount"],r);const u=getValueByPath(t,["maxOutputTokens"]);null!=u&&setValueByPath(a,["maxOutputTokens"],u);const c=getValueByPath(t,["stopSequences"]);null!=c&&setValueByPath(a,["stopSequences"],c);const h=getValueByPath(t,["responseLogprobs"]);null!=h&&setValueByPath(a,["responseLogprobs"],h);const d=getValueByPath(t,["logprobs"]);null!=d&&setValueByPath(a,["logprobs"],d);const p=getValueByPath(t,["presencePenalty"]);null!=p&&setValueByPath(a,["presencePenalty"],p);const y=getValueByPath(t,["frequencyPenalty"]);null!=y&&setValueByPath(a,["frequencyPenalty"],y);const g=getValueByPath(t,["seed"]);null!=g&&setValueByPath(a,["seed"],g);const P=getValueByPath(t,["responseMimeType"]);null!=P&&setValueByPath(a,["responseMimeType"],P);const V=getValueByPath(t,["responseSchema"]);null!=V&&setValueByPath(a,["responseSchema"],tSchema(V));const m=getValueByPath(t,["responseJsonSchema"]);null!=m&&setValueByPath(a,["responseJsonSchema"],m);const B=getValueByPath(t,["routingConfig"]);null!=B&&setValueByPath(a,["routingConfig"],B);const f=getValueByPath(t,["modelSelectionConfig"]);null!=f&&setValueByPath(a,["modelConfig"],f);const v=getValueByPath(t,["safetySettings"]);if(void 0!==n&&null!=v){let e=v;Array.isArray(e)&&(e=e.map((e=>e))),setValueByPath(n,["safetySettings"],e)}const T=getValueByPath(t,["tools"]);if(void 0!==n&&null!=T){let e=tTools(T);Array.isArray(e)&&(e=e.map((e=>toolToVertex(tTool(e))))),setValueByPath(n,["tools"],e)}const C=getValueByPath(t,["toolConfig"]);void 0!==n&&null!=C&&setValueByPath(n,["toolConfig"],C);const E=getValueByPath(t,["labels"]);void 0!==n&&null!=E&&setValueByPath(n,["labels"],E);const _=getValueByPath(t,["cachedContent"]);void 0!==n&&null!=_&&setValueByPath(n,["cachedContent"],tCachedContentName(e,_));const I=getValueByPath(t,["responseModalities"]);null!=I&&setValueByPath(a,["responseModalities"],I);const S=getValueByPath(t,["mediaResolution"]);null!=S&&setValueByPath(a,["mediaResolution"],S);const A=getValueByPath(t,["speechConfig"]);null!=A&&setValueByPath(a,["speechConfig"],speechConfigToVertex(tSpeechConfig(A)));const M=getValueByPath(t,["audioTimestamp"]);null!=M&&setValueByPath(a,["audioTimestamp"],M);const b=getValueByPath(t,["thinkingConfig"]);null!=b&&setValueByPath(a,["thinkingConfig"],b);const R=getValueByPath(t,["imageConfig"]);return null!=R&&setValueByPath(a,["imageConfig"],imageConfigToVertex(R)),a}function generateContentParametersToMldev(e,t){const n={},a=getValueByPath(t,["model"]);null!=a&&setValueByPath(n,["_url","model"],tModel(e,a));const o=getValueByPath(t,["contents"]);if(null!=o){let e=tContents(o);Array.isArray(e)&&(e=e.map((e=>contentToMldev$1(e)))),setValueByPath(n,["contents"],e)}const l=getValueByPath(t,["config"]);return null!=l&&setValueByPath(n,["generationConfig"],generateContentConfigToMldev(e,l,n)),n}function generateContentParametersToVertex(e,t){const n={},a=getValueByPath(t,["model"]);null!=a&&setValueByPath(n,["_url","model"],tModel(e,a));const o=getValueByPath(t,["contents"]);if(null!=o){let e=tContents(o);Array.isArray(e)&&(e=e.map((e=>e))),setValueByPath(n,["contents"],e)}const l=getValueByPath(t,["config"]);return null!=l&&setValueByPath(n,["generationConfig"],generateContentConfigToVertex(e,l,n)),n}function generateContentResponseFromMldev(e){const t={},n=getValueByPath(e,["sdkHttpResponse"]);null!=n&&setValueByPath(t,["sdkHttpResponse"],n);const a=getValueByPath(e,["candidates"]);if(null!=a){let e=a;Array.isArray(e)&&(e=e.map((e=>candidateFromMldev(e)))),setValueByPath(t,["candidates"],e)}const o=getValueByPath(e,["modelVersion"]);null!=o&&setValueByPath(t,["modelVersion"],o);const l=getValueByPath(e,["promptFeedback"]);null!=l&&setValueByPath(t,["promptFeedback"],l);const s=getValueByPath(e,["responseId"]);null!=s&&setValueByPath(t,["responseId"],s);const i=getValueByPath(e,["usageMetadata"]);return null!=i&&setValueByPath(t,["usageMetadata"],i),t}function generateContentResponseFromVertex(e){const t={},n=getValueByPath(e,["sdkHttpResponse"]);null!=n&&setValueByPath(t,["sdkHttpResponse"],n);const a=getValueByPath(e,["candidates"]);if(null!=a){let e=a;Array.isArray(e)&&(e=e.map((e=>e))),setValueByPath(t,["candidates"],e)}const o=getValueByPath(e,["createTime"]);null!=o&&setValueByPath(t,["createTime"],o);const l=getValueByPath(e,["modelVersion"]);null!=l&&setValueByPath(t,["modelVersion"],l);const s=getValueByPath(e,["promptFeedback"]);null!=s&&setValueByPath(t,["promptFeedback"],s);const i=getValueByPath(e,["responseId"]);null!=i&&setValueByPath(t,["responseId"],i);const r=getValueByPath(e,["usageMetadata"]);return null!=r&&setValueByPath(t,["usageMetadata"],r),t}function generateImagesConfigToMldev(e,t){if(void 0!==getValueByPath(e,["outputGcsUri"]))throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==getValueByPath(e,["negativePrompt"]))throw new Error("negativePrompt parameter is not supported in Gemini API.");const n=getValueByPath(e,["numberOfImages"]);void 0!==t&&null!=n&&setValueByPath(t,["parameters","sampleCount"],n);const a=getValueByPath(e,["aspectRatio"]);void 0!==t&&null!=a&&setValueByPath(t,["parameters","aspectRatio"],a);const o=getValueByPath(e,["guidanceScale"]);if(void 0!==t&&null!=o&&setValueByPath(t,["parameters","guidanceScale"],o),void 0!==getValueByPath(e,["seed"]))throw new Error("seed parameter is not supported in Gemini API.");const l=getValueByPath(e,["safetyFilterLevel"]);void 0!==t&&null!=l&&setValueByPath(t,["parameters","safetySetting"],l);const s=getValueByPath(e,["personGeneration"]);void 0!==t&&null!=s&&setValueByPath(t,["parameters","personGeneration"],s);const i=getValueByPath(e,["includeSafetyAttributes"]);void 0!==t&&null!=i&&setValueByPath(t,["parameters","includeSafetyAttributes"],i);const r=getValueByPath(e,["includeRaiReason"]);void 0!==t&&null!=r&&setValueByPath(t,["parameters","includeRaiReason"],r);const u=getValueByPath(e,["language"]);void 0!==t&&null!=u&&setValueByPath(t,["parameters","language"],u);const c=getValueByPath(e,["outputMimeType"]);void 0!==t&&null!=c&&setValueByPath(t,["parameters","outputOptions","mimeType"],c);const h=getValueByPath(e,["outputCompressionQuality"]);if(void 0!==t&&null!=h&&setValueByPath(t,["parameters","outputOptions","compressionQuality"],h),void 0!==getValueByPath(e,["addWatermark"]))throw new Error("addWatermark parameter is not supported in Gemini API.");if(void 0!==getValueByPath(e,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const d=getValueByPath(e,["imageSize"]);if(void 0!==t&&null!=d&&setValueByPath(t,["parameters","sampleImageSize"],d),void 0!==getValueByPath(e,["enhancePrompt"]))throw new Error("enhancePrompt parameter is not supported in Gemini API.");return{}}function generateImagesConfigToVertex(e,t){const n=getValueByPath(e,["outputGcsUri"]);void 0!==t&&null!=n&&setValueByPath(t,["parameters","storageUri"],n);const a=getValueByPath(e,["negativePrompt"]);void 0!==t&&null!=a&&setValueByPath(t,["parameters","negativePrompt"],a);const o=getValueByPath(e,["numberOfImages"]);void 0!==t&&null!=o&&setValueByPath(t,["parameters","sampleCount"],o);const l=getValueByPath(e,["aspectRatio"]);void 0!==t&&null!=l&&setValueByPath(t,["parameters","aspectRatio"],l);const s=getValueByPath(e,["guidanceScale"]);void 0!==t&&null!=s&&setValueByPath(t,["parameters","guidanceScale"],s);const i=getValueByPath(e,["seed"]);void 0!==t&&null!=i&&setValueByPath(t,["parameters","seed"],i);const r=getValueByPath(e,["safetyFilterLevel"]);void 0!==t&&null!=r&&setValueByPath(t,["parameters","safetySetting"],r);const u=getValueByPath(e,["personGeneration"]);void 0!==t&&null!=u&&setValueByPath(t,["parameters","personGeneration"],u);const c=getValueByPath(e,["includeSafetyAttributes"]);void 0!==t&&null!=c&&setValueByPath(t,["parameters","includeSafetyAttributes"],c);const h=getValueByPath(e,["includeRaiReason"]);void 0!==t&&null!=h&&setValueByPath(t,["parameters","includeRaiReason"],h);const d=getValueByPath(e,["language"]);void 0!==t&&null!=d&&setValueByPath(t,["parameters","language"],d);const p=getValueByPath(e,["outputMimeType"]);void 0!==t&&null!=p&&setValueByPath(t,["parameters","outputOptions","mimeType"],p);const y=getValueByPath(e,["outputCompressionQuality"]);void 0!==t&&null!=y&&setValueByPath(t,["parameters","outputOptions","compressionQuality"],y);const g=getValueByPath(e,["addWatermark"]);void 0!==t&&null!=g&&setValueByPath(t,["parameters","addWatermark"],g);const P=getValueByPath(e,["labels"]);void 0!==t&&null!=P&&setValueByPath(t,["labels"],P);const V=getValueByPath(e,["imageSize"]);void 0!==t&&null!=V&&setValueByPath(t,["parameters","sampleImageSize"],V);const m=getValueByPath(e,["enhancePrompt"]);return void 0!==t&&null!=m&&setValueByPath(t,["parameters","enhancePrompt"],m),{}}function generateImagesParametersToMldev(e,t){const n={},a=getValueByPath(t,["model"]);null!=a&&setValueByPath(n,["_url","model"],tModel(e,a));const o=getValueByPath(t,["prompt"]);null!=o&&setValueByPath(n,["instances[0]","prompt"],o);const l=getValueByPath(t,["config"]);return null!=l&&generateImagesConfigToMldev(l,n),n}function generateImagesParametersToVertex(e,t){const n={},a=getValueByPath(t,["model"]);null!=a&&setValueByPath(n,["_url","model"],tModel(e,a));const o=getValueByPath(t,["prompt"]);null!=o&&setValueByPath(n,["instances[0]","prompt"],o);const l=getValueByPath(t,["config"]);return null!=l&&generateImagesConfigToVertex(l,n),n}function generateImagesResponseFromMldev(e){const t={},n=getValueByPath(e,["sdkHttpResponse"]);null!=n&&setValueByPath(t,["sdkHttpResponse"],n);const a=getValueByPath(e,["predictions"]);if(null!=a){let e=a;Array.isArray(e)&&(e=e.map((e=>generatedImageFromMldev(e)))),setValueByPath(t,["generatedImages"],e)}const o=getValueByPath(e,["positivePromptSafetyAttributes"]);return null!=o&&setValueByPath(t,["positivePromptSafetyAttributes"],safetyAttributesFromMldev(o)),t}function generateImagesResponseFromVertex(e){const t={},n=getValueByPath(e,["sdkHttpResponse"]);null!=n&&setValueByPath(t,["sdkHttpResponse"],n);const a=getValueByPath(e,["predictions"]);if(null!=a){let e=a;Array.isArray(e)&&(e=e.map((e=>generatedImageFromVertex(e)))),setValueByPath(t,["generatedImages"],e)}const o=getValueByPath(e,["positivePromptSafetyAttributes"]);return null!=o&&setValueByPath(t,["positivePromptSafetyAttributes"],safetyAttributesFromVertex(o)),t}function generateVideosConfigToMldev(e,t){const n=getValueByPath(e,["numberOfVideos"]);if(void 0!==t&&null!=n&&setValueByPath(t,["parameters","sampleCount"],n),void 0!==getValueByPath(e,["outputGcsUri"]))throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==getValueByPath(e,["fps"]))throw new Error("fps parameter is not supported in Gemini API.");const a=getValueByPath(e,["durationSeconds"]);if(void 0!==t&&null!=a&&setValueByPath(t,["parameters","durationSeconds"],a),void 0!==getValueByPath(e,["seed"]))throw new Error("seed parameter is not supported in Gemini API.");const o=getValueByPath(e,["aspectRatio"]);void 0!==t&&null!=o&&setValueByPath(t,["parameters","aspectRatio"],o);const l=getValueByPath(e,["resolution"]);void 0!==t&&null!=l&&setValueByPath(t,["parameters","resolution"],l);const s=getValueByPath(e,["personGeneration"]);if(void 0!==t&&null!=s&&setValueByPath(t,["parameters","personGeneration"],s),void 0!==getValueByPath(e,["pubsubTopic"]))throw new Error("pubsubTopic parameter is not supported in Gemini API.");const i=getValueByPath(e,["negativePrompt"]);void 0!==t&&null!=i&&setValueByPath(t,["parameters","negativePrompt"],i);const r=getValueByPath(e,["enhancePrompt"]);if(void 0!==t&&null!=r&&setValueByPath(t,["parameters","enhancePrompt"],r),void 0!==getValueByPath(e,["generateAudio"]))throw new Error("generateAudio parameter is not supported in Gemini API.");const u=getValueByPath(e,["lastFrame"]);void 0!==t&&null!=u&&setValueByPath(t,["instances[0]","lastFrame"],imageToMldev(u));const c=getValueByPath(e,["referenceImages"]);if(void 0!==t&&null!=c){let e=c;Array.isArray(e)&&(e=e.map((e=>videoGenerationReferenceImageToMldev(e)))),setValueByPath(t,["instances[0]","referenceImages"],e)}if(void 0!==getValueByPath(e,["mask"]))throw new Error("mask parameter is not supported in Gemini API.");if(void 0!==getValueByPath(e,["compressionQuality"]))throw new Error("compressionQuality parameter is not supported in Gemini API.");return{}}function generateVideosConfigToVertex(e,t){const n=getValueByPath(e,["numberOfVideos"]);void 0!==t&&null!=n&&setValueByPath(t,["parameters","sampleCount"],n);const a=getValueByPath(e,["outputGcsUri"]);void 0!==t&&null!=a&&setValueByPath(t,["parameters","storageUri"],a);const o=getValueByPath(e,["fps"]);void 0!==t&&null!=o&&setValueByPath(t,["parameters","fps"],o);const l=getValueByPath(e,["durationSeconds"]);void 0!==t&&null!=l&&setValueByPath(t,["parameters","durationSeconds"],l);const s=getValueByPath(e,["seed"]);void 0!==t&&null!=s&&setValueByPath(t,["parameters","seed"],s);const i=getValueByPath(e,["aspectRatio"]);void 0!==t&&null!=i&&setValueByPath(t,["parameters","aspectRatio"],i);const r=getValueByPath(e,["resolution"]);void 0!==t&&null!=r&&setValueByPath(t,["parameters","resolution"],r);const u=getValueByPath(e,["personGeneration"]);void 0!==t&&null!=u&&setValueByPath(t,["parameters","personGeneration"],u);const c=getValueByPath(e,["pubsubTopic"]);void 0!==t&&null!=c&&setValueByPath(t,["parameters","pubsubTopic"],c);const h=getValueByPath(e,["negativePrompt"]);void 0!==t&&null!=h&&setValueByPath(t,["parameters","negativePrompt"],h);const d=getValueByPath(e,["enhancePrompt"]);void 0!==t&&null!=d&&setValueByPath(t,["parameters","enhancePrompt"],d);const p=getValueByPath(e,["generateAudio"]);void 0!==t&&null!=p&&setValueByPath(t,["parameters","generateAudio"],p);const y=getValueByPath(e,["lastFrame"]);void 0!==t&&null!=y&&setValueByPath(t,["instances[0]","lastFrame"],imageToVertex(y));const g=getValueByPath(e,["referenceImages"]);if(void 0!==t&&null!=g){let e=g;Array.isArray(e)&&(e=e.map((e=>videoGenerationReferenceImageToVertex(e)))),setValueByPath(t,["instances[0]","referenceImages"],e)}const P=getValueByPath(e,["mask"]);void 0!==t&&null!=P&&setValueByPath(t,["instances[0]","mask"],videoGenerationMaskToVertex(P));const V=getValueByPath(e,["compressionQuality"]);return void 0!==t&&null!=V&&setValueByPath(t,["parameters","compressionQuality"],V),{}}function generateVideosOperationFromMldev(e){const t={},n=getValueByPath(e,["name"]);null!=n&&setValueByPath(t,["name"],n);const a=getValueByPath(e,["metadata"]);null!=a&&setValueByPath(t,["metadata"],a);const o=getValueByPath(e,["done"]);null!=o&&setValueByPath(t,["done"],o);const l=getValueByPath(e,["error"]);null!=l&&setValueByPath(t,["error"],l);const s=getValueByPath(e,["response","generateVideoResponse"]);return null!=s&&setValueByPath(t,["response"],generateVideosResponseFromMldev(s)),t}function generateVideosOperationFromVertex(e){const t={},n=getValueByPath(e,["name"]);null!=n&&setValueByPath(t,["name"],n);const a=getValueByPath(e,["metadata"]);null!=a&&setValueByPath(t,["metadata"],a);const o=getValueByPath(e,["done"]);null!=o&&setValueByPath(t,["done"],o);const l=getValueByPath(e,["error"]);null!=l&&setValueByPath(t,["error"],l);const s=getValueByPath(e,["response"]);return null!=s&&setValueByPath(t,["response"],generateVideosResponseFromVertex(s)),t}function generateVideosParametersToMldev(e,t){const n={},a=getValueByPath(t,["model"]);null!=a&&setValueByPath(n,["_url","model"],tModel(e,a));const o=getValueByPath(t,["prompt"]);null!=o&&setValueByPath(n,["instances[0]","prompt"],o);const l=getValueByPath(t,["image"]);null!=l&&setValueByPath(n,["instances[0]","image"],imageToMldev(l));const s=getValueByPath(t,["video"]);null!=s&&setValueByPath(n,["instances[0]","video"],videoToMldev(s));const i=getValueByPath(t,["source"]);null!=i&&generateVideosSourceToMldev(i,n);const r=getValueByPath(t,["config"]);return null!=r&&generateVideosConfigToMldev(r,n),n}function generateVideosParametersToVertex(e,t){const n={},a=getValueByPath(t,["model"]);null!=a&&setValueByPath(n,["_url","model"],tModel(e,a));const o=getValueByPath(t,["prompt"]);null!=o&&setValueByPath(n,["instances[0]","prompt"],o);const l=getValueByPath(t,["image"]);null!=l&&setValueByPath(n,["instances[0]","image"],imageToVertex(l));const s=getValueByPath(t,["video"]);null!=s&&setValueByPath(n,["instances[0]","video"],videoToVertex(s));const i=getValueByPath(t,["source"]);null!=i&&generateVideosSourceToVertex(i,n);const r=getValueByPath(t,["config"]);return null!=r&&generateVideosConfigToVertex(r,n),n}function generateVideosResponseFromMldev(e){const t={},n=getValueByPath(e,["generatedSamples"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>generatedVideoFromMldev(e)))),setValueByPath(t,["generatedVideos"],e)}const a=getValueByPath(e,["raiMediaFilteredCount"]);null!=a&&setValueByPath(t,["raiMediaFilteredCount"],a);const o=getValueByPath(e,["raiMediaFilteredReasons"]);return null!=o&&setValueByPath(t,["raiMediaFilteredReasons"],o),t}function generateVideosResponseFromVertex(e){const t={},n=getValueByPath(e,["videos"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>generatedVideoFromVertex(e)))),setValueByPath(t,["generatedVideos"],e)}const a=getValueByPath(e,["raiMediaFilteredCount"]);null!=a&&setValueByPath(t,["raiMediaFilteredCount"],a);const o=getValueByPath(e,["raiMediaFilteredReasons"]);return null!=o&&setValueByPath(t,["raiMediaFilteredReasons"],o),t}function generateVideosSourceToMldev(e,t){const n=getValueByPath(e,["prompt"]);void 0!==t&&null!=n&&setValueByPath(t,["instances[0]","prompt"],n);const a=getValueByPath(e,["image"]);void 0!==t&&null!=a&&setValueByPath(t,["instances[0]","image"],imageToMldev(a));const o=getValueByPath(e,["video"]);return void 0!==t&&null!=o&&setValueByPath(t,["instances[0]","video"],videoToMldev(o)),{}}function generateVideosSourceToVertex(e,t){const n=getValueByPath(e,["prompt"]);void 0!==t&&null!=n&&setValueByPath(t,["instances[0]","prompt"],n);const a=getValueByPath(e,["image"]);void 0!==t&&null!=a&&setValueByPath(t,["instances[0]","image"],imageToVertex(a));const o=getValueByPath(e,["video"]);return void 0!==t&&null!=o&&setValueByPath(t,["instances[0]","video"],videoToVertex(o)),{}}function generatedImageFromMldev(e){const t={},n=getValueByPath(e,["_self"]);null!=n&&setValueByPath(t,["image"],imageFromMldev(n));const a=getValueByPath(e,["raiFilteredReason"]);null!=a&&setValueByPath(t,["raiFilteredReason"],a);const o=getValueByPath(e,["_self"]);return null!=o&&setValueByPath(t,["safetyAttributes"],safetyAttributesFromMldev(o)),t}function generatedImageFromVertex(e){const t={},n=getValueByPath(e,["_self"]);null!=n&&setValueByPath(t,["image"],imageFromVertex(n));const a=getValueByPath(e,["raiFilteredReason"]);null!=a&&setValueByPath(t,["raiFilteredReason"],a);const o=getValueByPath(e,["_self"]);null!=o&&setValueByPath(t,["safetyAttributes"],safetyAttributesFromVertex(o));const l=getValueByPath(e,["prompt"]);return null!=l&&setValueByPath(t,["enhancedPrompt"],l),t}function generatedImageMaskFromVertex(e){const t={},n=getValueByPath(e,["_self"]);null!=n&&setValueByPath(t,["mask"],imageFromVertex(n));const a=getValueByPath(e,["labels"]);if(null!=a){let e=a;Array.isArray(e)&&(e=e.map((e=>e))),setValueByPath(t,["labels"],e)}return t}function generatedVideoFromMldev(e){const t={},n=getValueByPath(e,["video"]);return null!=n&&setValueByPath(t,["video"],videoFromMldev(n)),t}function generatedVideoFromVertex(e){const t={},n=getValueByPath(e,["_self"]);return null!=n&&setValueByPath(t,["video"],videoFromVertex(n)),t}function generationConfigToVertex(e){const t={},n=getValueByPath(e,["modelSelectionConfig"]);null!=n&&setValueByPath(t,["modelConfig"],n);const a=getValueByPath(e,["responseJsonSchema"]);null!=a&&setValueByPath(t,["responseJsonSchema"],a);const o=getValueByPath(e,["audioTimestamp"]);null!=o&&setValueByPath(t,["audioTimestamp"],o);const l=getValueByPath(e,["candidateCount"]);null!=l&&setValueByPath(t,["candidateCount"],l);const s=getValueByPath(e,["enableAffectiveDialog"]);null!=s&&setValueByPath(t,["enableAffectiveDialog"],s);const i=getValueByPath(e,["frequencyPenalty"]);null!=i&&setValueByPath(t,["frequencyPenalty"],i);const r=getValueByPath(e,["logprobs"]);null!=r&&setValueByPath(t,["logprobs"],r);const u=getValueByPath(e,["maxOutputTokens"]);null!=u&&setValueByPath(t,["maxOutputTokens"],u);const c=getValueByPath(e,["mediaResolution"]);null!=c&&setValueByPath(t,["mediaResolution"],c);const h=getValueByPath(e,["presencePenalty"]);null!=h&&setValueByPath(t,["presencePenalty"],h);const d=getValueByPath(e,["responseLogprobs"]);null!=d&&setValueByPath(t,["responseLogprobs"],d);const p=getValueByPath(e,["responseMimeType"]);null!=p&&setValueByPath(t,["responseMimeType"],p);const y=getValueByPath(e,["responseModalities"]);null!=y&&setValueByPath(t,["responseModalities"],y);const g=getValueByPath(e,["responseSchema"]);null!=g&&setValueByPath(t,["responseSchema"],g);const P=getValueByPath(e,["routingConfig"]);null!=P&&setValueByPath(t,["routingConfig"],P);const V=getValueByPath(e,["seed"]);null!=V&&setValueByPath(t,["seed"],V);const m=getValueByPath(e,["speechConfig"]);null!=m&&setValueByPath(t,["speechConfig"],speechConfigToVertex(m));const B=getValueByPath(e,["stopSequences"]);null!=B&&setValueByPath(t,["stopSequences"],B);const f=getValueByPath(e,["temperature"]);null!=f&&setValueByPath(t,["temperature"],f);const v=getValueByPath(e,["thinkingConfig"]);null!=v&&setValueByPath(t,["thinkingConfig"],v);const T=getValueByPath(e,["topK"]);null!=T&&setValueByPath(t,["topK"],T);const C=getValueByPath(e,["topP"]);if(null!=C&&setValueByPath(t,["topP"],C),void 0!==getValueByPath(e,["enableEnhancedCivicAnswers"]))throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function getModelParametersToMldev(e,t){const n={},a=getValueByPath(t,["model"]);return null!=a&&setValueByPath(n,["_url","name"],tModel(e,a)),n}function getModelParametersToVertex(e,t){const n={},a=getValueByPath(t,["model"]);return null!=a&&setValueByPath(n,["_url","name"],tModel(e,a)),n}function googleMapsToMldev$1(e){const t={};if(void 0!==getValueByPath(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=getValueByPath(e,["enableWidget"]);return null!=n&&setValueByPath(t,["enableWidget"],n),t}function googleSearchToMldev$1(e){const t={};if(void 0!==getValueByPath(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==getValueByPath(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=getValueByPath(e,["timeRangeFilter"]);return null!=n&&setValueByPath(t,["timeRangeFilter"],n),t}function imageConfigToMldev(e){const t={},n=getValueByPath(e,["aspectRatio"]);null!=n&&setValueByPath(t,["aspectRatio"],n);const a=getValueByPath(e,["imageSize"]);if(null!=a&&setValueByPath(t,["imageSize"],a),void 0!==getValueByPath(e,["outputMimeType"]))throw new Error("outputMimeType parameter is not supported in Gemini API.");if(void 0!==getValueByPath(e,["outputCompressionQuality"]))throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function imageConfigToVertex(e){const t={},n=getValueByPath(e,["aspectRatio"]);null!=n&&setValueByPath(t,["aspectRatio"],n);const a=getValueByPath(e,["imageSize"]);null!=a&&setValueByPath(t,["imageSize"],a);const o=getValueByPath(e,["outputMimeType"]);null!=o&&setValueByPath(t,["imageOutputOptions","mimeType"],o);const l=getValueByPath(e,["outputCompressionQuality"]);return null!=l&&setValueByPath(t,["imageOutputOptions","compressionQuality"],l),t}function imageFromMldev(e){const t={},n=getValueByPath(e,["bytesBase64Encoded"]);null!=n&&setValueByPath(t,["imageBytes"],tBytes(n));const a=getValueByPath(e,["mimeType"]);return null!=a&&setValueByPath(t,["mimeType"],a),t}function imageFromVertex(e){const t={},n=getValueByPath(e,["gcsUri"]);null!=n&&setValueByPath(t,["gcsUri"],n);const a=getValueByPath(e,["bytesBase64Encoded"]);null!=a&&setValueByPath(t,["imageBytes"],tBytes(a));const o=getValueByPath(e,["mimeType"]);return null!=o&&setValueByPath(t,["mimeType"],o),t}function imageToMldev(e){const t={};if(void 0!==getValueByPath(e,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");const n=getValueByPath(e,["imageBytes"]);null!=n&&setValueByPath(t,["bytesBase64Encoded"],tBytes(n));const a=getValueByPath(e,["mimeType"]);return null!=a&&setValueByPath(t,["mimeType"],a),t}function imageToVertex(e){const t={},n=getValueByPath(e,["gcsUri"]);null!=n&&setValueByPath(t,["gcsUri"],n);const a=getValueByPath(e,["imageBytes"]);null!=a&&setValueByPath(t,["bytesBase64Encoded"],tBytes(a));const o=getValueByPath(e,["mimeType"]);return null!=o&&setValueByPath(t,["mimeType"],o),t}function listModelsConfigToMldev(e,t,n){const a=getValueByPath(t,["pageSize"]);void 0!==n&&null!=a&&setValueByPath(n,["_query","pageSize"],a);const o=getValueByPath(t,["pageToken"]);void 0!==n&&null!=o&&setValueByPath(n,["_query","pageToken"],o);const l=getValueByPath(t,["filter"]);void 0!==n&&null!=l&&setValueByPath(n,["_query","filter"],l);const s=getValueByPath(t,["queryBase"]);return void 0!==n&&null!=s&&setValueByPath(n,["_url","models_url"],tModelsUrl(e,s)),{}}function listModelsConfigToVertex(e,t,n){const a=getValueByPath(t,["pageSize"]);void 0!==n&&null!=a&&setValueByPath(n,["_query","pageSize"],a);const o=getValueByPath(t,["pageToken"]);void 0!==n&&null!=o&&setValueByPath(n,["_query","pageToken"],o);const l=getValueByPath(t,["filter"]);void 0!==n&&null!=l&&setValueByPath(n,["_query","filter"],l);const s=getValueByPath(t,["queryBase"]);return void 0!==n&&null!=s&&setValueByPath(n,["_url","models_url"],tModelsUrl(e,s)),{}}function listModelsParametersToMldev(e,t){const n={},a=getValueByPath(t,["config"]);return null!=a&&listModelsConfigToMldev(e,a,n),n}function listModelsParametersToVertex(e,t){const n={},a=getValueByPath(t,["config"]);return null!=a&&listModelsConfigToVertex(e,a,n),n}function listModelsResponseFromMldev(e){const t={},n=getValueByPath(e,["sdkHttpResponse"]);null!=n&&setValueByPath(t,["sdkHttpResponse"],n);const a=getValueByPath(e,["nextPageToken"]);null!=a&&setValueByPath(t,["nextPageToken"],a);const o=getValueByPath(e,["_self"]);if(null!=o){let e=tExtractModels(o);Array.isArray(e)&&(e=e.map((e=>modelFromMldev(e)))),setValueByPath(t,["models"],e)}return t}function listModelsResponseFromVertex(e){const t={},n=getValueByPath(e,["sdkHttpResponse"]);null!=n&&setValueByPath(t,["sdkHttpResponse"],n);const a=getValueByPath(e,["nextPageToken"]);null!=a&&setValueByPath(t,["nextPageToken"],a);const o=getValueByPath(e,["_self"]);if(null!=o){let e=tExtractModels(o);Array.isArray(e)&&(e=e.map((e=>modelFromVertex(e)))),setValueByPath(t,["models"],e)}return t}function maskReferenceConfigToVertex(e){const t={},n=getValueByPath(e,["maskMode"]);null!=n&&setValueByPath(t,["maskMode"],n);const a=getValueByPath(e,["segmentationClasses"]);null!=a&&setValueByPath(t,["maskClasses"],a);const o=getValueByPath(e,["maskDilation"]);return null!=o&&setValueByPath(t,["dilation"],o),t}function modelFromMldev(e){const t={},n=getValueByPath(e,["name"]);null!=n&&setValueByPath(t,["name"],n);const a=getValueByPath(e,["displayName"]);null!=a&&setValueByPath(t,["displayName"],a);const o=getValueByPath(e,["description"]);null!=o&&setValueByPath(t,["description"],o);const l=getValueByPath(e,["version"]);null!=l&&setValueByPath(t,["version"],l);const s=getValueByPath(e,["_self"]);null!=s&&setValueByPath(t,["tunedModelInfo"],tunedModelInfoFromMldev(s));const i=getValueByPath(e,["inputTokenLimit"]);null!=i&&setValueByPath(t,["inputTokenLimit"],i);const r=getValueByPath(e,["outputTokenLimit"]);null!=r&&setValueByPath(t,["outputTokenLimit"],r);const u=getValueByPath(e,["supportedGenerationMethods"]);null!=u&&setValueByPath(t,["supportedActions"],u);const c=getValueByPath(e,["temperature"]);null!=c&&setValueByPath(t,["temperature"],c);const h=getValueByPath(e,["maxTemperature"]);null!=h&&setValueByPath(t,["maxTemperature"],h);const d=getValueByPath(e,["topP"]);null!=d&&setValueByPath(t,["topP"],d);const p=getValueByPath(e,["topK"]);null!=p&&setValueByPath(t,["topK"],p);const y=getValueByPath(e,["thinking"]);return null!=y&&setValueByPath(t,["thinking"],y),t}function modelFromVertex(e){const t={},n=getValueByPath(e,["name"]);null!=n&&setValueByPath(t,["name"],n);const a=getValueByPath(e,["displayName"]);null!=a&&setValueByPath(t,["displayName"],a);const o=getValueByPath(e,["description"]);null!=o&&setValueByPath(t,["description"],o);const l=getValueByPath(e,["versionId"]);null!=l&&setValueByPath(t,["version"],l);const s=getValueByPath(e,["deployedModels"]);if(null!=s){let e=s;Array.isArray(e)&&(e=e.map((e=>endpointFromVertex(e)))),setValueByPath(t,["endpoints"],e)}const i=getValueByPath(e,["labels"]);null!=i&&setValueByPath(t,["labels"],i);const r=getValueByPath(e,["_self"]);null!=r&&setValueByPath(t,["tunedModelInfo"],tunedModelInfoFromVertex(r));const u=getValueByPath(e,["defaultCheckpointId"]);null!=u&&setValueByPath(t,["defaultCheckpointId"],u);const c=getValueByPath(e,["checkpoints"]);if(null!=c){let e=c;Array.isArray(e)&&(e=e.map((e=>e))),setValueByPath(t,["checkpoints"],e)}return t}function partToMldev$1(e){const t={},n=getValueByPath(e,["mediaResolution"]);null!=n&&setValueByPath(t,["mediaResolution"],n);const a=getValueByPath(e,["codeExecutionResult"]);null!=a&&setValueByPath(t,["codeExecutionResult"],a);const o=getValueByPath(e,["executableCode"]);null!=o&&setValueByPath(t,["executableCode"],o);const l=getValueByPath(e,["fileData"]);null!=l&&setValueByPath(t,["fileData"],fileDataToMldev$1(l));const s=getValueByPath(e,["functionCall"]);null!=s&&setValueByPath(t,["functionCall"],functionCallToMldev$1(s));const i=getValueByPath(e,["functionResponse"]);null!=i&&setValueByPath(t,["functionResponse"],i);const r=getValueByPath(e,["inlineData"]);null!=r&&setValueByPath(t,["inlineData"],blobToMldev$1(r));const u=getValueByPath(e,["text"]);null!=u&&setValueByPath(t,["text"],u);const c=getValueByPath(e,["thought"]);null!=c&&setValueByPath(t,["thought"],c);const h=getValueByPath(e,["thoughtSignature"]);null!=h&&setValueByPath(t,["thoughtSignature"],h);const d=getValueByPath(e,["videoMetadata"]);return null!=d&&setValueByPath(t,["videoMetadata"],d),t}function productImageToVertex(e){const t={},n=getValueByPath(e,["productImage"]);return null!=n&&setValueByPath(t,["image"],imageToVertex(n)),t}function recontextImageConfigToVertex(e,t){const n=getValueByPath(e,["numberOfImages"]);void 0!==t&&null!=n&&setValueByPath(t,["parameters","sampleCount"],n);const a=getValueByPath(e,["baseSteps"]);void 0!==t&&null!=a&&setValueByPath(t,["parameters","baseSteps"],a);const o=getValueByPath(e,["outputGcsUri"]);void 0!==t&&null!=o&&setValueByPath(t,["parameters","storageUri"],o);const l=getValueByPath(e,["seed"]);void 0!==t&&null!=l&&setValueByPath(t,["parameters","seed"],l);const s=getValueByPath(e,["safetyFilterLevel"]);void 0!==t&&null!=s&&setValueByPath(t,["parameters","safetySetting"],s);const i=getValueByPath(e,["personGeneration"]);void 0!==t&&null!=i&&setValueByPath(t,["parameters","personGeneration"],i);const r=getValueByPath(e,["addWatermark"]);void 0!==t&&null!=r&&setValueByPath(t,["parameters","addWatermark"],r);const u=getValueByPath(e,["outputMimeType"]);void 0!==t&&null!=u&&setValueByPath(t,["parameters","outputOptions","mimeType"],u);const c=getValueByPath(e,["outputCompressionQuality"]);void 0!==t&&null!=c&&setValueByPath(t,["parameters","outputOptions","compressionQuality"],c);const h=getValueByPath(e,["enhancePrompt"]);void 0!==t&&null!=h&&setValueByPath(t,["parameters","enhancePrompt"],h);const d=getValueByPath(e,["labels"]);return void 0!==t&&null!=d&&setValueByPath(t,["labels"],d),{}}function recontextImageParametersToVertex(e,t){const n={},a=getValueByPath(t,["model"]);null!=a&&setValueByPath(n,["_url","model"],tModel(e,a));const o=getValueByPath(t,["source"]);null!=o&&recontextImageSourceToVertex(o,n);const l=getValueByPath(t,["config"]);return null!=l&&recontextImageConfigToVertex(l,n),n}function recontextImageResponseFromVertex(e){const t={},n=getValueByPath(e,["predictions"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>generatedImageFromVertex(e)))),setValueByPath(t,["generatedImages"],e)}return t}function recontextImageSourceToVertex(e,t){const n=getValueByPath(e,["prompt"]);void 0!==t&&null!=n&&setValueByPath(t,["instances[0]","prompt"],n);const a=getValueByPath(e,["personImage"]);void 0!==t&&null!=a&&setValueByPath(t,["instances[0]","personImage","image"],imageToVertex(a));const o=getValueByPath(e,["productImages"]);if(void 0!==t&&null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>productImageToVertex(e)))),setValueByPath(t,["instances[0]","productImages"],e)}return{}}function referenceImageAPIInternalToVertex(e){const t={},n=getValueByPath(e,["referenceImage"]);null!=n&&setValueByPath(t,["referenceImage"],imageToVertex(n));const a=getValueByPath(e,["referenceId"]);null!=a&&setValueByPath(t,["referenceId"],a);const o=getValueByPath(e,["referenceType"]);null!=o&&setValueByPath(t,["referenceType"],o);const l=getValueByPath(e,["maskImageConfig"]);null!=l&&setValueByPath(t,["maskImageConfig"],maskReferenceConfigToVertex(l));const s=getValueByPath(e,["controlImageConfig"]);null!=s&&setValueByPath(t,["controlImageConfig"],controlReferenceConfigToVertex(s));const i=getValueByPath(e,["styleImageConfig"]);null!=i&&setValueByPath(t,["styleImageConfig"],i);const r=getValueByPath(e,["subjectImageConfig"]);return null!=r&&setValueByPath(t,["subjectImageConfig"],r),t}function safetyAttributesFromMldev(e){const t={},n=getValueByPath(e,["safetyAttributes","categories"]);null!=n&&setValueByPath(t,["categories"],n);const a=getValueByPath(e,["safetyAttributes","scores"]);null!=a&&setValueByPath(t,["scores"],a);const o=getValueByPath(e,["contentType"]);return null!=o&&setValueByPath(t,["contentType"],o),t}function safetyAttributesFromVertex(e){const t={},n=getValueByPath(e,["safetyAttributes","categories"]);null!=n&&setValueByPath(t,["categories"],n);const a=getValueByPath(e,["safetyAttributes","scores"]);null!=a&&setValueByPath(t,["scores"],a);const o=getValueByPath(e,["contentType"]);return null!=o&&setValueByPath(t,["contentType"],o),t}function safetySettingToMldev(e){const t={},n=getValueByPath(e,["category"]);if(null!=n&&setValueByPath(t,["category"],n),void 0!==getValueByPath(e,["method"]))throw new Error("method parameter is not supported in Gemini API.");const a=getValueByPath(e,["threshold"]);return null!=a&&setValueByPath(t,["threshold"],a),t}function scribbleImageToVertex(e){const t={},n=getValueByPath(e,["image"]);return null!=n&&setValueByPath(t,["image"],imageToVertex(n)),t}function segmentImageConfigToVertex(e,t){const n=getValueByPath(e,["mode"]);void 0!==t&&null!=n&&setValueByPath(t,["parameters","mode"],n);const a=getValueByPath(e,["maxPredictions"]);void 0!==t&&null!=a&&setValueByPath(t,["parameters","maxPredictions"],a);const o=getValueByPath(e,["confidenceThreshold"]);void 0!==t&&null!=o&&setValueByPath(t,["parameters","confidenceThreshold"],o);const l=getValueByPath(e,["maskDilation"]);void 0!==t&&null!=l&&setValueByPath(t,["parameters","maskDilation"],l);const s=getValueByPath(e,["binaryColorThreshold"]);void 0!==t&&null!=s&&setValueByPath(t,["parameters","binaryColorThreshold"],s);const i=getValueByPath(e,["labels"]);return void 0!==t&&null!=i&&setValueByPath(t,["labels"],i),{}}function segmentImageParametersToVertex(e,t){const n={},a=getValueByPath(t,["model"]);null!=a&&setValueByPath(n,["_url","model"],tModel(e,a));const o=getValueByPath(t,["source"]);null!=o&&segmentImageSourceToVertex(o,n);const l=getValueByPath(t,["config"]);return null!=l&&segmentImageConfigToVertex(l,n),n}function segmentImageResponseFromVertex(e){const t={},n=getValueByPath(e,["predictions"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>generatedImageMaskFromVertex(e)))),setValueByPath(t,["generatedMasks"],e)}return t}function segmentImageSourceToVertex(e,t){const n=getValueByPath(e,["prompt"]);void 0!==t&&null!=n&&setValueByPath(t,["instances[0]","prompt"],n);const a=getValueByPath(e,["image"]);void 0!==t&&null!=a&&setValueByPath(t,["instances[0]","image"],imageToVertex(a));const o=getValueByPath(e,["scribbleImage"]);return void 0!==t&&null!=o&&setValueByPath(t,["instances[0]","scribble"],scribbleImageToVertex(o)),{}}function speechConfigToVertex(e){const t={},n=getValueByPath(e,["languageCode"]);null!=n&&setValueByPath(t,["languageCode"],n);const a=getValueByPath(e,["voiceConfig"]);if(null!=a&&setValueByPath(t,["voiceConfig"],a),void 0!==getValueByPath(e,["multiSpeakerVoiceConfig"]))throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function toolConfigToMldev(e){const t={},n=getValueByPath(e,["functionCallingConfig"]);null!=n&&setValueByPath(t,["functionCallingConfig"],functionCallingConfigToMldev(n));const a=getValueByPath(e,["retrievalConfig"]);return null!=a&&setValueByPath(t,["retrievalConfig"],a),t}function toolToMldev$1(e){const t={},n=getValueByPath(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>e))),setValueByPath(t,["functionDeclarations"],e)}if(void 0!==getValueByPath(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const a=getValueByPath(e,["googleSearchRetrieval"]);null!=a&&setValueByPath(t,["googleSearchRetrieval"],a);const o=getValueByPath(e,["computerUse"]);null!=o&&setValueByPath(t,["computerUse"],o);const l=getValueByPath(e,["fileSearch"]);null!=l&&setValueByPath(t,["fileSearch"],l);const s=getValueByPath(e,["codeExecution"]);if(null!=s&&setValueByPath(t,["codeExecution"],s),void 0!==getValueByPath(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=getValueByPath(e,["googleMaps"]);null!=i&&setValueByPath(t,["googleMaps"],googleMapsToMldev$1(i));const r=getValueByPath(e,["googleSearch"]);null!=r&&setValueByPath(t,["googleSearch"],googleSearchToMldev$1(r));const u=getValueByPath(e,["urlContext"]);return null!=u&&setValueByPath(t,["urlContext"],u),t}function toolToVertex(e){const t={},n=getValueByPath(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>functionDeclarationToVertex(e)))),setValueByPath(t,["functionDeclarations"],e)}const a=getValueByPath(e,["retrieval"]);null!=a&&setValueByPath(t,["retrieval"],a);const o=getValueByPath(e,["googleSearchRetrieval"]);null!=o&&setValueByPath(t,["googleSearchRetrieval"],o);const l=getValueByPath(e,["computerUse"]);if(null!=l&&setValueByPath(t,["computerUse"],l),void 0!==getValueByPath(e,["fileSearch"]))throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=getValueByPath(e,["codeExecution"]);null!=s&&setValueByPath(t,["codeExecution"],s);const i=getValueByPath(e,["enterpriseWebSearch"]);null!=i&&setValueByPath(t,["enterpriseWebSearch"],i);const r=getValueByPath(e,["googleMaps"]);null!=r&&setValueByPath(t,["googleMaps"],r);const u=getValueByPath(e,["googleSearch"]);null!=u&&setValueByPath(t,["googleSearch"],u);const c=getValueByPath(e,["urlContext"]);return null!=c&&setValueByPath(t,["urlContext"],c),t}function tunedModelInfoFromMldev(e){const t={},n=getValueByPath(e,["baseModel"]);null!=n&&setValueByPath(t,["baseModel"],n);const a=getValueByPath(e,["createTime"]);null!=a&&setValueByPath(t,["createTime"],a);const o=getValueByPath(e,["updateTime"]);return null!=o&&setValueByPath(t,["updateTime"],o),t}function tunedModelInfoFromVertex(e){const t={},n=getValueByPath(e,["labels","google-vertex-llm-tuning-base-model-id"]);null!=n&&setValueByPath(t,["baseModel"],n);const a=getValueByPath(e,["createTime"]);null!=a&&setValueByPath(t,["createTime"],a);const o=getValueByPath(e,["updateTime"]);return null!=o&&setValueByPath(t,["updateTime"],o),t}function updateModelConfigToMldev(e,t){const n=getValueByPath(e,["displayName"]);void 0!==t&&null!=n&&setValueByPath(t,["displayName"],n);const a=getValueByPath(e,["description"]);void 0!==t&&null!=a&&setValueByPath(t,["description"],a);const o=getValueByPath(e,["defaultCheckpointId"]);return void 0!==t&&null!=o&&setValueByPath(t,["defaultCheckpointId"],o),{}}function updateModelConfigToVertex(e,t){const n=getValueByPath(e,["displayName"]);void 0!==t&&null!=n&&setValueByPath(t,["displayName"],n);const a=getValueByPath(e,["description"]);void 0!==t&&null!=a&&setValueByPath(t,["description"],a);const o=getValueByPath(e,["defaultCheckpointId"]);return void 0!==t&&null!=o&&setValueByPath(t,["defaultCheckpointId"],o),{}}function updateModelParametersToMldev(e,t){const n={},a=getValueByPath(t,["model"]);null!=a&&setValueByPath(n,["_url","name"],tModel(e,a));const o=getValueByPath(t,["config"]);return null!=o&&updateModelConfigToMldev(o,n),n}function updateModelParametersToVertex(e,t){const n={},a=getValueByPath(t,["model"]);null!=a&&setValueByPath(n,["_url","model"],tModel(e,a));const o=getValueByPath(t,["config"]);return null!=o&&updateModelConfigToVertex(o,n),n}function upscaleImageAPIConfigInternalToVertex(e,t){const n=getValueByPath(e,["outputGcsUri"]);void 0!==t&&null!=n&&setValueByPath(t,["parameters","storageUri"],n);const a=getValueByPath(e,["safetyFilterLevel"]);void 0!==t&&null!=a&&setValueByPath(t,["parameters","safetySetting"],a);const o=getValueByPath(e,["personGeneration"]);void 0!==t&&null!=o&&setValueByPath(t,["parameters","personGeneration"],o);const l=getValueByPath(e,["includeRaiReason"]);void 0!==t&&null!=l&&setValueByPath(t,["parameters","includeRaiReason"],l);const s=getValueByPath(e,["outputMimeType"]);void 0!==t&&null!=s&&setValueByPath(t,["parameters","outputOptions","mimeType"],s);const i=getValueByPath(e,["outputCompressionQuality"]);void 0!==t&&null!=i&&setValueByPath(t,["parameters","outputOptions","compressionQuality"],i);const r=getValueByPath(e,["enhanceInputImage"]);void 0!==t&&null!=r&&setValueByPath(t,["parameters","upscaleConfig","enhanceInputImage"],r);const u=getValueByPath(e,["imagePreservationFactor"]);void 0!==t&&null!=u&&setValueByPath(t,["parameters","upscaleConfig","imagePreservationFactor"],u);const c=getValueByPath(e,["labels"]);void 0!==t&&null!=c&&setValueByPath(t,["labels"],c);const h=getValueByPath(e,["numberOfImages"]);void 0!==t&&null!=h&&setValueByPath(t,["parameters","sampleCount"],h);const d=getValueByPath(e,["mode"]);return void 0!==t&&null!=d&&setValueByPath(t,["parameters","mode"],d),{}}function upscaleImageAPIParametersInternalToVertex(e,t){const n={},a=getValueByPath(t,["model"]);null!=a&&setValueByPath(n,["_url","model"],tModel(e,a));const o=getValueByPath(t,["image"]);null!=o&&setValueByPath(n,["instances[0]","image"],imageToVertex(o));const l=getValueByPath(t,["upscaleFactor"]);null!=l&&setValueByPath(n,["parameters","upscaleConfig","upscaleFactor"],l);const s=getValueByPath(t,["config"]);return null!=s&&upscaleImageAPIConfigInternalToVertex(s,n),n}function upscaleImageResponseFromVertex(e){const t={},n=getValueByPath(e,["sdkHttpResponse"]);null!=n&&setValueByPath(t,["sdkHttpResponse"],n);const a=getValueByPath(e,["predictions"]);if(null!=a){let e=a;Array.isArray(e)&&(e=e.map((e=>generatedImageFromVertex(e)))),setValueByPath(t,["generatedImages"],e)}return t}function videoFromMldev(e){const t={},n=getValueByPath(e,["uri"]);null!=n&&setValueByPath(t,["uri"],n);const a=getValueByPath(e,["encodedVideo"]);null!=a&&setValueByPath(t,["videoBytes"],tBytes(a));const o=getValueByPath(e,["encoding"]);return null!=o&&setValueByPath(t,["mimeType"],o),t}function videoFromVertex(e){const t={},n=getValueByPath(e,["gcsUri"]);null!=n&&setValueByPath(t,["uri"],n);const a=getValueByPath(e,["bytesBase64Encoded"]);null!=a&&setValueByPath(t,["videoBytes"],tBytes(a));const o=getValueByPath(e,["mimeType"]);return null!=o&&setValueByPath(t,["mimeType"],o),t}function videoGenerationMaskToVertex(e){const t={},n=getValueByPath(e,["image"]);null!=n&&setValueByPath(t,["_self"],imageToVertex(n));const a=getValueByPath(e,["maskMode"]);return null!=a&&setValueByPath(t,["maskMode"],a),t}function videoGenerationReferenceImageToMldev(e){const t={},n=getValueByPath(e,["image"]);null!=n&&setValueByPath(t,["image"],imageToMldev(n));const a=getValueByPath(e,["referenceType"]);return null!=a&&setValueByPath(t,["referenceType"],a),t}function videoGenerationReferenceImageToVertex(e){const t={},n=getValueByPath(e,["image"]);null!=n&&setValueByPath(t,["image"],imageToVertex(n));const a=getValueByPath(e,["referenceType"]);return null!=a&&setValueByPath(t,["referenceType"],a),t}function videoToMldev(e){const t={},n=getValueByPath(e,["uri"]);null!=n&&setValueByPath(t,["uri"],n);const a=getValueByPath(e,["videoBytes"]);null!=a&&setValueByPath(t,["encodedVideo"],tBytes(a));const o=getValueByPath(e,["mimeType"]);return null!=o&&setValueByPath(t,["encoding"],o),t}function videoToVertex(e){const t={},n=getValueByPath(e,["uri"]);null!=n&&setValueByPath(t,["gcsUri"],n);const a=getValueByPath(e,["videoBytes"]);null!=a&&setValueByPath(t,["bytesBase64Encoded"],tBytes(a));const o=getValueByPath(e,["mimeType"]);return null!=o&&setValueByPath(t,["mimeType"],o),t}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function createFileSearchStoreConfigToMldev(e,t){const n=getValueByPath(e,["displayName"]);return void 0!==t&&null!=n&&setValueByPath(t,["displayName"],n),{}}function createFileSearchStoreParametersToMldev(e){const t={},n=getValueByPath(e,["config"]);return null!=n&&createFileSearchStoreConfigToMldev(n,t),t}function deleteFileSearchStoreConfigToMldev(e,t){const n=getValueByPath(e,["force"]);return void 0!==t&&null!=n&&setValueByPath(t,["_query","force"],n),{}}function deleteFileSearchStoreParametersToMldev(e){const t={},n=getValueByPath(e,["name"]);null!=n&&setValueByPath(t,["_url","name"],n);const a=getValueByPath(e,["config"]);return null!=a&&deleteFileSearchStoreConfigToMldev(a,t),t}function getFileSearchStoreParametersToMldev(e){const t={},n=getValueByPath(e,["name"]);return null!=n&&setValueByPath(t,["_url","name"],n),t}function importFileConfigToMldev(e,t){const n=getValueByPath(e,["customMetadata"]);if(void 0!==t&&null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>e))),setValueByPath(t,["customMetadata"],e)}const a=getValueByPath(e,["chunkingConfig"]);return void 0!==t&&null!=a&&setValueByPath(t,["chunkingConfig"],a),{}}function importFileOperationFromMldev(e){const t={},n=getValueByPath(e,["name"]);null!=n&&setValueByPath(t,["name"],n);const a=getValueByPath(e,["metadata"]);null!=a&&setValueByPath(t,["metadata"],a);const o=getValueByPath(e,["done"]);null!=o&&setValueByPath(t,["done"],o);const l=getValueByPath(e,["error"]);null!=l&&setValueByPath(t,["error"],l);const s=getValueByPath(e,["response"]);return null!=s&&setValueByPath(t,["response"],importFileResponseFromMldev(s)),t}function importFileParametersToMldev(e){const t={},n=getValueByPath(e,["fileSearchStoreName"]);null!=n&&setValueByPath(t,["_url","file_search_store_name"],n);const a=getValueByPath(e,["fileName"]);null!=a&&setValueByPath(t,["fileName"],a);const o=getValueByPath(e,["config"]);return null!=o&&importFileConfigToMldev(o,t),t}function importFileResponseFromMldev(e){const t={},n=getValueByPath(e,["sdkHttpResponse"]);null!=n&&setValueByPath(t,["sdkHttpResponse"],n);const a=getValueByPath(e,["parent"]);null!=a&&setValueByPath(t,["parent"],a);const o=getValueByPath(e,["documentName"]);return null!=o&&setValueByPath(t,["documentName"],o),t}function listFileSearchStoresConfigToMldev(e,t){const n=getValueByPath(e,["pageSize"]);void 0!==t&&null!=n&&setValueByPath(t,["_query","pageSize"],n);const a=getValueByPath(e,["pageToken"]);return void 0!==t&&null!=a&&setValueByPath(t,["_query","pageToken"],a),{}}function listFileSearchStoresParametersToMldev(e){const t={},n=getValueByPath(e,["config"]);return null!=n&&listFileSearchStoresConfigToMldev(n,t),t}function listFileSearchStoresResponseFromMldev(e){const t={},n=getValueByPath(e,["sdkHttpResponse"]);null!=n&&setValueByPath(t,["sdkHttpResponse"],n);const a=getValueByPath(e,["nextPageToken"]);null!=a&&setValueByPath(t,["nextPageToken"],a);const o=getValueByPath(e,["fileSearchStores"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>e))),setValueByPath(t,["fileSearchStores"],e)}return t}function uploadToFileSearchStoreConfigToMldev(e,t){const n=getValueByPath(e,["mimeType"]);void 0!==t&&null!=n&&setValueByPath(t,["mimeType"],n);const a=getValueByPath(e,["displayName"]);void 0!==t&&null!=a&&setValueByPath(t,["displayName"],a);const o=getValueByPath(e,["customMetadata"]);if(void 0!==t&&null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>e))),setValueByPath(t,["customMetadata"],e)}const l=getValueByPath(e,["chunkingConfig"]);return void 0!==t&&null!=l&&setValueByPath(t,["chunkingConfig"],l),{}}function uploadToFileSearchStoreParametersToMldev(e){const t={},n=getValueByPath(e,["fileSearchStoreName"]);null!=n&&setValueByPath(t,["_url","file_search_store_name"],n);const a=getValueByPath(e,["config"]);return null!=a&&uploadToFileSearchStoreConfigToMldev(a,t),t}function uploadToFileSearchStoreResumableResponseFromMldev(e){const t={},n=getValueByPath(e,["sdkHttpResponse"]);return null!=n&&setValueByPath(t,["sdkHttpResponse"],n),t}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CONTENT_TYPE_HEADER="Content-Type",SERVER_TIMEOUT_HEADER="X-Server-Timeout",USER_AGENT_HEADER="User-Agent",GOOGLE_API_CLIENT_HEADER="x-goog-api-client",SDK_VERSION="1.31.0",LIBRARY_LABEL="google-genai-sdk/1.31.0",VERTEX_AI_API_DEFAULT_VERSION="v1beta1",GOOGLE_AI_API_DEFAULT_VERSION="v1beta",responseLineRE=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class ApiClient{constructor(e){var t,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=null!==(t=this.clientOptions.apiVersion)&&void 0!==t?t:"v1beta1",a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=null!==(n=this.clientOptions.apiVersion)&&void 0!==n?n:"v1beta",a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&"global"!==this.clientOptions.location?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:(this.clientOptions.project=void 0,this.clientOptions.location=void 0)}isVertexAI(){var e;return null!==(e=this.clientOptions.vertexai)&&void 0!==e&&e}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.apiVersion)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.baseUrl)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.headers)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||void 0===e.baseUrl||void 0===e.apiVersion)throw new Error("HTTP options are not correctly set.");const t=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&""!==e.apiVersion&&t.push(e.apiVersion),t.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol="http:"==t.protocol?"ws":"wss",t.toString()}setBaseUrl(e){if(!this.clientOptions.httpOptions)throw new Error("HTTP options are not correctly set.");this.clientOptions.httpOptions.baseUrl=e}constructUrl(e,t,n){const a=[this.getRequestUrlInternal(t)];n&&a.push(this.getBaseResourcePath()),""!==e&&a.push(e);return new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!this.clientOptions.apiKey&&(!!this.clientOptions.vertexai&&(!e.path.startsWith("projects/")&&("GET"!==e.httpMethod||!e.path.startsWith("publishers/google/models"))))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,t,n);if(e.queryParams)for(const[t,n]of Object.entries(e.queryParams))a.searchParams.append(t,String(n));let o={};if("GET"===e.httpMethod){if(e.body&&"{}"!==e.body)throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,t,a.toString(),e.abortSignal),this.unaryApiCall(a,o,e.httpMethod)}patchHttpOptions(e,t){const n=JSON.parse(JSON.stringify(e));for(const[e,a]of Object.entries(t))"object"==typeof a?n[e]=Object.assign(Object.assign({},n[e]),a):void 0!==a&&(n[e]=a);return n}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,t,n);a.searchParams.has("alt")&&"sse"===a.searchParams.get("alt")||a.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,t,a.toString(),e.abortSignal),this.streamApiCall(a,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,n,a){if(t&&t.timeout||a){const n=new AbortController,o=n.signal;if(t.timeout&&(null==t?void 0:t.timeout)>0){const e=setTimeout((()=>n.abort()),t.timeout);e&&"function"==typeof e.unref&&e.unref()}a&&a.addEventListener("abort",(()=>{n.abort()})),e.signal=o}return t&&null!==t.extraBody&&includeExtraBodyToRequestInit(e,t.extraBody),e.headers=await this.getHeadersInternal(t,n),e}async unaryApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then((async e=>(await throwErrorIfNotOK(e),new HttpResponse(e)))).catch((e=>{throw e instanceof Error?e:new Error(JSON.stringify(e))}))}async streamApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then((async e=>(await throwErrorIfNotOK(e),this.processStreamResponse(e)))).catch((e=>{throw e instanceof Error?e:new Error(JSON.stringify(e))}))}processStreamResponse(e){var t;return __asyncGenerator(this,arguments,(function*(){const n=null===(t=null==e?void 0:e.body)||void 0===t?void 0:t.getReader(),a=new TextDecoder("utf-8");if(!n)throw new Error("Response body is empty");try{let t="";for(;;){const{done:o,value:l}=yield __await(n.read());if(o){if(t.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const s=a.decode(l,{stream:!0});try{const e=JSON.parse(s);if("error"in e){const t=JSON.parse(JSON.stringify(e.error)),n=t.status,a=t.code,o=`got status: ${n}. ${JSON.stringify(e)}`;if(a>=400&&a<600){throw new ApiError({message:o,status:a})}}}catch(e){if("ApiError"===e.name)throw e}t+=s;let i=t.match(responseLineRE);for(;i;){const n=i[1];try{const a=new Response(n,{headers:null==e?void 0:e.headers,status:null==e?void 0:e.status,statusText:null==e?void 0:e.statusText});yield yield __await(new HttpResponse(a)),t=t.slice(i[0].length),i=t.match(responseLineRE)}catch(e){throw new Error(`exception parsing stream chunk ${n}. ${e}`)}}}}finally{n.releaseLock()}}))}async apiCall(e,t){return fetch(e,t).catch((e=>{throw new Error(`exception ${e} sending request`)}))}getDefaultHeaders(){const e={},t=LIBRARY_LABEL+" "+this.clientOptions.userAgentExtra;return e["User-Agent"]=t,e["x-goog-api-client"]=t,e["Content-Type"]="application/json",e}async getHeadersInternal(e,t){const n=new Headers;if(e&&e.headers){for(const[t,a]of Object.entries(e.headers))n.append(t,a);e.timeout&&e.timeout>0&&n.append("X-Server-Timeout",String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n,t),n}getFileName(e){var t;let n="";return"string"==typeof e&&(n=e.replace(/[/\\]+$/,""),n=null!==(t=n.split(/[/\\]/).pop())&&void 0!==t?t:""),n}async uploadFile(e,t){var n;const a={};null!=t&&(a.mimeType=t.mimeType,a.name=t.name,a.displayName=t.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const o=this.clientOptions.uploader,l=await o.stat(e);a.sizeBytes=String(l.size);const s=null!==(n=null==t?void 0:t.mimeType)&&void 0!==n?n:l.type;if(void 0===s||""===s)throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=s;const i={file:a},r=this.getFileName(e),u=formatMap("upload/v1beta/files",i._url),c=await this.fetchUploadUrl(u,a.sizeBytes,a.mimeType,r,i,null==t?void 0:t.httpOptions);return o.upload(e,c,this)}async uploadFileToFileSearchStore(e,t,n){var a;const o=this.clientOptions.uploader,l=await o.stat(t),s=String(l.size),i=null!==(a=null==n?void 0:n.mimeType)&&void 0!==a?a:l.type;if(void 0===i||""===i)throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const r=`upload/v1beta/${e}:uploadToFileSearchStore`,u=this.getFileName(t),c={};null!=n&&uploadToFileSearchStoreConfigToMldev(n,c);const h=await this.fetchUploadUrl(r,s,i,u,c,null==n?void 0:n.httpOptions);return o.uploadToFileSearchStore(t,h,this)}async downloadFile(e){const t=this.clientOptions.downloader;await t.download(e,this)}async fetchUploadUrl(e,t,n,a,o,l){var s;let i={};i=l||{apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${n}`},a?{"X-Goog-Upload-File-Name":a}:{})};const r=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:i});if(!r||!(null==r?void 0:r.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=null===(s=null==r?void 0:r.headers)||void 0===s?void 0:s["x-goog-upload-url"];if(void 0===u)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function throwErrorIfNotOK(e){var t;if(void 0===e)throw new Error("response is undefined");if(!e.ok){const n=e.status;let a;a=(null===(t=e.headers.get("content-type"))||void 0===t?void 0:t.includes("application/json"))?await e.json():{error:{message:await e.text(),code:e.status,status:e.statusText}};const o=JSON.stringify(a);if(n>=400&&n<600){throw new ApiError({message:o,status:n})}throw new Error(o)}}function includeExtraBodyToRequestInit(e,t){if(!t||0===Object.keys(t).length)return;if(e.body instanceof Blob)return void console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");let n={};if("string"==typeof e.body&&e.body.length>0)try{const t=JSON.parse(e.body);if("object"!=typeof t||null===t||Array.isArray(t))return void console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");n=t}catch(e){return void console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.")}const a=function e(t,n){const a=Object.assign({},t);for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const o=n[t],l=a[t];o&&"object"==typeof o&&!Array.isArray(o)&&l&&"object"==typeof l&&!Array.isArray(l)?a[t]=e(l,o):(l&&o&&typeof l!=typeof o&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${t}". Original type: ${typeof l}, New type: ${typeof o}. Overwriting.`),a[t]=o)}return a}(n,t);e.body=JSON.stringify(a)}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MCP_LABEL="mcp_used/unknown";let hasMcpToolUsageFromMcpToTool=!1;function hasMcpToolUsage(e){for(const t of e){if(isMcpCallableTool(t))return!0;if("object"==typeof t&&"inputSchema"in t)return!0}return hasMcpToolUsageFromMcpToTool}function setMcpUsageHeader(e){var t;const n=null!==(t=e["x-goog-api-client"])&&void 0!==t?t:"";e["x-goog-api-client"]=(n+` ${MCP_LABEL}`).trimStart()}function isMcpCallableTool(e){return null!==e&&"object"==typeof e&&e instanceof McpCallableTool}function listAllTools(e,t=100){return __asyncGenerator(this,arguments,(function*(){let n,a=0;for(;a<t;){const t=yield __await(e.listTools({cursor:n}));for(const e of t.tools)yield yield __await(e),a++;if(!t.nextCursor)break;n=t.nextCursor}}))}class McpCallableTool{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new McpCallableTool(e,t)}async initialize(){var e,t,n,a;if(this.mcpTools.length>0)return;const o={},l=[];for(const u of this.mcpClients)try{for(var s,i=!0,r=(t=void 0,__asyncValues(listAllTools(u)));!(e=(s=await r.next()).done);i=!0){a=s.value,i=!1;const e=a;l.push(e);const t=e.name;if(o[t])throw new Error(`Duplicate function name ${t} found in MCP tools. Please ensure function names are unique.`);o[t]=u}}catch(e){t={error:e}}finally{try{i||e||!(n=r.return)||await n.call(r)}finally{if(t)throw t.error}}this.mcpTools=l,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),mcpToolsToGeminiTool(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const n of e)if(n.name in this.functionNameToMcpClient){const e=this.functionNameToMcpClient[n.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const o=await e.callTool({name:n.name,arguments:n.args},void 0,a);t.push({functionResponse:{name:n.name,response:o.isError?{error:o}:o}})}return t}}function isMcpClient(e){return null!==e&&"object"==typeof e&&"listTools"in e&&"function"==typeof e.listTools}function mcpToTool(...e){if(hasMcpToolUsageFromMcpToTool=!0,0===e.length)throw new Error("No MCP clients provided");const t=e[e.length-1];return isMcpClient(t)?McpCallableTool.create(e,{}):McpCallableTool.create(e.slice(0,e.length-1),t)}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function handleWebSocketMessage$1(e,t,n){const a=new LiveMusicServerMessage;let o;o=n.data instanceof Blob?JSON.parse(await n.data.text()):JSON.parse(n.data),Object.assign(a,o),t(a)}class LiveMusic{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n}async connect(e){var t,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),l=mapToHeaders$1(this.apiClient.getDefaultHeaders()),s=`${a}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${this.apiClient.getApiKey()}`;let i=()=>{};const r=new Promise((e=>{i=e})),u=e.callbacks,c=this.apiClient,h={onopen:function(){i({})},onmessage:e=>{handleWebSocketMessage$1(c,u.onmessage,e)},onerror:null!==(t=null==u?void 0:u.onerror)&&void 0!==t?t:function(e){},onclose:null!==(n=null==u?void 0:u.onclose)&&void 0!==n?n:function(e){}},d=this.webSocketFactory.create(s,headersToMap$1(l),h);d.connect(),await r;const p={setup:{model:tModel(this.apiClient,e.model)}};return d.send(JSON.stringify(p)),new LiveMusicSession(d,this.apiClient)}}class LiveMusicSession{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||0===Object.keys(e.weightedPrompts).length)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=liveMusicSetWeightedPromptsParametersToMldev(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=liveMusicSetConfigParametersToMldev(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(LiveMusicPlaybackControl.PLAY)}pause(){this.sendPlaybackControl(LiveMusicPlaybackControl.PAUSE)}stop(){this.sendPlaybackControl(LiveMusicPlaybackControl.STOP)}resetContext(){this.sendPlaybackControl(LiveMusicPlaybackControl.RESET_CONTEXT)}close(){this.conn.close()}}function headersToMap$1(e){const t={};return e.forEach(((e,n)=>{t[n]=e})),t}function mapToHeaders$1(e){const t=new Headers;for(const[n,a]of Object.entries(e))t.append(n,a);return t}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FUNCTION_RESPONSE_REQUIRES_ID="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function handleWebSocketMessage(e,t,n){const a=new LiveServerMessage;let o;o=n.data instanceof Blob?await n.data.text():n.data instanceof ArrayBuffer?(new TextDecoder).decode(n.data):n.data;const l=JSON.parse(o);if(e.isVertexAI()){const e=liveServerMessageFromVertex(l);Object.assign(a,e)}else{const e=l;Object.assign(a,e)}t(a)}class Live{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n,this.music=new LiveMusic(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,n,a,o,l,s;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const i=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion();let u;const c=this.apiClient.getHeaders();e.config&&e.config.tools&&hasMcpToolUsage(e.config.tools)&&setMcpUsageHeader(c);const h=mapToHeaders(c);if(this.apiClient.isVertexAI())u=`${i}/ws/google.cloud.aiplatform.${r}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,u);else{const e=this.apiClient.getApiKey();let t="BidiGenerateContent",n="key";(null==e?void 0:e.startsWith("auth_tokens/"))&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),"v1alpha"!==r&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),t="BidiGenerateContentConstrained",n="access_token"),u=`${i}/ws/google.ai.generativelanguage.${r}.GenerativeService.${t}?${n}=${e}`}let d=()=>{};const p=new Promise((e=>{d=e})),y=e.callbacks,g=this.apiClient,P={onopen:function(){var e;null===(e=null==y?void 0:y.onopen)||void 0===e||e.call(y),d({})},onmessage:e=>{handleWebSocketMessage(g,y.onmessage,e)},onerror:null!==(t=null==y?void 0:y.onerror)&&void 0!==t?t:function(e){},onclose:null!==(n=null==y?void 0:y.onclose)&&void 0!==n?n:function(e){}},V=this.webSocketFactory.create(u,headersToMap(h),P);V.connect(),await p;let m=tModel(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&m.startsWith("publishers/")){m=`projects/${this.apiClient.getProject()}/locations/${this.apiClient.getLocation()}/`+m}let B={};this.apiClient.isVertexAI()&&void 0===(null===(a=e.config)||void 0===a?void 0:a.responseModalities)&&(void 0===e.config?e.config={responseModalities:[Modality.AUDIO]}:e.config.responseModalities=[Modality.AUDIO]),(null===(o=e.config)||void 0===o?void 0:o.generationConfig)&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const f=null!==(s=null===(l=e.config)||void 0===l?void 0:l.tools)&&void 0!==s?s:[],v=[];for(const e of f)if(this.isCallableTool(e)){const t=e;v.push(await t.tool())}else v.push(e);v.length>0&&(e.config.tools=v);const T={model:m,config:e.config,callbacks:e.callbacks};return B=this.apiClient.isVertexAI()?liveConnectParametersToVertex(this.apiClient,T):liveConnectParametersToMldev(this.apiClient,T),delete B.config,V.send(JSON.stringify(B)),new Session(V,this.apiClient)}isCallableTool(e){return"callTool"in e&&"function"==typeof e.callTool}}const defaultLiveSendClientContentParamerters={turnComplete:!0};class Session{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(null!==t.turns&&void 0!==t.turns){let n=[];try{n=tContents(t.turns),e.isVertexAI()||(n=n.map((e=>contentToMldev$1(e))))}catch(e){throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:n,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let n=[];if(null==t.functionResponses)throw new Error("functionResponses is required.");if(n=Array.isArray(t.functionResponses)?t.functionResponses:[t.functionResponses],0===n.length)throw new Error("functionResponses is required.");for(const t of n){if("object"!=typeof t||null===t||!("name"in t)||!("response"in t))throw new Error(`Could not parse function response, type '${typeof t}'.`);if(!e.isVertexAI()&&!("id"in t))throw new Error(FUNCTION_RESPONSE_REQUIRES_ID)}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},defaultLiveSendClientContentParamerters),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};t=this.apiClient.isVertexAI()?{realtimeInput:liveSendRealtimeInputParametersToVertex(e)}:{realtimeInput:liveSendRealtimeInputParametersToMldev(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(null==e.functionResponses)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function headersToMap(e){const t={};return e.forEach(((e,n)=>{t[n]=e})),t}function mapToHeaders(e){const t=new Headers;for(const[n,a]of Object.entries(e))t.append(n,a);return t}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DEFAULT_MAX_REMOTE_CALLS=10;function shouldDisableAfc(e){var t,n,a;if(null===(t=null==e?void 0:e.automaticFunctionCalling)||void 0===t?void 0:t.disable)return!0;let o=!1;for(const t of null!==(n=null==e?void 0:e.tools)&&void 0!==n?n:[])if(isCallableTool(t)){o=!0;break}if(!o)return!0;const l=null===(a=null==e?void 0:e.automaticFunctionCalling)||void 0===a?void 0:a.maximumRemoteCalls;return!!(l&&(l<0||!Number.isInteger(l))||0==l)&&(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0)}function isCallableTool(e){return"callTool"in e&&"function"==typeof e.callTool}function hasCallableTools(e){var t,n,a;return null!==(a=null===(n=null===(t=e.config)||void 0===t?void 0:t.tools)||void 0===n?void 0:n.some((e=>isCallableTool(e))))&&void 0!==a&&a}function findAfcIncompatibleToolIndexes(e){var t;const n=[];return(null===(t=null==e?void 0:e.config)||void 0===t?void 0:t.tools)?(e.config.tools.forEach(((e,t)=>{if(isCallableTool(e))return;const a=e;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(t)})),n):n}function shouldAppendAfcHistory(e){var t;return!(null===(t=null==e?void 0:e.automaticFunctionCalling)||void 0===t?void 0:t.ignoreCallHistory)}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Models extends BaseModule{constructor(e){super(),this.apiClient=e,this.generateContent=async e=>{var t,n,a,o,l;const s=await this.processParamsMaybeAddMcpUsage(e);if(this.maybeMoveToResponseJsonSchem(e),!hasCallableTools(e)||shouldDisableAfc(e.config))return await this.generateContentInternal(s);const i=findAfcIncompatibleToolIndexes(e);if(i.length>0){const e=i.map((e=>`tools[${e}]`)).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${e}.`)}let r,u;const c=tContents(s.contents),h=null!==(a=null===(n=null===(t=s.config)||void 0===t?void 0:t.automaticFunctionCalling)||void 0===n?void 0:n.maximumRemoteCalls)&&void 0!==a?a:10;let d=0;for(;d<h&&(r=await this.generateContentInternal(s),r.functionCalls&&0!==r.functionCalls.length);){const t=r.candidates[0].content,n=[];for(const t of null!==(l=null===(o=e.config)||void 0===o?void 0:o.tools)&&void 0!==l?l:[])if(isCallableTool(t)){const e=t,a=await e.callTool(r.functionCalls);n.push(...a)}d++,u={role:"user",parts:n},s.contents=tContents(s.contents),s.contents.push(t),s.contents.push(u),shouldAppendAfcHistory(s.config)&&(c.push(t),c.push(u))}return shouldAppendAfcHistory(s.config)&&(r.automaticFunctionCallingHistory=c),r},this.generateContentStream=async e=>{var t,n,a,o,l;if(this.maybeMoveToResponseJsonSchem(e),shouldDisableAfc(e.config)){const t=await this.processParamsMaybeAddMcpUsage(e);return await this.generateContentStreamInternal(t)}const s=findAfcIncompatibleToolIndexes(e);if(s.length>0){const e=s.map((e=>`tools[${e}]`)).join(", ");throw new Error(`Incompatible tools found at ${e}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const i=null===(a=null===(n=null===(t=null==e?void 0:e.config)||void 0===t?void 0:t.toolConfig)||void 0===n?void 0:n.functionCallingConfig)||void 0===a?void 0:a.streamFunctionCallArguments,r=null===(l=null===(o=null==e?void 0:e.config)||void 0===o?void 0:o.automaticFunctionCalling)||void 0===l?void 0:l.disable;if(i&&!r)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(e)},this.generateImages=async e=>await this.generateImagesInternal(e).then((e=>{var t;let n;const a=[];if(null==e?void 0:e.generatedImages)for(const o of e.generatedImages)o&&(null==o?void 0:o.safetyAttributes)&&"Positive Prompt"===(null===(t=null==o?void 0:o.safetyAttributes)||void 0===t?void 0:t.contentType)?n=null==o?void 0:o.safetyAttributes:a.push(o);let o;return o=n?{generatedImages:a,positivePromptSafetyAttributes:n,sdkHttpResponse:e.sdkHttpResponse}:{generatedImages:a,sdkHttpResponse:e.sdkHttpResponse},o})),this.list=async e=>{var t;const n={config:Object.assign(Object.assign({},{queryBase:!0}),null==e?void 0:e.config)};if(this.apiClient.isVertexAI()&&!n.config.queryBase){if(null===(t=n.config)||void 0===t?void 0:t.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");n.config.filter="labels.tune-type:*"}return new Pager(PagedItem.PAGED_ITEM_MODELS,(e=>this.listInternal(e)),await this.listInternal(n),n)},this.editImage=async e=>{const t={model:e.model,prompt:e.prompt,referenceImages:[],config:e.config};return e.referenceImages&&e.referenceImages&&(t.referenceImages=e.referenceImages.map((e=>e.toReferenceImageAPI()))),await this.editImageInternal(t)},this.upscaleImage=async e=>{let t={numberOfImages:1,mode:"upscale"};e.config&&(t=Object.assign(Object.assign({},t),e.config));const n={model:e.model,image:e.image,upscaleFactor:e.upscaleFactor,config:t};return await this.upscaleImageInternal(n)},this.generateVideos=async e=>{var t,n,a,o,l,s;if((e.prompt||e.image||e.video)&&e.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||((null===(t=e.video)||void 0===t?void 0:t.uri)&&(null===(n=e.video)||void 0===n?void 0:n.videoBytes)?e.video={uri:e.video.uri,mimeType:e.video.mimeType}:(null===(o=null===(a=e.source)||void 0===a?void 0:a.video)||void 0===o?void 0:o.uri)&&(null===(s=null===(l=e.source)||void 0===l?void 0:l.video)||void 0===s?void 0:s.videoBytes)&&(e.source.video={uri:e.source.video.uri,mimeType:e.source.video.mimeType})),await this.generateVideosInternal(e)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,n,a;const o=null===(t=e.config)||void 0===t?void 0:t.tools;if(!o)return e;const l=await Promise.all(o.map((async e=>{if(isCallableTool(e)){const t=e;return await t.tool()}return e}))),s={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(s.config.tools=l,e.config&&e.config.tools&&hasMcpToolUsage(e.config.tools)){const t=null!==(a=null===(n=e.config.httpOptions)||void 0===n?void 0:n.headers)&&void 0!==a?a:{};let o=Object.assign({},t);0===Object.keys(o).length&&(o=this.apiClient.getDefaultHeaders()),setMcpUsageHeader(o),s.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:o})}return s}async initAfcToolsMap(e){var t,n,a;const o=new Map;for(const l of null!==(n=null===(t=e.config)||void 0===t?void 0:t.tools)&&void 0!==n?n:[])if(isCallableTool(l)){const e=l,t=await e.tool();for(const n of null!==(a=t.functionDeclarations)&&void 0!==a?a:[]){if(!n.name)throw new Error("Function declaration name is required.");if(o.has(n.name))throw new Error(`Duplicate tool declaration name: ${n.name}`);o.set(n.name,e)}}return o}async processAfcStream(e){var t,n,a;const o=null!==(a=null===(n=null===(t=e.config)||void 0===t?void 0:t.automaticFunctionCalling)||void 0===n?void 0:n.maximumRemoteCalls)&&void 0!==a?a:10;let l=!1,s=0;return function(e,t,n){var a,i;return __asyncGenerator(this,arguments,(function*(){for(var r,u,c,h;s<o;){l&&(s++,l=!1);const g=yield __await(e.processParamsMaybeAddMcpUsage(n)),P=yield __await(e.generateContentStreamInternal(g)),V=[],m=[];try{for(var d,p=!0,y=(u=void 0,__asyncValues(P));!(r=(d=yield __await(y.next())).done);p=!0){h=d.value,p=!1;const e=h;if(yield yield __await(e),e.candidates&&(null===(a=e.candidates[0])||void 0===a?void 0:a.content)){m.push(e.candidates[0].content);for(const n of null!==(i=e.candidates[0].content.parts)&&void 0!==i?i:[])if(s<o&&n.functionCall){if(!n.functionCall.name)throw new Error("Function call name was not returned by the model.");if(!t.has(n.functionCall.name))throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${t.keys()}, mising tool: ${n.functionCall.name}`);{const e=yield __await(t.get(n.functionCall.name).callTool([n.functionCall]));V.push(...e)}}}}}catch(e){u={error:e}}finally{try{p||r||!(c=y.return)||(yield __await(c.call(y)))}finally{if(u)throw u.error}}if(!(V.length>0))break;{l=!0;const e=new GenerateContentResponse;e.candidates=[{content:{role:"user",parts:V}}],yield yield __await(e);const t=[];t.push(...m),t.push({role:"user",parts:V});const a=tContents(n.contents).concat(t);n.contents=a}}}))}(this,await this.initAfcToolsMap(e),e)}async generateContentInternal(e){var t,n,a,o;let l,s="",i={};if(this.apiClient.isVertexAI()){const a=generateContentParametersToVertex(this.apiClient,e);return s=formatMap("{model}:generateContent",a._url),i=a._query,delete a._url,delete a._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),l.then((e=>{const t=generateContentResponseFromVertex(e),n=new GenerateContentResponse;return Object.assign(n,t),n}))}{const t=generateContentParametersToMldev(this.apiClient,e);return s=formatMap("{model}:generateContent",t._url),i=t._query,delete t._url,delete t._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(a=e.config)||void 0===a?void 0:a.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),l.then((e=>{const t=generateContentResponseFromMldev(e),n=new GenerateContentResponse;return Object.assign(n,t),n}))}}async generateContentStreamInternal(e){var t,n,a,o;let l,s="",i={};if(this.apiClient.isVertexAI()){const a=generateContentParametersToVertex(this.apiClient,e);s=formatMap("{model}:streamGenerateContent?alt=sse",a._url),i=a._query,delete a._url,delete a._query;return l=this.apiClient.requestStream({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}),l.then((function(e){return __asyncGenerator(this,arguments,(function*(){var t,n,a,o;try{for(var l,s=!0,i=__asyncValues(e);!(t=(l=yield __await(i.next())).done);s=!0){o=l.value,s=!1;const e=o,t=generateContentResponseFromVertex(yield __await(e.json()));t.sdkHttpResponse={headers:e.headers};const n=new GenerateContentResponse;Object.assign(n,t),yield yield __await(n)}}catch(e){n={error:e}}finally{try{s||t||!(a=i.return)||(yield __await(a.call(i)))}finally{if(n)throw n.error}}}))}))}{const t=generateContentParametersToMldev(this.apiClient,e);s=formatMap("{model}:streamGenerateContent?alt=sse",t._url),i=t._query,delete t._url,delete t._query;return l=this.apiClient.requestStream({path:s,queryParams:i,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(a=e.config)||void 0===a?void 0:a.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}),l.then((function(e){return __asyncGenerator(this,arguments,(function*(){var t,n,a,o;try{for(var l,s=!0,i=__asyncValues(e);!(t=(l=yield __await(i.next())).done);s=!0){o=l.value,s=!1;const e=o,t=generateContentResponseFromMldev(yield __await(e.json()));t.sdkHttpResponse={headers:e.headers};const n=new GenerateContentResponse;Object.assign(n,t),yield yield __await(n)}}catch(e){n={error:e}}finally{try{s||t||!(a=i.return)||(yield __await(a.call(i)))}finally{if(n)throw n.error}}}))}))}}async embedContent(e){var t,n,a,o;let l,s="",i={};if(this.apiClient.isVertexAI()){const a=embedContentParametersToVertex(this.apiClient,e);return s=formatMap("{model}:predict",a._url),i=a._query,delete a._url,delete a._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),l.then((e=>{const t=embedContentResponseFromVertex(e),n=new EmbedContentResponse;return Object.assign(n,t),n}))}{const t=embedContentParametersToMldev(this.apiClient,e);return s=formatMap("{model}:batchEmbedContents",t._url),i=t._query,delete t._url,delete t._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(a=e.config)||void 0===a?void 0:a.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),l.then((e=>{const t=embedContentResponseFromMldev(e),n=new EmbedContentResponse;return Object.assign(n,t),n}))}}async generateImagesInternal(e){var t,n,a,o;let l,s="",i={};if(this.apiClient.isVertexAI()){const a=generateImagesParametersToVertex(this.apiClient,e);return s=formatMap("{model}:predict",a._url),i=a._query,delete a._url,delete a._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),l.then((e=>{const t=generateImagesResponseFromVertex(e),n=new GenerateImagesResponse;return Object.assign(n,t),n}))}{const t=generateImagesParametersToMldev(this.apiClient,e);return s=formatMap("{model}:predict",t._url),i=t._query,delete t._url,delete t._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(a=e.config)||void 0===a?void 0:a.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),l.then((e=>{const t=generateImagesResponseFromMldev(e),n=new GenerateImagesResponse;return Object.assign(n,t),n}))}}async editImageInternal(e){var t,n;let a,o="",l={};if(this.apiClient.isVertexAI()){const s=editImageParametersInternalToVertex(this.apiClient,e);return o=formatMap("{model}:predict",s._url),l=s._query,delete s._url,delete s._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),a.then((e=>{const t=editImageResponseFromVertex(e),n=new EditImageResponse;return Object.assign(n,t),n}))}throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,n;let a,o="",l={};if(this.apiClient.isVertexAI()){const s=upscaleImageAPIParametersInternalToVertex(this.apiClient,e);return o=formatMap("{model}:predict",s._url),l=s._query,delete s._url,delete s._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),a.then((e=>{const t=upscaleImageResponseFromVertex(e),n=new UpscaleImageResponse;return Object.assign(n,t),n}))}throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,n;let a,o="",l={};if(this.apiClient.isVertexAI()){const s=recontextImageParametersToVertex(this.apiClient,e);return o=formatMap("{model}:predict",s._url),l=s._query,delete s._url,delete s._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),a.then((e=>{const t=recontextImageResponseFromVertex(e),n=new RecontextImageResponse;return Object.assign(n,t),n}))}throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,n;let a,o="",l={};if(this.apiClient.isVertexAI()){const s=segmentImageParametersToVertex(this.apiClient,e);return o=formatMap("{model}:predict",s._url),l=s._query,delete s._url,delete s._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),a.then((e=>{const t=segmentImageResponseFromVertex(e),n=new SegmentImageResponse;return Object.assign(n,t),n}))}throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,n,a,o;let l,s="",i={};if(this.apiClient.isVertexAI()){const a=getModelParametersToVertex(this.apiClient,e);return s=formatMap("{name}",a._url),i=a._query,delete a._url,delete a._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),l.then((e=>modelFromVertex(e)))}{const t=getModelParametersToMldev(this.apiClient,e);return s=formatMap("{name}",t._url),i=t._query,delete t._url,delete t._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(a=e.config)||void 0===a?void 0:a.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then((e=>e.json())),l.then((e=>modelFromMldev(e)))}}async listInternal(e){var t,n,a,o;let l,s="",i={};if(this.apiClient.isVertexAI()){const a=listModelsParametersToVertex(this.apiClient,e);return s=formatMap("{models_url}",a._url),i=a._query,delete a._url,delete a._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),l.then((e=>{const t=listModelsResponseFromVertex(e),n=new ListModelsResponse;return Object.assign(n,t),n}))}{const t=listModelsParametersToMldev(this.apiClient,e);return s=formatMap("{models_url}",t._url),i=t._query,delete t._url,delete t._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(a=e.config)||void 0===a?void 0:a.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),l.then((e=>{const t=listModelsResponseFromMldev(e),n=new ListModelsResponse;return Object.assign(n,t),n}))}}async update(e){var t,n,a,o;let l,s="",i={};if(this.apiClient.isVertexAI()){const a=updateModelParametersToVertex(this.apiClient,e);return s=formatMap("{model}",a._url),i=a._query,delete a._url,delete a._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"PATCH",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),l.then((e=>modelFromVertex(e)))}{const t=updateModelParametersToMldev(this.apiClient,e);return s=formatMap("{name}",t._url),i=t._query,delete t._url,delete t._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(t),httpMethod:"PATCH",httpOptions:null===(a=e.config)||void 0===a?void 0:a.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then((e=>e.json())),l.then((e=>modelFromMldev(e)))}}async delete(e){var t,n,a,o;let l,s="",i={};if(this.apiClient.isVertexAI()){const a=deleteModelParametersToVertex(this.apiClient,e);return s=formatMap("{name}",a._url),i=a._query,delete a._url,delete a._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),l.then((e=>{const t=deleteModelResponseFromVertex(e),n=new DeleteModelResponse;return Object.assign(n,t),n}))}{const t=deleteModelParametersToMldev(this.apiClient,e);return s=formatMap("{name}",t._url),i=t._query,delete t._url,delete t._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:null===(a=e.config)||void 0===a?void 0:a.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),l.then((e=>{const t=deleteModelResponseFromMldev(e),n=new DeleteModelResponse;return Object.assign(n,t),n}))}}async countTokens(e){var t,n,a,o;let l,s="",i={};if(this.apiClient.isVertexAI()){const a=countTokensParametersToVertex(this.apiClient,e);return s=formatMap("{model}:countTokens",a._url),i=a._query,delete a._url,delete a._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),l.then((e=>{const t=countTokensResponseFromVertex(e),n=new CountTokensResponse;return Object.assign(n,t),n}))}{const t=countTokensParametersToMldev(this.apiClient,e);return s=formatMap("{model}:countTokens",t._url),i=t._query,delete t._url,delete t._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(a=e.config)||void 0===a?void 0:a.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),l.then((e=>{const t=countTokensResponseFromMldev(e),n=new CountTokensResponse;return Object.assign(n,t),n}))}}async computeTokens(e){var t,n;let a,o="",l={};if(this.apiClient.isVertexAI()){const s=computeTokensParametersToVertex(this.apiClient,e);return o=formatMap("{model}:computeTokens",s._url),l=s._query,delete s._url,delete s._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),a.then((e=>{const t=computeTokensResponseFromVertex(e),n=new ComputeTokensResponse;return Object.assign(n,t),n}))}throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,n,a,o;let l,s="",i={};if(this.apiClient.isVertexAI()){const a=generateVideosParametersToVertex(this.apiClient,e);return s=formatMap("{model}:predictLongRunning",a._url),i=a._query,delete a._url,delete a._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),l.then((e=>{const t=generateVideosOperationFromVertex(e),n=new GenerateVideosOperation;return Object.assign(n,t),n}))}{const t=generateVideosParametersToMldev(this.apiClient,e);return s=formatMap("{model}:predictLongRunning",t._url),i=t._query,delete t._url,delete t._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(a=e.config)||void 0===a?void 0:a.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then((e=>e.json())),l.then((e=>{const t=generateVideosOperationFromMldev(e),n=new GenerateVideosOperation;return Object.assign(n,t),n}))}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Operations extends BaseModule{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,n=e.config;if(void 0===t.name||""===t.name)throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const e=t.name.split("/operations/")[0];let a;n&&"httpOptions"in n&&(a=n.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:e,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}{const e=await this.getVideosOperationInternal({operationName:t.name,config:n});return t._fromAPIResponse({apiResponse:e,_isVertexAI:!1})}}async get(e){const t=e.operation,n=e.config;if(void 0===t.name||""===t.name)throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const e=t.name.split("/operations/")[0];let a;n&&"httpOptions"in n&&(a=n.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:e,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}{const e=await this.getVideosOperationInternal({operationName:t.name,config:n});return t._fromAPIResponse({apiResponse:e,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,n,a,o;let l,s="",i={};if(this.apiClient.isVertexAI()){const a=getOperationParametersToVertex(e);return s=formatMap("{operationName}",a._url),i=a._query,delete a._url,delete a._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),l}{const t=getOperationParametersToMldev(e);return s=formatMap("{operationName}",t._url),i=t._query,delete t._url,delete t._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(a=e.config)||void 0===a?void 0:a.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then((e=>e.json())),l}}async fetchPredictVideosOperationInternal(e){var t,n;let a,o="",l={};if(this.apiClient.isVertexAI()){const s=fetchPredictOperationParametersToVertex(e);return o=formatMap("{resourceName}:fetchPredictOperation",s._url),l=s._query,delete s._url,delete s._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),a}throw new Error("This method is only supported by the Vertex AI.")}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function blobToMldev(e){const t={},n=getValueByPath(e,["data"]);if(null!=n&&setValueByPath(t,["data"],n),void 0!==getValueByPath(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const a=getValueByPath(e,["mimeType"]);return null!=a&&setValueByPath(t,["mimeType"],a),t}function contentToMldev(e){const t={},n=getValueByPath(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>partToMldev(e)))),setValueByPath(t,["parts"],e)}const a=getValueByPath(e,["role"]);return null!=a&&setValueByPath(t,["role"],a),t}function createAuthTokenConfigToMldev(e,t,n){const a=getValueByPath(t,["expireTime"]);void 0!==n&&null!=a&&setValueByPath(n,["expireTime"],a);const o=getValueByPath(t,["newSessionExpireTime"]);void 0!==n&&null!=o&&setValueByPath(n,["newSessionExpireTime"],o);const l=getValueByPath(t,["uses"]);void 0!==n&&null!=l&&setValueByPath(n,["uses"],l);const s=getValueByPath(t,["liveConnectConstraints"]);void 0!==n&&null!=s&&setValueByPath(n,["bidiGenerateContentSetup"],liveConnectConstraintsToMldev(e,s));const i=getValueByPath(t,["lockAdditionalFields"]);return void 0!==n&&null!=i&&setValueByPath(n,["fieldMask"],i),{}}function createAuthTokenParametersToMldev(e,t){const n={},a=getValueByPath(t,["config"]);return null!=a&&setValueByPath(n,["config"],createAuthTokenConfigToMldev(e,a,n)),n}function fileDataToMldev(e){const t={};if(void 0!==getValueByPath(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=getValueByPath(e,["fileUri"]);null!=n&&setValueByPath(t,["fileUri"],n);const a=getValueByPath(e,["mimeType"]);return null!=a&&setValueByPath(t,["mimeType"],a),t}function functionCallToMldev(e){const t={},n=getValueByPath(e,["id"]);null!=n&&setValueByPath(t,["id"],n);const a=getValueByPath(e,["args"]);null!=a&&setValueByPath(t,["args"],a);const o=getValueByPath(e,["name"]);if(null!=o&&setValueByPath(t,["name"],o),void 0!==getValueByPath(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==getValueByPath(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return t}function googleMapsToMldev(e){const t={};if(void 0!==getValueByPath(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=getValueByPath(e,["enableWidget"]);return null!=n&&setValueByPath(t,["enableWidget"],n),t}function googleSearchToMldev(e){const t={};if(void 0!==getValueByPath(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==getValueByPath(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=getValueByPath(e,["timeRangeFilter"]);return null!=n&&setValueByPath(t,["timeRangeFilter"],n),t}function liveConnectConfigToMldev(e,t){const n=getValueByPath(e,["generationConfig"]);void 0!==t&&null!=n&&setValueByPath(t,["setup","generationConfig"],n);const a=getValueByPath(e,["responseModalities"]);void 0!==t&&null!=a&&setValueByPath(t,["setup","generationConfig","responseModalities"],a);const o=getValueByPath(e,["temperature"]);void 0!==t&&null!=o&&setValueByPath(t,["setup","generationConfig","temperature"],o);const l=getValueByPath(e,["topP"]);void 0!==t&&null!=l&&setValueByPath(t,["setup","generationConfig","topP"],l);const s=getValueByPath(e,["topK"]);void 0!==t&&null!=s&&setValueByPath(t,["setup","generationConfig","topK"],s);const i=getValueByPath(e,["maxOutputTokens"]);void 0!==t&&null!=i&&setValueByPath(t,["setup","generationConfig","maxOutputTokens"],i);const r=getValueByPath(e,["mediaResolution"]);void 0!==t&&null!=r&&setValueByPath(t,["setup","generationConfig","mediaResolution"],r);const u=getValueByPath(e,["seed"]);void 0!==t&&null!=u&&setValueByPath(t,["setup","generationConfig","seed"],u);const c=getValueByPath(e,["speechConfig"]);void 0!==t&&null!=c&&setValueByPath(t,["setup","generationConfig","speechConfig"],tLiveSpeechConfig(c));const h=getValueByPath(e,["thinkingConfig"]);void 0!==t&&null!=h&&setValueByPath(t,["setup","generationConfig","thinkingConfig"],h);const d=getValueByPath(e,["enableAffectiveDialog"]);void 0!==t&&null!=d&&setValueByPath(t,["setup","generationConfig","enableAffectiveDialog"],d);const p=getValueByPath(e,["systemInstruction"]);void 0!==t&&null!=p&&setValueByPath(t,["setup","systemInstruction"],contentToMldev(tContent(p)));const y=getValueByPath(e,["tools"]);if(void 0!==t&&null!=y){let e=tTools(y);Array.isArray(e)&&(e=e.map((e=>toolToMldev(tTool(e))))),setValueByPath(t,["setup","tools"],e)}const g=getValueByPath(e,["sessionResumption"]);void 0!==t&&null!=g&&setValueByPath(t,["setup","sessionResumption"],sessionResumptionConfigToMldev(g));const P=getValueByPath(e,["inputAudioTranscription"]);void 0!==t&&null!=P&&setValueByPath(t,["setup","inputAudioTranscription"],P);const V=getValueByPath(e,["outputAudioTranscription"]);void 0!==t&&null!=V&&setValueByPath(t,["setup","outputAudioTranscription"],V);const m=getValueByPath(e,["realtimeInputConfig"]);void 0!==t&&null!=m&&setValueByPath(t,["setup","realtimeInputConfig"],m);const B=getValueByPath(e,["contextWindowCompression"]);void 0!==t&&null!=B&&setValueByPath(t,["setup","contextWindowCompression"],B);const f=getValueByPath(e,["proactivity"]);return void 0!==t&&null!=f&&setValueByPath(t,["setup","proactivity"],f),{}}function liveConnectConstraintsToMldev(e,t){const n={},a=getValueByPath(t,["model"]);null!=a&&setValueByPath(n,["setup","model"],tModel(e,a));const o=getValueByPath(t,["config"]);return null!=o&&setValueByPath(n,["config"],liveConnectConfigToMldev(o,n)),n}function partToMldev(e){const t={},n=getValueByPath(e,["mediaResolution"]);null!=n&&setValueByPath(t,["mediaResolution"],n);const a=getValueByPath(e,["codeExecutionResult"]);null!=a&&setValueByPath(t,["codeExecutionResult"],a);const o=getValueByPath(e,["executableCode"]);null!=o&&setValueByPath(t,["executableCode"],o);const l=getValueByPath(e,["fileData"]);null!=l&&setValueByPath(t,["fileData"],fileDataToMldev(l));const s=getValueByPath(e,["functionCall"]);null!=s&&setValueByPath(t,["functionCall"],functionCallToMldev(s));const i=getValueByPath(e,["functionResponse"]);null!=i&&setValueByPath(t,["functionResponse"],i);const r=getValueByPath(e,["inlineData"]);null!=r&&setValueByPath(t,["inlineData"],blobToMldev(r));const u=getValueByPath(e,["text"]);null!=u&&setValueByPath(t,["text"],u);const c=getValueByPath(e,["thought"]);null!=c&&setValueByPath(t,["thought"],c);const h=getValueByPath(e,["thoughtSignature"]);null!=h&&setValueByPath(t,["thoughtSignature"],h);const d=getValueByPath(e,["videoMetadata"]);return null!=d&&setValueByPath(t,["videoMetadata"],d),t}function sessionResumptionConfigToMldev(e){const t={},n=getValueByPath(e,["handle"]);if(null!=n&&setValueByPath(t,["handle"],n),void 0!==getValueByPath(e,["transparent"]))throw new Error("transparent parameter is not supported in Gemini API.");return t}function toolToMldev(e){const t={},n=getValueByPath(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>e))),setValueByPath(t,["functionDeclarations"],e)}if(void 0!==getValueByPath(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const a=getValueByPath(e,["googleSearchRetrieval"]);null!=a&&setValueByPath(t,["googleSearchRetrieval"],a);const o=getValueByPath(e,["computerUse"]);null!=o&&setValueByPath(t,["computerUse"],o);const l=getValueByPath(e,["fileSearch"]);null!=l&&setValueByPath(t,["fileSearch"],l);const s=getValueByPath(e,["codeExecution"]);if(null!=s&&setValueByPath(t,["codeExecution"],s),void 0!==getValueByPath(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=getValueByPath(e,["googleMaps"]);null!=i&&setValueByPath(t,["googleMaps"],googleMapsToMldev(i));const r=getValueByPath(e,["googleSearch"]);null!=r&&setValueByPath(t,["googleSearch"],googleSearchToMldev(r));const u=getValueByPath(e,["urlContext"]);return null!=u&&setValueByPath(t,["urlContext"],u),t}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function getFieldMasks(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const a=e[n];if("object"==typeof a&&null!=a&&Object.keys(a).length>0){const e=Object.keys(a).map((e=>`${n}.${e}`));t.push(...e)}else t.push(n)}return t.join(",")}function convertBidiSetupToTokenSetup(e,t){let n=null;const a=e.bidiGenerateContentSetup;if("object"==typeof a&&null!==a&&"setup"in a){const t=a.setup;"object"==typeof t&&null!==t?(e.bidiGenerateContentSetup=t,n=t):delete e.bidiGenerateContentSetup}else void 0!==a&&delete e.bidiGenerateContentSetup;const o=e.fieldMask;if(n){const a=getFieldMasks(n);if(Array.isArray(null==t?void 0:t.lockAdditionalFields)&&0===(null==t?void 0:t.lockAdditionalFields.length))a?e.fieldMask=a:delete e.fieldMask;else if((null==t?void 0:t.lockAdditionalFields)&&t.lockAdditionalFields.length>0&&null!==o&&Array.isArray(o)&&o.length>0){const t=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let n=[];o.length>0&&(n=o.map((e=>t.includes(e)?`generationConfig.${e}`:e)));const l=[];a&&l.push(a),n.length>0&&l.push(...n),l.length>0?e.fieldMask=l.join(","):delete e.fieldMask}else delete e.fieldMask}else null!==o&&Array.isArray(o)&&o.length>0?e.fieldMask=o.join(","):delete e.fieldMask;return e}class Tokens extends BaseModule{constructor(e){super(),this.apiClient=e}async create(e){var t,n;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const s=createAuthTokenParametersToMldev(this.apiClient,e);o=formatMap("auth_tokens",s._url),l=s._query,delete s.config,delete s._url,delete s._query;const i=convertBidiSetupToTokenSetup(s,e.config);return a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(i),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),a.then((e=>e))}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function deleteDocumentConfigToMldev(e,t){const n=getValueByPath(e,["force"]);return void 0!==t&&null!=n&&setValueByPath(t,["_query","force"],n),{}}function deleteDocumentParametersToMldev(e){const t={},n=getValueByPath(e,["name"]);null!=n&&setValueByPath(t,["_url","name"],n);const a=getValueByPath(e,["config"]);return null!=a&&deleteDocumentConfigToMldev(a,t),t}function getDocumentParametersToMldev(e){const t={},n=getValueByPath(e,["name"]);return null!=n&&setValueByPath(t,["_url","name"],n),t}function listDocumentsConfigToMldev(e,t){const n=getValueByPath(e,["pageSize"]);void 0!==t&&null!=n&&setValueByPath(t,["_query","pageSize"],n);const a=getValueByPath(e,["pageToken"]);return void 0!==t&&null!=a&&setValueByPath(t,["_query","pageToken"],a),{}}function listDocumentsParametersToMldev(e){const t={},n=getValueByPath(e,["parent"]);null!=n&&setValueByPath(t,["_url","parent"],n);const a=getValueByPath(e,["config"]);return null!=a&&listDocumentsConfigToMldev(a,t),t}function listDocumentsResponseFromMldev(e){const t={},n=getValueByPath(e,["sdkHttpResponse"]);null!=n&&setValueByPath(t,["sdkHttpResponse"],n);const a=getValueByPath(e,["nextPageToken"]);null!=a&&setValueByPath(t,["nextPageToken"],a);const o=getValueByPath(e,["documents"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>e))),setValueByPath(t,["documents"],e)}return t}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Documents extends BaseModule{constructor(e){super(),this.apiClient=e,this.list=async e=>new Pager(PagedItem.PAGED_ITEM_DOCUMENTS,(t=>this.listInternal({parent:e.parent,config:t.config})),await this.listInternal(e),e)}async get(e){var t,n;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=getDocumentParametersToMldev(e);return o=formatMap("{name}",s._url),l=s._query,delete s._url,delete s._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),a.then((e=>e))}}async delete(e){var t,n;let a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=deleteDocumentParametersToMldev(e);a=formatMap("{name}",l._url),o=l._query,delete l._url,delete l._query,await this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal})}}async listInternal(e){var t,n;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=listDocumentsParametersToMldev(e);return o=formatMap("{parent}/documents",s._url),l=s._query,delete s._url,delete s._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),a.then((e=>{const t=listDocumentsResponseFromMldev(e),n=new ListDocumentsResponse;return Object.assign(n,t),n}))}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FileSearchStores extends BaseModule{constructor(e,t=new Documents(e)){super(),this.apiClient=e,this.documents=t,this.list=async(e={})=>new Pager(PagedItem.PAGED_ITEM_FILE_SEARCH_STORES,(e=>this.listInternal(e)),await this.listInternal(e),e)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,n;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=createFileSearchStoreParametersToMldev(e);return o=formatMap("fileSearchStores",s._url),l=s._query,delete s._url,delete s._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),a.then((e=>e))}}async get(e){var t,n;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=getFileSearchStoreParametersToMldev(e);return o=formatMap("{name}",s._url),l=s._query,delete s._url,delete s._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),a.then((e=>e))}}async delete(e){var t,n;let a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=deleteFileSearchStoreParametersToMldev(e);a=formatMap("{name}",l._url),o=l._query,delete l._url,delete l._query,await this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal})}}async listInternal(e){var t,n;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=listFileSearchStoresParametersToMldev(e);return o=formatMap("fileSearchStores",s._url),l=s._query,delete s._url,delete s._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),a.then((e=>{const t=listFileSearchStoresResponseFromMldev(e),n=new ListFileSearchStoresResponse;return Object.assign(n,t),n}))}}async uploadToFileSearchStoreInternal(e){var t,n;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=uploadToFileSearchStoreParametersToMldev(e);return o=formatMap("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",s._url),l=s._query,delete s._url,delete s._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),a.then((e=>{const t=uploadToFileSearchStoreResumableResponseFromMldev(e),n=new UploadToFileSearchStoreResumableResponse;return Object.assign(n,t),n}))}}async importFile(e){var t,n;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=importFileParametersToMldev(e);return o=formatMap("{file_search_store_name}:importFile",s._url),l=s._query,delete s._url,delete s._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),a.then((e=>{const t=importFileOperationFromMldev(e),n=new ImportFileOperation;return Object.assign(n,t),n}))}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cancelTuningJobParametersToMldev(e,t){const n={},a=getValueByPath(e,["name"]);return null!=a&&setValueByPath(n,["_url","name"],a),n}function cancelTuningJobParametersToVertex(e,t){const n={},a=getValueByPath(e,["name"]);return null!=a&&setValueByPath(n,["_url","name"],a),n}function cancelTuningJobResponseFromMldev(e,t){const n={},a=getValueByPath(e,["sdkHttpResponse"]);return null!=a&&setValueByPath(n,["sdkHttpResponse"],a),n}function cancelTuningJobResponseFromVertex(e,t){const n={},a=getValueByPath(e,["sdkHttpResponse"]);return null!=a&&setValueByPath(n,["sdkHttpResponse"],a),n}function createTuningJobConfigToMldev(e,t,n){const a={};if(void 0!==getValueByPath(e,["validationDataset"]))throw new Error("validationDataset parameter is not supported in Gemini API.");const o=getValueByPath(e,["tunedModelDisplayName"]);if(void 0!==t&&null!=o&&setValueByPath(t,["displayName"],o),void 0!==getValueByPath(e,["description"]))throw new Error("description parameter is not supported in Gemini API.");const l=getValueByPath(e,["epochCount"]);void 0!==t&&null!=l&&setValueByPath(t,["tuningTask","hyperparameters","epochCount"],l);const s=getValueByPath(e,["learningRateMultiplier"]);if(null!=s&&setValueByPath(a,["tuningTask","hyperparameters","learningRateMultiplier"],s),void 0!==getValueByPath(e,["exportLastCheckpointOnly"]))throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(void 0!==getValueByPath(e,["preTunedModelCheckpointId"]))throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(void 0!==getValueByPath(e,["adapterSize"]))throw new Error("adapterSize parameter is not supported in Gemini API.");const i=getValueByPath(e,["batchSize"]);void 0!==t&&null!=i&&setValueByPath(t,["tuningTask","hyperparameters","batchSize"],i);const r=getValueByPath(e,["learningRate"]);if(void 0!==t&&null!=r&&setValueByPath(t,["tuningTask","hyperparameters","learningRate"],r),void 0!==getValueByPath(e,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");if(void 0!==getValueByPath(e,["beta"]))throw new Error("beta parameter is not supported in Gemini API.");return a}function createTuningJobConfigToVertex(e,t,n){let a=getValueByPath(n,["config","method"]);if(void 0===a&&(a="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===a){const n=getValueByPath(e,["validationDataset"]);void 0!==t&&null!=n&&setValueByPath(t,["supervisedTuningSpec"],tuningValidationDatasetToVertex(n))}else if("PREFERENCE_TUNING"===a){const n=getValueByPath(e,["validationDataset"]);void 0!==t&&null!=n&&setValueByPath(t,["preferenceOptimizationSpec"],tuningValidationDatasetToVertex(n))}const o=getValueByPath(e,["tunedModelDisplayName"]);void 0!==t&&null!=o&&setValueByPath(t,["tunedModelDisplayName"],o);const l=getValueByPath(e,["description"]);void 0!==t&&null!=l&&setValueByPath(t,["description"],l);let s=getValueByPath(n,["config","method"]);if(void 0===s&&(s="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===s){const n=getValueByPath(e,["epochCount"]);void 0!==t&&null!=n&&setValueByPath(t,["supervisedTuningSpec","hyperParameters","epochCount"],n)}else if("PREFERENCE_TUNING"===s){const n=getValueByPath(e,["epochCount"]);void 0!==t&&null!=n&&setValueByPath(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],n)}let i=getValueByPath(n,["config","method"]);if(void 0===i&&(i="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===i){const n=getValueByPath(e,["learningRateMultiplier"]);void 0!==t&&null!=n&&setValueByPath(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],n)}else if("PREFERENCE_TUNING"===i){const n=getValueByPath(e,["learningRateMultiplier"]);void 0!==t&&null!=n&&setValueByPath(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],n)}let r=getValueByPath(n,["config","method"]);if(void 0===r&&(r="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===r){const n=getValueByPath(e,["exportLastCheckpointOnly"]);void 0!==t&&null!=n&&setValueByPath(t,["supervisedTuningSpec","exportLastCheckpointOnly"],n)}else if("PREFERENCE_TUNING"===r){const n=getValueByPath(e,["exportLastCheckpointOnly"]);void 0!==t&&null!=n&&setValueByPath(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],n)}let u=getValueByPath(n,["config","method"]);if(void 0===u&&(u="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===u){const n=getValueByPath(e,["adapterSize"]);void 0!==t&&null!=n&&setValueByPath(t,["supervisedTuningSpec","hyperParameters","adapterSize"],n)}else if("PREFERENCE_TUNING"===u){const n=getValueByPath(e,["adapterSize"]);void 0!==t&&null!=n&&setValueByPath(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],n)}if(void 0!==getValueByPath(e,["batchSize"]))throw new Error("batchSize parameter is not supported in Vertex AI.");if(void 0!==getValueByPath(e,["learningRate"]))throw new Error("learningRate parameter is not supported in Vertex AI.");const c=getValueByPath(e,["labels"]);void 0!==t&&null!=c&&setValueByPath(t,["labels"],c);const h=getValueByPath(e,["beta"]);return void 0!==t&&null!=h&&setValueByPath(t,["preferenceOptimizationSpec","hyperParameters","beta"],h),{}}function createTuningJobParametersPrivateToMldev(e,t){const n={},a=getValueByPath(e,["baseModel"]);null!=a&&setValueByPath(n,["baseModel"],a);const o=getValueByPath(e,["preTunedModel"]);null!=o&&setValueByPath(n,["preTunedModel"],o);const l=getValueByPath(e,["trainingDataset"]);null!=l&&tuningDatasetToMldev(l);const s=getValueByPath(e,["config"]);return null!=s&&createTuningJobConfigToMldev(s,n),n}function createTuningJobParametersPrivateToVertex(e,t){const n={},a=getValueByPath(e,["baseModel"]);null!=a&&setValueByPath(n,["baseModel"],a);const o=getValueByPath(e,["preTunedModel"]);null!=o&&setValueByPath(n,["preTunedModel"],o);const l=getValueByPath(e,["trainingDataset"]);null!=l&&tuningDatasetToVertex(l,n,t);const s=getValueByPath(e,["config"]);return null!=s&&createTuningJobConfigToVertex(s,n,t),n}function getTuningJobParametersToMldev(e,t){const n={},a=getValueByPath(e,["name"]);return null!=a&&setValueByPath(n,["_url","name"],a),n}function getTuningJobParametersToVertex(e,t){const n={},a=getValueByPath(e,["name"]);return null!=a&&setValueByPath(n,["_url","name"],a),n}function listTuningJobsConfigToMldev(e,t,n){const a=getValueByPath(e,["pageSize"]);void 0!==t&&null!=a&&setValueByPath(t,["_query","pageSize"],a);const o=getValueByPath(e,["pageToken"]);void 0!==t&&null!=o&&setValueByPath(t,["_query","pageToken"],o);const l=getValueByPath(e,["filter"]);return void 0!==t&&null!=l&&setValueByPath(t,["_query","filter"],l),{}}function listTuningJobsConfigToVertex(e,t,n){const a=getValueByPath(e,["pageSize"]);void 0!==t&&null!=a&&setValueByPath(t,["_query","pageSize"],a);const o=getValueByPath(e,["pageToken"]);void 0!==t&&null!=o&&setValueByPath(t,["_query","pageToken"],o);const l=getValueByPath(e,["filter"]);return void 0!==t&&null!=l&&setValueByPath(t,["_query","filter"],l),{}}function listTuningJobsParametersToMldev(e,t){const n={},a=getValueByPath(e,["config"]);return null!=a&&listTuningJobsConfigToMldev(a,n),n}function listTuningJobsParametersToVertex(e,t){const n={},a=getValueByPath(e,["config"]);return null!=a&&listTuningJobsConfigToVertex(a,n),n}function listTuningJobsResponseFromMldev(e,t){const n={},a=getValueByPath(e,["sdkHttpResponse"]);null!=a&&setValueByPath(n,["sdkHttpResponse"],a);const o=getValueByPath(e,["nextPageToken"]);null!=o&&setValueByPath(n,["nextPageToken"],o);const l=getValueByPath(e,["tunedModels"]);if(null!=l){let e=l;Array.isArray(e)&&(e=e.map((e=>tuningJobFromMldev(e)))),setValueByPath(n,["tuningJobs"],e)}return n}function listTuningJobsResponseFromVertex(e,t){const n={},a=getValueByPath(e,["sdkHttpResponse"]);null!=a&&setValueByPath(n,["sdkHttpResponse"],a);const o=getValueByPath(e,["nextPageToken"]);null!=o&&setValueByPath(n,["nextPageToken"],o);const l=getValueByPath(e,["tuningJobs"]);if(null!=l){let e=l;Array.isArray(e)&&(e=e.map((e=>tuningJobFromVertex(e)))),setValueByPath(n,["tuningJobs"],e)}return n}function tunedModelFromMldev(e,t){const n={},a=getValueByPath(e,["name"]);null!=a&&setValueByPath(n,["model"],a);const o=getValueByPath(e,["name"]);return null!=o&&setValueByPath(n,["endpoint"],o),n}function tuningDatasetToMldev(e,t){const n={};if(void 0!==getValueByPath(e,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==getValueByPath(e,["vertexDatasetResource"]))throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const a=getValueByPath(e,["examples"]);if(null!=a){let e=a;Array.isArray(e)&&(e=e.map((e=>e))),setValueByPath(n,["examples","examples"],e)}return n}function tuningDatasetToVertex(e,t,n){let a=getValueByPath(n,["config","method"]);if(void 0===a&&(a="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===a){const n=getValueByPath(e,["gcsUri"]);void 0!==t&&null!=n&&setValueByPath(t,["supervisedTuningSpec","trainingDatasetUri"],n)}else if("PREFERENCE_TUNING"===a){const n=getValueByPath(e,["gcsUri"]);void 0!==t&&null!=n&&setValueByPath(t,["preferenceOptimizationSpec","trainingDatasetUri"],n)}let o=getValueByPath(n,["config","method"]);if(void 0===o&&(o="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===o){const n=getValueByPath(e,["vertexDatasetResource"]);void 0!==t&&null!=n&&setValueByPath(t,["supervisedTuningSpec","trainingDatasetUri"],n)}else if("PREFERENCE_TUNING"===o){const n=getValueByPath(e,["vertexDatasetResource"]);void 0!==t&&null!=n&&setValueByPath(t,["preferenceOptimizationSpec","trainingDatasetUri"],n)}if(void 0!==getValueByPath(e,["examples"]))throw new Error("examples parameter is not supported in Vertex AI.");return{}}function tuningJobFromMldev(e,t){const n={},a=getValueByPath(e,["sdkHttpResponse"]);null!=a&&setValueByPath(n,["sdkHttpResponse"],a);const o=getValueByPath(e,["name"]);null!=o&&setValueByPath(n,["name"],o);const l=getValueByPath(e,["state"]);null!=l&&setValueByPath(n,["state"],tTuningJobStatus(l));const s=getValueByPath(e,["createTime"]);null!=s&&setValueByPath(n,["createTime"],s);const i=getValueByPath(e,["tuningTask","startTime"]);null!=i&&setValueByPath(n,["startTime"],i);const r=getValueByPath(e,["tuningTask","completeTime"]);null!=r&&setValueByPath(n,["endTime"],r);const u=getValueByPath(e,["updateTime"]);null!=u&&setValueByPath(n,["updateTime"],u);const c=getValueByPath(e,["description"]);null!=c&&setValueByPath(n,["description"],c);const h=getValueByPath(e,["baseModel"]);null!=h&&setValueByPath(n,["baseModel"],h);const d=getValueByPath(e,["_self"]);return null!=d&&setValueByPath(n,["tunedModel"],tunedModelFromMldev(d)),n}function tuningJobFromVertex(e,t){const n={},a=getValueByPath(e,["sdkHttpResponse"]);null!=a&&setValueByPath(n,["sdkHttpResponse"],a);const o=getValueByPath(e,["name"]);null!=o&&setValueByPath(n,["name"],o);const l=getValueByPath(e,["state"]);null!=l&&setValueByPath(n,["state"],tTuningJobStatus(l));const s=getValueByPath(e,["createTime"]);null!=s&&setValueByPath(n,["createTime"],s);const i=getValueByPath(e,["startTime"]);null!=i&&setValueByPath(n,["startTime"],i);const r=getValueByPath(e,["endTime"]);null!=r&&setValueByPath(n,["endTime"],r);const u=getValueByPath(e,["updateTime"]);null!=u&&setValueByPath(n,["updateTime"],u);const c=getValueByPath(e,["error"]);null!=c&&setValueByPath(n,["error"],c);const h=getValueByPath(e,["description"]);null!=h&&setValueByPath(n,["description"],h);const d=getValueByPath(e,["baseModel"]);null!=d&&setValueByPath(n,["baseModel"],d);const p=getValueByPath(e,["tunedModel"]);null!=p&&setValueByPath(n,["tunedModel"],p);const y=getValueByPath(e,["preTunedModel"]);null!=y&&setValueByPath(n,["preTunedModel"],y);const g=getValueByPath(e,["supervisedTuningSpec"]);null!=g&&setValueByPath(n,["supervisedTuningSpec"],g);const P=getValueByPath(e,["preferenceOptimizationSpec"]);null!=P&&setValueByPath(n,["preferenceOptimizationSpec"],P);const V=getValueByPath(e,["tuningDataStats"]);null!=V&&setValueByPath(n,["tuningDataStats"],V);const m=getValueByPath(e,["encryptionSpec"]);null!=m&&setValueByPath(n,["encryptionSpec"],m);const B=getValueByPath(e,["partnerModelTuningSpec"]);null!=B&&setValueByPath(n,["partnerModelTuningSpec"],B);const f=getValueByPath(e,["customBaseModel"]);null!=f&&setValueByPath(n,["customBaseModel"],f);const v=getValueByPath(e,["experiment"]);null!=v&&setValueByPath(n,["experiment"],v);const T=getValueByPath(e,["labels"]);null!=T&&setValueByPath(n,["labels"],T);const C=getValueByPath(e,["outputUri"]);null!=C&&setValueByPath(n,["outputUri"],C);const E=getValueByPath(e,["pipelineJob"]);null!=E&&setValueByPath(n,["pipelineJob"],E);const _=getValueByPath(e,["serviceAccount"]);null!=_&&setValueByPath(n,["serviceAccount"],_);const I=getValueByPath(e,["tunedModelDisplayName"]);null!=I&&setValueByPath(n,["tunedModelDisplayName"],I);const S=getValueByPath(e,["veoTuningSpec"]);return null!=S&&setValueByPath(n,["veoTuningSpec"],S),n}function tuningOperationFromMldev(e,t){const n={},a=getValueByPath(e,["sdkHttpResponse"]);null!=a&&setValueByPath(n,["sdkHttpResponse"],a);const o=getValueByPath(e,["name"]);null!=o&&setValueByPath(n,["name"],o);const l=getValueByPath(e,["metadata"]);null!=l&&setValueByPath(n,["metadata"],l);const s=getValueByPath(e,["done"]);null!=s&&setValueByPath(n,["done"],s);const i=getValueByPath(e,["error"]);return null!=i&&setValueByPath(n,["error"],i),n}function tuningValidationDatasetToVertex(e,t){const n={},a=getValueByPath(e,["gcsUri"]);null!=a&&setValueByPath(n,["validationDatasetUri"],a);const o=getValueByPath(e,["vertexDatasetResource"]);return null!=o&&setValueByPath(n,["validationDatasetUri"],o),n}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tunings extends BaseModule{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new Pager(PagedItem.PAGED_ITEM_TUNING_JOBS,(e=>this.listInternal(e)),await this.listInternal(e),e),this.get=async e=>await this.getInternal(e),this.tune=async e=>{var t;if(this.apiClient.isVertexAI()){if(e.baseModel.startsWith("projects/")){const n={tunedModelName:e.baseModel};(null===(t=e.config)||void 0===t?void 0:t.preTunedModelCheckpointId)&&(n.checkpointId=e.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},e),{preTunedModel:n});return a.baseModel=void 0,await this.tuneInternal(a)}{const t=Object.assign({},e);return await this.tuneInternal(t)}}{const t=Object.assign({},e),n=await this.tuneMldevInternal(t);let a="";void 0!==n.metadata&&void 0!==n.metadata.tunedModel?a=n.metadata.tunedModel:void 0!==n.name&&n.name.includes("/operations/")&&(a=n.name.split("/operations/")[0]);return{name:a,state:JobState.JOB_STATE_QUEUED}}}}async getInternal(e){var t,n,a,o;let l,s="",i={};if(this.apiClient.isVertexAI()){const a=getTuningJobParametersToVertex(e);return s=formatMap("{name}",a._url),i=a._query,delete a._url,delete a._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),l.then((e=>tuningJobFromVertex(e)))}{const t=getTuningJobParametersToMldev(e);return s=formatMap("{name}",t._url),i=t._query,delete t._url,delete t._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(a=e.config)||void 0===a?void 0:a.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),l.then((e=>tuningJobFromMldev(e)))}}async listInternal(e){var t,n,a,o;let l,s="",i={};if(this.apiClient.isVertexAI()){const a=listTuningJobsParametersToVertex(e);return s=formatMap("tuningJobs",a._url),i=a._query,delete a._url,delete a._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),l.then((e=>{const t=listTuningJobsResponseFromVertex(e),n=new ListTuningJobsResponse;return Object.assign(n,t),n}))}{const t=listTuningJobsParametersToMldev(e);return s=formatMap("tunedModels",t._url),i=t._query,delete t._url,delete t._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(a=e.config)||void 0===a?void 0:a.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),l.then((e=>{const t=listTuningJobsResponseFromMldev(e),n=new ListTuningJobsResponse;return Object.assign(n,t),n}))}}async cancel(e){var t,n,a,o;let l,s="",i={};if(this.apiClient.isVertexAI()){const a=cancelTuningJobParametersToVertex(e);return s=formatMap("{name}:cancel",a._url),i=a._query,delete a._url,delete a._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),l.then((e=>{const t=cancelTuningJobResponseFromVertex(e),n=new CancelTuningJobResponse;return Object.assign(n,t),n}))}{const t=cancelTuningJobParametersToMldev(e);return s=formatMap("{name}:cancel",t._url),i=t._query,delete t._url,delete t._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(a=e.config)||void 0===a?void 0:a.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),l.then((e=>{const t=cancelTuningJobResponseFromMldev(e),n=new CancelTuningJobResponse;return Object.assign(n,t),n}))}}async tuneInternal(e){var t,n;let a,o="",l={};if(this.apiClient.isVertexAI()){const s=createTuningJobParametersPrivateToVertex(e,e);return o=formatMap("tuningJobs",s._url),l=s._query,delete s._url,delete s._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),a.then((e=>tuningJobFromVertex(e)))}throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,n;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=createTuningJobParametersPrivateToMldev(e);return o=formatMap("tunedModels",s._url),l=s._query,delete s._url,delete s._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),a.then((e=>tuningOperationFromMldev(e)))}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BrowserDownloader{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const MAX_CHUNK_SIZE=8388608,MAX_RETRY_COUNT=3,INITIAL_RETRY_DELAY_MS=1e3,DELAY_MULTIPLIER=2,X_GOOG_UPLOAD_STATUS_HEADER_FIELD="x-goog-upload-status";async function uploadBlob(e,t,n){var a;const o=await uploadBlobInternal(e,t,n),l=await(null==o?void 0:o.json());if("final"!==(null===(a=null==o?void 0:o.headers)||void 0===a?void 0:a["x-goog-upload-status"]))throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function uploadBlobToFileSearchStore(e,t,n){var a;const o=await uploadBlobInternal(e,t,n),l=await(null==o?void 0:o.json());if("final"!==(null===(a=null==o?void 0:o.headers)||void 0===a?void 0:a["x-goog-upload-status"]))throw new Error("Failed to upload file: Upload status is not finalized.");const s=uploadToFileSearchStoreOperationFromMldev(l),i=new UploadToFileSearchStoreOperation;return Object.assign(i,s),i}async function uploadBlobInternal(e,t,n){var a,o;let l=0,s=0,i=new HttpResponse(new Response),r="upload";for(l=e.size;s<l;){const u=Math.min(8388608,l-s),c=e.slice(s,s+u);s+u>=l&&(r+=", finalize");let h=0,d=1e3;for(;h<3&&(i=await n.request({path:"",body:c,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":r,"X-Goog-Upload-Offset":String(s),"Content-Length":String(u)}}}),!(null===(a=null==i?void 0:i.headers)||void 0===a?void 0:a["x-goog-upload-status"]));)h++,await sleep(d),d*=2;if(s+=u,"active"!==(null===(o=null==i?void 0:i.headers)||void 0===o?void 0:o["x-goog-upload-status"]))break;if(l<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return i}async function getBlobStat(e){return{size:e.size,type:e.type}}function sleep(e){return new Promise((t=>setTimeout(t,e)))}class BrowserUploader{async upload(e,t,n){if("string"==typeof e)throw new Error("File path is not supported in browser uploader.");return await uploadBlob(e,t,n)}async uploadToFileSearchStore(e,t,n){if("string"==typeof e)throw new Error("File path is not supported in browser uploader.");return await uploadBlobToFileSearchStore(e,t,n)}async stat(e){if("string"==typeof e)throw new Error("File path is not supported in browser uploader.");return await getBlobStat(e)}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BrowserWebSocketFactory{create(e,t,n){return new BrowserWebSocket(e,t,n)}}class BrowserWebSocket{constructor(e,t,n){this.url=e,this.headers=t,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(void 0===this.ws)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(void 0===this.ws)throw new Error("WebSocket is not connected");this.ws.close()}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const GOOGLE_API_KEY_HEADER="x-goog-api-key";class WebAuth{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(null===e.get("x-goog-api-key")){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append("x-goog-api-key",this.apiKey)}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LANGUAGE_LABEL_PREFIX="gl-node/";class GoogleGenAI{constructor(e){var t;if(null==e.apiKey)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=null!==(t=e.vertexai)&&void 0!==t&&t,this.apiKey=e.apiKey;const n=getBaseUrl(e.httpOptions,e.vertexai,void 0,void 0);n&&(e.httpOptions?e.httpOptions.baseUrl=n:e.httpOptions={baseUrl:n}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const a=new WebAuth(this.apiKey);this.apiClient=new ApiClient({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:"gl-node/web",uploader:new BrowserUploader,downloader:new BrowserDownloader}),this.models=new Models(this.apiClient),this.live=new Live(this.apiClient,a,new BrowserWebSocketFactory),this.batches=new Batches(this.apiClient),this.chats=new Chats(this.models,this.apiClient),this.caches=new Caches(this.apiClient),this.files=new Files(this.apiClient),this.operations=new Operations(this.apiClient),this.authTokens=new Tokens(this.apiClient),this.tunings=new Tunings(this.apiClient),this.fileSearchStores=new FileSearchStores(this.apiClient)}}export{ActivityHandling,AdapterSize,ApiError,ApiSpec,AuthType,Batches,Behavior,BlockedReason,Caches,CancelTuningJobResponse,Chat,Chats,ComputeTokensResponse,ContentReferenceImage,ControlReferenceImage,ControlReferenceType,CountTokensResponse,CreateFileResponse,DeleteCachedContentResponse,DeleteFileResponse,DeleteModelResponse,DocumentState,DynamicRetrievalConfigMode,EditImageResponse,EditMode,EmbedContentResponse,EndSensitivity,Environment,FeatureSelectionPreference,FileSource,FileState,Files,FinishReason,FunctionCallingConfigMode,FunctionResponse,FunctionResponseBlob,FunctionResponseFileData,FunctionResponsePart,FunctionResponseScheduling,GenerateContentResponse,GenerateContentResponsePromptFeedback,GenerateContentResponseUsageMetadata,GenerateImagesResponse,GenerateVideosOperation,GenerateVideosResponse,GoogleGenAI,HarmBlockMethod,HarmBlockThreshold,HarmCategory,HarmProbability,HarmSeverity,HttpElementLocation,HttpResponse,ImagePromptLanguage,ImportFileOperation,ImportFileResponse,InlinedEmbedContentResponse,InlinedResponse,JobState,Language,ListBatchJobsResponse,ListCachedContentsResponse,ListDocumentsResponse,ListFileSearchStoresResponse,ListFilesResponse,ListModelsResponse,ListTuningJobsResponse,Live,LiveClientToolResponse,LiveMusicPlaybackControl,LiveMusicServerMessage,LiveSendToolResponseParameters,LiveServerMessage,MaskReferenceImage,MaskReferenceMode,MediaModality,MediaResolution,Modality,Mode,Models,MusicGenerationMode,Operations,Outcome,PagedItem,Pager,PartMediaResolutionLevel,PersonGeneration,PhishBlockThreshold,RawReferenceImage,RecontextImageResponse,ReplayResponse,SafetyFilterLevel,Scale,SegmentImageResponse,SegmentMode,Session,SingleEmbedContentResponse,StartSensitivity,StyleReferenceImage,SubjectReferenceImage,SubjectReferenceType,ThinkingLevel,Tokens,TrafficType,TuningMethod,TuningMode,TuningTask,TurnCompleteReason,TurnCoverage,Type,UploadToFileSearchStoreOperation,UploadToFileSearchStoreResponse,UploadToFileSearchStoreResumableResponse,UpscaleImageResponse,UrlRetrievalStatus,VideoCompressionQuality,VideoGenerationMaskMode,VideoGenerationReferenceType,createFunctionResponsePartFromBase64,createFunctionResponsePartFromUri,createModelContent,createPartFromBase64,createPartFromCodeExecutionResult,createPartFromExecutableCode,createPartFromFunctionCall,createPartFromFunctionResponse,createPartFromText,createPartFromUri,createUserContent,mcpToTool,setDefaultBaseUrls};
//# sourceMappingURL=/sm/83255ee1cf908f83aab0c287fd73ae18f815c3559b81bdadcf2acd5cc4402b5b.map